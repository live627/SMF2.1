<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex">

	<title>File Sources/RemoveTopic.php</title>

	<link rel="stylesheet" href="resources/style.css?c2f33731c1948fbed7c333554678bfa68d4817da">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
				<h3>Namespaces</h3>
			<ul>
				<li>
					<a href="namespace-MatthiasMullie.html">
						MatthiasMullie<span></span>
					</a>

						<ul>
				<li>
					<a href="namespace-MatthiasMullie.Minify.html">
						Minify<span></span>
					</a>

						<ul>
				<li>
					<a href="namespace-MatthiasMullie.Minify.Exceptions.html">
						Exceptions					</a>

						</li>
							</ul></li>
				<li>
					<a href="namespace-MatthiasMullie.PathConverter.html">
						PathConverter					</a>

						</li>
							</ul></li>
				<li>
					<a href="namespace-None.html">
						None					</a>

						</li>
				<li>
					<a href="namespace-ReCaptcha.html">
						ReCaptcha<span></span>
					</a>

						<ul>
				<li>
					<a href="namespace-ReCaptcha.RequestMethod.html">
						RequestMethod					</a>

						</li>
							</ul></li>
				<li>
					<a href="namespace-TOTP.html">
						TOTP					</a>

						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-apc_cache.html">apc_cache</a></li>
				<li><a href="class-apcu_cache.html">apcu_cache</a></li>
				<li><a href="class-ApprovePost_Notify_Background.html">ApprovePost_Notify_Background</a></li>
				<li><a href="class-ApproveReply_Notify_Background.html">ApproveReply_Notify_Background</a></li>
				<li><a href="class-Attachments.html">Attachments</a></li>
				<li><a href="class-Birthday_Notify_Background.html">Birthday_Notify_Background</a></li>
				<li><a href="class-browser_detector.html">browser_detector</a></li>
				<li><a href="class-Buddy_Notify_Background.html">Buddy_Notify_Background</a></li>
				<li><a href="class-cache_api.html">cache_api</a></li>
				<li><a href="class-CreateAttachment_Notify_Background.html">CreateAttachment_Notify_Background</a></li>
				<li><a href="class-CreatePost_Notify_Background.html">CreatePost_Notify_Background</a></li>
				<li><a href="class-curl_fetch_web_data.html">curl_fetch_web_data</a></li>
				<li><a href="class-custom_search.html">custom_search</a></li>
				<li><a href="class-EventNew_Notify_Background.html">EventNew_Notify_Background</a></li>
				<li><a href="class-ftp_connection.html">ftp_connection</a></li>
				<li><a href="class-fulltext_search.html">fulltext_search</a></li>
				<li><a href="class-gif_color_table.html">gif_color_table</a></li>
				<li><a href="class-gif_file.html">gif_file</a></li>
				<li><a href="class-gif_file_header.html">gif_file_header</a></li>
				<li><a href="class-gif_image.html">gif_image</a></li>
				<li><a href="class-gif_image_header.html">gif_image_header</a></li>
				<li><a href="class-gif_lzw_compression.html">gif_lzw_compression</a></li>
				<li><a href="class-GroupAct_Notify_Background.html">GroupAct_Notify_Background</a></li>
				<li><a href="class-GroupReq_Notify_Background.html">GroupReq_Notify_Background</a></li>
				<li><a href="class-Likes.html">Likes</a></li>
				<li><a href="class-Likes_Notify_Background.html">Likes_Notify_Background</a></li>
				<li><a href="class-MatthiasMullie.Minify.CSS.html">MatthiasMullie\Minify\CSS</a></li>
				<li><a href="class-MatthiasMullie.Minify.JS.html">MatthiasMullie\Minify\JS</a></li>
				<li><a href="class-MatthiasMullie.Minify.Minify.html">MatthiasMullie\Minify\Minify</a></li>
				<li><a href="class-MatthiasMullie.PathConverter.Converter.html">MatthiasMullie\PathConverter\Converter</a></li>
				<li><a href="class-MemberReport_Notify_Background.html">MemberReport_Notify_Background</a></li>
				<li><a href="class-MemberReportReply_Notify_Background.html">MemberReportReply_Notify_Background</a></li>
				<li><a href="class-memcache_cache.html">memcache_cache</a></li>
				<li><a href="class-memcached_cache.html">memcached_cache</a></li>
				<li><a href="class-Mentions.html">Mentions</a></li>
				<li><a href="class-MsgReport_Notify_Background.html">MsgReport_Notify_Background</a></li>
				<li><a href="class-MsgReportReply_Notify_Background.html">MsgReportReply_Notify_Background</a></li>
				<li><a href="class-paypal_display.html">paypal_display</a></li>
				<li><a href="class-paypal_payment.html">paypal_payment</a></li>
				<li><a href="class-postgres_cache.html">postgres_cache</a></li>
				<li><a href="class-ProxyServer.html">ProxyServer</a></li>
				<li><a href="class-Punycode.html">Punycode</a></li>
				<li><a href="class-ReCaptcha.ReCaptcha.html">ReCaptcha\ReCaptcha</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.Curl.html">ReCaptcha\RequestMethod\Curl</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.CurlPost.html">ReCaptcha\RequestMethod\CurlPost</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.Post.html">ReCaptcha\RequestMethod\Post</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.Socket.html">ReCaptcha\RequestMethod\Socket</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.SocketPost.html">ReCaptcha\RequestMethod\SocketPost</a></li>
				<li><a href="class-ReCaptcha.RequestParameters.html">ReCaptcha\RequestParameters</a></li>
				<li><a href="class-ReCaptcha.Response.html">ReCaptcha\Response</a></li>
				<li><a href="class-Register_Notify_Background.html">Register_Notify_Background</a></li>
				<li><a href="class-search_api.html">search_api</a></li>
				<li><a href="class-SMF_BackgroundTask.html">SMF_BackgroundTask</a></li>
				<li><a href="class-smf_cache.html">smf_cache</a></li>
				<li><a href="class-sqlite_cache.html">sqlite_cache</a></li>
				<li><a href="class-standard_search.html">standard_search</a></li>
				<li><a href="class-TOTP.Auth.html">TOTP\Auth</a></li>
				<li><a href="class-TypeError.html" class="invalid">TypeError</a></li>
				<li><a href="class-Update_TLD_Regex.html">Update_TLD_Regex</a></li>
				<li><a href="class-xcache_cache.html">xcache_cache</a></li>
				<li><a href="class-xmlArray.html">xmlArray</a></li>
				<li><a href="class-zend_cache.html">zend_cache</a></li>
			</ul>

			<h3>Interfaces</h3>
			<ul>
				<li><a href="class-cache_api_interface.html">cache_api_interface</a></li>
				<li><a href="class-ReCaptcha.RequestMethod.html">ReCaptcha\RequestMethod</a></li>
				<li><a href="class-search_api_interface.html">search_api_interface</a></li>
			</ul>


			<h3>Exceptions</h3>
			<ul>
				<li><a href="class-Error.html">Error</a></li>
				<li><a href="class-MatthiasMullie.Minify.Exception.html" class="deprecated">MatthiasMullie\Minify\Exception</a></li>
				<li><a href="class-MatthiasMullie.Minify.Exceptions.BasicException.html">MatthiasMullie\Minify\Exceptions\BasicException</a></li>
				<li><a href="class-MatthiasMullie.Minify.Exceptions.FileImportException.html">MatthiasMullie\Minify\Exceptions\FileImportException</a></li>
				<li><a href="class-MatthiasMullie.Minify.Exceptions.IOException.html">MatthiasMullie\Minify\Exceptions\IOException</a></li>
			</ul>


			<h3>Functions</h3>
			<ul>
				<li><a href="function-_safe_serialize.html">_safe_serialize</a></li>
				<li><a href="function-_safe_unserialize.html">_safe_unserialize</a></li>
				<li><a href="function-account.html">account</a></li>
				<li><a href="function-Activate.html">Activate</a></li>
				<li><a href="function-activateAccount.html">activateAccount</a></li>
				<li><a href="function-add_integration_function.html">add_integration_function</a></li>
				<li><a href="function-addData.html">addData</a></li>
				<li><a href="function-addInlineCss.html">addInlineCss</a></li>
				<li><a href="function-addInlineJavaScript.html">addInlineJavaScript</a></li>
				<li><a href="function-addJavaScriptVar.html">addJavaScriptVar</a></li>
				<li><a href="function-AddLanguage.html">AddLanguage</a></li>
				<li><a href="function-AddMailQueue.html">AddMailQueue</a></li>
				<li><a href="function-AddMembergroup.html">AddMembergroup</a></li>
				<li><a href="function-addMembersToGroup.html">addMembersToGroup</a></li>
				<li><a href="function-addSeparator.html">addSeparator</a></li>
				<li><a href="function-AddSmiley.html">AddSmiley</a></li>
				<li><a href="function-addSubscription.html">addSubscription</a></li>
				<li><a href="function-addTriggers.html">addTriggers</a></li>
				<li><a href="function-AdminAccount.html">AdminAccount</a></li>
				<li><a href="function-AdminApprove.html">AdminApprove</a></li>
				<li><a href="function-AdminBoardRecount.html">AdminBoardRecount</a></li>
				<li><a href="function-AdminEndSession.html">AdminEndSession</a></li>
				<li><a href="function-AdminHome.html">AdminHome</a></li>
				<li><a href="function-adminLogin.html">adminLogin</a></li>
				<li><a href="function-adminLogin_outputPostVars.html">adminLogin_outputPostVars</a></li>
				<li><a href="function-AdminLogs.html">AdminLogs</a></li>
				<li><a href="function-AdminMain.html">AdminMain</a></li>
				<li><a href="function-adminNotify.html">adminNotify</a></li>
				<li><a href="function-AdminRegister.html">AdminRegister</a></li>
				<li><a href="function-AdminSearch.html">AdminSearch</a></li>
				<li><a href="function-AdminSearchInternal.html">AdminSearchInternal</a></li>
				<li><a href="function-AdminSearchMember.html">AdminSearchMember</a></li>
				<li><a href="function-AdminSearchOM.html">AdminSearchOM</a></li>
				<li><a href="function-alert_configuration.html">alert_configuration</a></li>
				<li><a href="function-alert_count.html">alert_count</a></li>
				<li><a href="function-alert_delete.html">alert_delete</a></li>
				<li><a href="function-alert_mark.html">alert_mark</a></li>
				<li><a href="function-alert_markread.html">alert_markread</a></li>
				<li><a href="function-alert_notifications_boards.html">alert_notifications_boards</a></li>
				<li><a href="function-alert_notifications_topics.html">alert_notifications_topics</a></li>
				<li><a href="function-alert_purge.html">alert_purge</a></li>
				<li><a href="function-alerts_popup.html">alerts_popup</a></li>
				<li><a href="function-AlignURLsWithSSLSetting.html">AlignURLsWithSSLSetting</a></li>
				<li><a href="function-allowedTo.html">allowedTo</a></li>
				<li><a href="function-AnnouncementSelectMembergroup.html">AnnouncementSelectMembergroup</a></li>
				<li><a href="function-AnnouncementSend.html">AnnouncementSend</a></li>
				<li><a href="function-AnnounceTopic.html">AnnounceTopic</a></li>
				<li><a href="function-ApplyRules.html">ApplyRules</a></li>
				<li><a href="function-approveAllData.html">approveAllData</a></li>
				<li><a href="function-ApproveAttach.html">ApproveAttach</a></li>
				<li><a href="function-ApproveAttachments.html">ApproveAttachments</a></li>
				<li><a href="function-ApproveMessage.html">ApproveMessage</a></li>
				<li><a href="function-approveMessages.html">approveMessages</a></li>
				<li><a href="function-approvePosts.html">approvePosts</a></li>
				<li><a href="function-approveTopics.html">approveTopics</a></li>
				<li><a href="function-array_column.html">array_column</a></li>
				<li><a href="function-array_length.html">array_length</a></li>
				<li><a href="function-assignAttachments.html">assignAttachments</a></li>
				<li><a href="function-attachDirStatus.html">attachDirStatus</a></li>
				<li><a href="function-attachmentChecks.html">attachmentChecks</a></li>
				<li><a href="function-attachments_init_dir.html">attachments_init_dir</a></li>
				<li><a href="function-automanage_attachments_by_space.html">automanage_attachments_by_space</a></li>
				<li><a href="function-automanage_attachments_check_directory.html">automanage_attachments_check_directory</a></li>
				<li><a href="function-automanage_attachments_create_directory.html">automanage_attachments_create_directory</a></li>
				<li><a href="function-AutoSuggest_Search_Member.html">AutoSuggest_Search_Member</a></li>
				<li><a href="function-AutoSuggest_Search_MemberGroups.html">AutoSuggest_Search_MemberGroups</a></li>
				<li><a href="function-AutoSuggest_Search_SMFVersions.html">AutoSuggest_Search_SMFVersions</a></li>
				<li><a href="function-AutoSuggestHandler.html">AutoSuggestHandler</a></li>
				<li><a href="function-AutoTask.html">AutoTask</a></li>
				<li><a href="function-BackupDatabase.html">BackupDatabase</a></li>
				<li><a href="function-backupTable.html">backupTable</a></li>
				<li><a href="function-Ban.html">Ban</a></li>
				<li><a href="function-BanBrowseTriggers.html">BanBrowseTriggers</a></li>
				<li><a href="function-BanEdit.html">BanEdit</a></li>
				<li><a href="function-banEdit2.html">banEdit2</a></li>
				<li><a href="function-BanEditTrigger.html">BanEditTrigger</a></li>
				<li><a href="function-BanList.html">BanList</a></li>
				<li><a href="function-banLoadAdditionalIPs.html">banLoadAdditionalIPs</a></li>
				<li><a href="function-banLoadAdditionalIPsError.html">banLoadAdditionalIPsError</a></li>
				<li><a href="function-banLoadAdditionalIPsMember.html">banLoadAdditionalIPsMember</a></li>
				<li><a href="function-BanLog.html">BanLog</a></li>
				<li><a href="function-banPermissions.html">banPermissions</a></li>
				<li><a href="function-bbc_to_html.html" class="deprecated">bbc_to_html</a></li>
				<li><a href="function-BoardIndex.html">BoardIndex</a></li>
				<li><a href="function-BoardNotify.html">BoardNotify</a></li>
				<li><a href="function-BoardPermissionsReport.html">BoardPermissionsReport</a></li>
				<li><a href="function-BoardReport.html">BoardReport</a></li>
				<li><a href="function-boardsAllowedTo.html">boardsAllowedTo</a></li>
				<li><a href="function-BoardurlMatch.html">BoardurlMatch</a></li>
				<li><a href="function-BookOfUnknown.html">BookOfUnknown</a></li>
				<li><a href="function-BrowseFiles.html">BrowseFiles</a></li>
				<li><a href="function-BrowseMailQueue.html">BrowseMailQueue</a></li>
				<li><a href="function-BuddyListToggle.html">BuddyListToggle</a></li>
				<li><a href="function-build_query_board.html">build_query_board</a></li>
				<li><a href="function-build_regex.html">build_regex</a></li>
				<li><a href="function-buildEventDatetimes.html">buildEventDatetimes</a></li>
				<li><a href="function-cache_get_data.html">cache_get_data</a></li>
				<li><a href="function-cache_getLastPosts.html">cache_getLastPosts</a></li>
				<li><a href="function-cache_getMembergroupList.html">cache_getMembergroupList</a></li>
				<li><a href="function-cache_getOffsetIndependentEvents.html">cache_getOffsetIndependentEvents</a></li>
				<li><a href="function-cache_getRecentEvents.html">cache_getRecentEvents</a></li>
				<li><a href="function-cache_put_data.html">cache_put_data</a></li>
				<li><a href="function-cache_quick_get.html">cache_quick_get</a></li>
				<li><a href="function-CalculateNextTrigger.html">CalculateNextTrigger</a></li>
				<li><a href="function-CalendarMain.html">CalendarMain</a></li>
				<li><a href="function-CalendarPost.html">CalendarPost</a></li>
				<li><a href="function-call_helper.html">call_helper</a></li>
				<li><a href="function-call_integration_hook.html">call_integration_hook</a></li>
				<li><a href="function-canLinkEvent.html">canLinkEvent</a></li>
				<li><a href="function-canPickTheme.html">canPickTheme</a></li>
				<li><a href="function-cdata_parse.html">cdata_parse</a></li>
				<li><a href="function-censorText.html">censorText</a></li>
				<li><a href="function-check_cron.html">check_cron</a></li>
				<li><a href="function-checkActivation.html">checkActivation</a></li>
				<li><a href="function-checkChange.html">checkChange</a></li>
				<li><a href="function-checkConfirm.html">checkConfirm</a></li>
				<li><a href="function-checkExistingTriggerIP.html">checkExistingTriggerIP</a></li>
				<li><a href="function-CheckFilesWritable.html">CheckFilesWritable</a></li>
				<li><a href="function-checkGD.html">checkGD</a></li>
				<li><a href="function-checkImageContents.html">checkImageContents</a></li>
				<li><a href="function-checkImagick.html">checkImagick</a></li>
				<li><a href="function-checkLogin.html">checkLogin</a></li>
				<li><a href="function-checkMagickWand.html">checkMagickWand</a></li>
				<li><a href="function-checkSession.html">checkSession</a></li>
				<li><a href="function-checkSubmitOnce.html">checkSubmitOnce</a></li>
				<li><a href="function-clean_cache.html">clean_cache</a></li>
				<li><a href="function-cleanLangString.html">cleanLangString</a></li>
				<li><a href="function-cleanRequest.html">cleanRequest</a></li>
				<li><a href="function-cleanRequest_cron.html">cleanRequest_cron</a></li>
				<li><a href="function-cleanTokens.html">cleanTokens</a></li>
				<li><a href="function-cleanXml.html">cleanXml</a></li>
				<li><a href="function-ClearMailQueue.html">ClearMailQueue</a></li>
				<li><a href="function-cli_scheduled_fetchSMfiles.html">cli_scheduled_fetchSMfiles</a></li>
				<li><a href="function-clock.html">clock</a></li>
				<li><a href="function-cmdStep0.html">cmdStep0</a></li>
				<li><a href="function-comma_format.html">comma_format</a></li>
				<li><a href="function-compareVersions.html">compareVersions</a></li>
				<li><a href="function-ComposeMailing.html">ComposeMailing</a></li>
				<li><a href="function-consolidateSpiderStats.html">consolidateSpiderStats</a></li>
				<li><a href="function-construct_query_string.html">construct_query_string</a></li>
				<li><a href="function-constructPageIndex.html">constructPageIndex</a></li>
				<li><a href="function-ConvertEntities.html">ConvertEntities</a></li>
				<li><a href="function-ConvertMsgBody.html">ConvertMsgBody</a></li>
				<li><a href="function-convertSettingstoOptions.html">convertSettingstoOptions</a></li>
				<li><a href="function-convertSettingsToTheme.html">convertSettingsToTheme</a></li>
				<li><a href="function-ConvertUtf8.html">ConvertUtf8</a></li>
				<li><a href="function-CoppaForm.html">CoppaForm</a></li>
				<li><a href="function-CopyTemplate.html">CopyTemplate</a></li>
				<li><a href="function-copytree.html">copytree</a></li>
				<li><a href="function-countReports.html">countReports</a></li>
				<li><a href="function-create_button.html" class="deprecated">create_button</a></li>
				<li><a href="function-create_chmod_control.html">create_chmod_control</a></li>
				<li><a href="function-create_control_richedit.html">create_control_richedit</a></li>
				<li><a href="function-create_control_verification.html">create_control_verification</a></li>
				<li><a href="function-createAttachment.html">createAttachment</a></li>
				<li><a href="function-createBoard.html">createBoard</a></li>
				<li><a href="function-createCategory.html">createCategory</a></li>
				<li><a href="function-createList.html">createList</a></li>
				<li><a href="function-createMenu.html">createMenu</a></li>
				<li><a href="function-CreateMessageIndex.html">CreateMessageIndex</a></li>
				<li><a href="function-createPost.html">createPost</a></li>
				<li><a href="function-createSalvageArea.html">createSalvageArea</a></li>
				<li><a href="function-createThumbnail.html">createThumbnail</a></li>
				<li><a href="function-createToken.html">createToken</a></li>
				<li><a href="function-createWaveFile.html">createWaveFile</a></li>
				<li><a href="function-Credits.html">Credits</a></li>
				<li><a href="function-custFieldsMaxOrder.html">custFieldsMaxOrder</a></li>
				<li><a href="function-custMinify.html">custMinify</a></li>
				<li><a href="function-DatabaseChanges.html">DatabaseChanges</a></li>
				<li><a href="function-DatabasePopulation.html">DatabasePopulation</a></li>
				<li><a href="function-DatabaseSettings.html">DatabaseSettings</a></li>
				<li><a href="function-db_extend.html" class="invalid">db_extend</a></li>
				<li><a href="function-db_extra_init.html" class="invalid">db_extra_init</a></li>
				<li><a href="function-db_fix_prefix.html" class="invalid">db_fix_prefix</a></li>
				<li><a href="function-db_packages_init.html" class="invalid">db_packages_init</a></li>
				<li><a href="function-db_search_init.html" class="invalid">db_search_init</a></li>
				<li><a href="function-db_version_check.html">db_version_check</a></li>
				<li><a href="function-debugPrint.html">debugPrint</a></li>
				<li><a href="function-deleteAccount.html">deleteAccount</a></li>
				<li><a href="function-deleteAccount2.html">deleteAccount2</a></li>
				<li><a href="function-deleteAllMinified.html">deleteAllMinified</a></li>
				<li><a href="function-deleteBoards.html">deleteBoards</a></li>
				<li><a href="function-deleteCategories.html">deleteCategories</a></li>
				<li><a href="function-DeleteDraft.html">DeleteDraft</a></li>
				<li><a href="function-deleteErrors.html">deleteErrors</a></li>
				<li><a href="function-DeleteInstall.html">DeleteInstall</a></li>
				<li><a href="function-DeleteMembergroup.html">DeleteMembergroup</a></li>
				<li><a href="function-deleteMembergroups.html">deleteMembergroups</a></li>
				<li><a href="function-deleteMembers.html">deleteMembers</a></li>
				<li><a href="function-DeleteMessage.html">DeleteMessage</a></li>
				<li><a href="function-deleteMessages.html">deleteMessages</a></li>
				<li><a href="function-deleteModComment.html">deleteModComment</a></li>
				<li><a href="function-deleteNotifyPrefs.html">deleteNotifyPrefs</a></li>
				<li><a href="function-DeleteUpgrade.html">DeleteUpgrade</a></li>
				<li><a href="function-deltree.html">deltree</a></li>
				<li><a href="function-Destroy.html">Destroy</a></li>
				<li><a href="function-destroyMenu.html">destroyMenu</a></li>
				<li><a href="function-detectBrowser.html">detectBrowser</a></li>
				<li><a href="function-detectFulltextIndex.html">detectFulltextIndex</a></li>
				<li><a href="function-determineActions.html">determineActions</a></li>
				<li><a href="function-Display.html">Display</a></li>
				<li><a href="function-display_db_error.html">display_db_error</a></li>
				<li><a href="function-display_loadavg_error.html">display_loadavg_error</a></li>
				<li><a href="function-display_maintenance_message.html">display_maintenance_message</a></li>
				<li><a href="function-DisplayAdminFile.html">DisplayAdminFile</a></li>
				<li><a href="function-displayDebug.html">displayDebug</a></li>
				<li><a href="function-DisplayStats.html">DisplayStats</a></li>
				<li><a href="function-DoLogin.html">DoLogin</a></li>
				<li><a href="function-Download.html">Download</a></li>
				<li><a href="function-downloadAvatar.html">downloadAvatar</a></li>
				<li><a href="function-DownloadLanguage.html">DownloadLanguage</a></li>
				<li><a href="function-dumpTags.html">dumpTags</a></li>
				<li><a href="function-EditAgreement.html">EditAgreement</a></li>
				<li><a href="function-EditBoard.html">EditBoard</a></li>
				<li><a href="function-EditBoard2.html">EditBoard2</a></li>
				<li><a href="function-EditBoardSettings.html">EditBoardSettings</a></li>
				<li><a href="function-editBuddies.html">editBuddies</a></li>
				<li><a href="function-editBuddyIgnoreLists.html">editBuddyIgnoreLists</a></li>
				<li><a href="function-EditCategory.html">EditCategory</a></li>
				<li><a href="function-EditCategory2.html">EditCategory2</a></li>
				<li><a href="function-EditComment.html">EditComment</a></li>
				<li><a href="function-EditCustomProfiles.html">EditCustomProfiles</a></li>
				<li><a href="function-EditHoliday.html">EditHoliday</a></li>
				<li><a href="function-editIgnoreList.html">editIgnoreList</a></li>
				<li><a href="function-EditMembergroup.html">EditMembergroup</a></li>
				<li><a href="function-EditMessageIcons.html">EditMessageIcons</a></li>
				<li><a href="function-editModComment.html">editModComment</a></li>
				<li><a href="function-EditNews.html">EditNews</a></li>
				<li><a href="function-EditPermissionProfiles.html">EditPermissionProfiles</a></li>
				<li><a href="function-EditPoll.html">EditPoll</a></li>
				<li><a href="function-EditPoll2.html">EditPoll2</a></li>
				<li><a href="function-EditSearchMethod.html">EditSearchMethod</a></li>
				<li><a href="function-EditSearchSettings.html">EditSearchSettings</a></li>
				<li><a href="function-EditSmileyOrder.html">EditSmileyOrder</a></li>
				<li><a href="function-EditSmileys.html">EditSmileys</a></li>
				<li><a href="function-EditSmileySets.html">EditSmileySets</a></li>
				<li><a href="function-EditSmileySettings.html">EditSmileySettings</a></li>
				<li><a href="function-EditSpider.html">EditSpider</a></li>
				<li><a href="function-EditTask.html">EditTask</a></li>
				<li><a href="function-EditTheme.html">EditTheme</a></li>
				<li><a href="function-EditWeights.html">EditWeights</a></li>
				<li><a href="function-emailAdmins.html">emailAdmins</a></li>
				<li><a href="function-EnableTheme.html">EnableTheme</a></li>
				<li><a href="function-entity_fix__callback.html">entity_fix__callback</a></li>
				<li><a href="function-escapestring__recursive.html">escapestring__recursive</a></li>
				<li><a href="function-ExamineFile.html">ExamineFile</a></li>
				<li><a href="function-expandIPv6.html">expandIPv6</a></li>
				<li><a href="function-fatal_error.html">fatal_error</a></li>
				<li><a href="function-fatal_lang_error.html">fatal_lang_error</a></li>
				<li><a href="function-fetch_alerts.html">fetch_alerts</a></li>
				<li><a href="function-fetch_task.html">fetch_task</a></li>
				<li><a href="function-fetch_web_data.html">fetch_web_data</a></li>
				<li><a href="function-fetchPerms__recursive.html">fetchPerms__recursive</a></li>
				<li><a href="function-fetchTagAttributes.html">fetchTagAttributes</a></li>
				<li><a href="function-find_gpg.html">find_gpg</a></li>
				<li><a href="function-find_signed_off.html">find_signed_off</a></li>
				<li><a href="function-find_signed_off_parents.html">find_signed_off_parents</a></li>
				<li><a href="function-findForumErrors.html">findForumErrors</a></li>
				<li><a href="function-findMembers.html">findMembers</a></li>
				<li><a href="function-findSearchAPI.html">findSearchAPI</a></li>
				<li><a href="function-finishTables.html">finishTables</a></li>
				<li><a href="function-fix_possible_url.html">fix_possible_url</a></li>
				<li><a href="function-fix_serialized_data.html">fix_serialized_data</a></li>
				<li><a href="function-fixchar__callback.html">fixchar__callback</a></li>
				<li><a href="function-fixchardb__callback.html">fixchardb__callback</a></li>
				<li><a href="function-fixChildren.html">fixChildren</a></li>
				<li><a href="function-fixModSecurity.html">fixModSecurity</a></li>
				<li><a href="function-fixRelativePath.html">fixRelativePath</a></li>
				<li><a href="function-fixTag.html">fixTag</a></li>
				<li><a href="function-fixTags.html">fixTags</a></li>
				<li><a href="function-forum_time.html">forum_time</a></li>
				<li><a href="function-forumProfile.html">forumProfile</a></li>
				<li><a href="function-ForumSettings.html">ForumSettings</a></li>
				<li><a href="function-frameOptionsHeader.html">frameOptionsHeader</a></li>
				<li><a href="function-GeneralPermissionSettings.html">GeneralPermissionSettings</a></li>
				<li><a href="function-generateSubscriptionError.html">generateSubscriptionError</a></li>
				<li><a href="function-generateValidationCode.html">generateValidationCode</a></li>
				<li><a href="function-get_all_themes.html">get_all_themes</a></li>
				<li><a href="function-get_current_settings.html">get_current_settings</a></li>
				<li><a href="function-get_date_or_time_format.html">get_date_or_time_format</a></li>
				<li><a href="function-get_directory_tree_elements.html">get_directory_tree_elements</a></li>
				<li><a href="function-get_file_listing.html">get_file_listing</a></li>
				<li><a href="function-get_files_recursive.html">get_files_recursive</a></li>
				<li><a href="function-get_gravatar_url.html">get_gravatar_url</a></li>
				<li><a href="function-get_hook_info_from_raw.html">get_hook_info_from_raw</a></li>
				<li><a href="function-get_installed_themes.html">get_installed_themes</a></li>
				<li><a href="function-get_integration_hooks.html">get_integration_hooks</a></li>
				<li><a href="function-get_integration_hooks_count.html">get_integration_hooks_count</a></li>
				<li><a href="function-get_integration_hooks_data.html">get_integration_hooks_data</a></li>
				<li><a href="function-get_proxied_url.html">get_proxied_url</a></li>
				<li><a href="function-get_single_theme.html">get_single_theme</a></li>
				<li><a href="function-get_theme_info.html">get_theme_info</a></li>
				<li><a href="function-getAttachmentFilename.html">getAttachmentFilename</a></li>
				<li><a href="function-getAttachMsgInfo.html">getAttachMsgInfo</a></li>
				<li><a href="function-getAvatars.html">getAvatars</a></li>
				<li><a href="function-getBirthdayRange.html">getBirthdayRange</a></li>
				<li><a href="function-getBoardIndex.html">getBoardIndex</a></li>
				<li><a href="function-getBoardList.html">getBoardList</a></li>
				<li><a href="function-getBoardModeratorGroups.html">getBoardModeratorGroups</a></li>
				<li><a href="function-getBoardModerators.html">getBoardModerators</a></li>
				<li><a href="function-getBoardParents.html">getBoardParents</a></li>
				<li><a href="function-getBoardTree.html">getBoardTree</a></li>
				<li><a href="function-getCalendarGrid.html">getCalendarGrid</a></li>
				<li><a href="function-getCalendarList.html">getCalendarList</a></li>
				<li><a href="function-getCalendarWeek.html">getCalendarWeek</a></li>
				<li><a href="function-getCommentModDetails.html">getCommentModDetails</a></li>
				<li><a href="function-getCustFieldsMList.html">getCustFieldsMList</a></li>
				<li><a href="function-getDailyStats.html">getDailyStats</a></li>
				<li><a href="function-getEventPoster.html">getEventPoster</a></li>
				<li><a href="function-getEventProperties.html">getEventProperties</a></li>
				<li><a href="function-getEventRange.html">getEventRange</a></li>
				<li><a href="function-getFileVersions.html">getFileVersions</a></li>
				<li><a href="function-getHolidayRange.html">getHolidayRange</a></li>
				<li><a href="function-GetJumpTo.html">GetJumpTo</a></li>
				<li><a href="function-getLanguages.html">getLanguages</a></li>
				<li><a href="function-getLastPost.html">getLastPost</a></li>
				<li><a href="function-getLastPosts.html">getLastPosts</a></li>
				<li><a href="function-GetMemberActivationCounts.html">GetMemberActivationCounts</a></li>
				<li><a href="function-getMemberData.html">getMemberData</a></li>
				<li><a href="function-getMemberGroups.html">getMemberGroups</a></li>
				<li><a href="function-getMembersOnlineStats.html">getMembersOnlineStats</a></li>
				<li><a href="function-getMessageIcons.html">getMessageIcons</a></li>
				<li><a href="function-getMsgMemberID.html">getMsgMemberID</a></li>
				<li><a href="function-getNewEventDatetimes.html">getNewEventDatetimes</a></li>
				<li><a href="function-getNotifyPrefs.html">getNotifyPrefs</a></li>
				<li><a href="function-getPackageInfo.html">getPackageInfo</a></li>
				<li><a href="function-getRawAttachInfo.html">getRawAttachInfo</a></li>
				<li><a href="function-getReportComments.html">getReportComments</a></li>
				<li><a href="function-getReportDetails.html">getReportDetails</a></li>
				<li><a href="function-getReports.html">getReports</a></li>
				<li><a href="function-getServerVersions.html">getServerVersions</a></li>
				<li><a href="function-getTodayInfo.html">getTodayInfo</a></li>
				<li><a href="function-getTopic.html">getTopic</a></li>
				<li><a href="function-getTreeOrder.html">getTreeOrder</a></li>
				<li><a href="function-getUserTimezone.html">getUserTimezone</a></li>
				<li><a href="function-getXmlMembers.html">getXmlMembers</a></li>
				<li><a href="function-getXmlNews.html">getXmlNews</a></li>
				<li><a href="function-getXmlProfile.html">getXmlProfile</a></li>
				<li><a href="function-getXmlRecent.html">getXmlRecent</a></li>
				<li><a href="function-gif_outputAsPng.html">gif_outputAsPng</a></li>
				<li><a href="function-GroupList.html">GroupList</a></li>
				<li><a href="function-groupMembership.html">groupMembership</a></li>
				<li><a href="function-groupMembership2.html">groupMembership2</a></li>
				<li><a href="function-GroupPermissionsReport.html">GroupPermissionsReport</a></li>
				<li><a href="function-GroupRequests.html">GroupRequests</a></li>
				<li><a href="function-Groups.html">Groups</a></li>
				<li><a href="function-groupsAllowedTo.html">groupsAllowedTo</a></li>
				<li><a href="function-HandleComment.html">HandleComment</a></li>
				<li><a href="function-HandleReport.html">HandleReport</a></li>
				<li><a href="function-hash_benchmark.html">hash_benchmark</a></li>
				<li><a href="function-hash_length.html">hash_length</a></li>
				<li><a href="function-hash_password.html">hash_password</a></li>
				<li><a href="function-hash_salt.html">hash_salt</a></li>
				<li><a href="function-hash_verify_password.html">hash_verify_password</a></li>
				<li><a href="function-HelpIndex.html">HelpIndex</a></li>
				<li><a href="function-HelpRules.html">HelpRules</a></li>
				<li><a href="function-highlight.html">highlight</a></li>
				<li><a href="function-highlight_php_code.html">highlight_php_code</a></li>
				<li><a href="function-host_from_ip.html">host_from_ip</a></li>
				<li><a href="function-html_to_bbc.html">html_to_bbc</a></li>
				<li><a href="function-htmlspecialchars__recursive.html">htmlspecialchars__recursive</a></li>
				<li><a href="function-htmltrim__recursive.html">htmltrim__recursive</a></li>
				<li><a href="function-https_redirect_active.html">https_redirect_active</a></li>
				<li><a href="function-httpsOn.html">httpsOn</a></li>
				<li><a href="function-iCalDownload.html">iCalDownload</a></li>
				<li><a href="function-ignoreboards.html">ignoreboards</a></li>
				<li><a href="function-imagecopyresamplebicubic.html">imagecopyresamplebicubic</a></li>
				<li><a href="function-imagecreatefrombmp.html">imagecreatefrombmp</a></li>
				<li><a href="function-imageMemoryCheck.html">imageMemoryCheck</a></li>
				<li><a href="function-ImportSmileys.html">ImportSmileys</a></li>
				<li><a href="function-inet_dtop.html">inet_dtop</a></li>
				<li><a href="function-inet_ptod.html">inet_ptod</a></li>
				<li><a href="function-initialize_inputs.html" class="invalid">initialize_inputs</a></li>
				<li><a href="function-InMaintenance.html">InMaintenance</a></li>
				<li><a href="function-insertBanGroup.html">insertBanGroup</a></li>
				<li><a href="function-insertEvent.html">insertEvent</a></li>
				<li><a href="function-InstallCopy.html">InstallCopy</a></li>
				<li><a href="function-InstallDir.html">InstallDir</a></li>
				<li><a href="function-installer_updateSettingsFile.html">installer_updateSettingsFile</a></li>
				<li><a href="function-installExit.html">installExit</a></li>
				<li><a href="function-InstallFile.html">InstallFile</a></li>
				<li><a href="function-InstallSmileySet.html">InstallSmileySet</a></li>
				<li><a href="function-ip2range.html">ip2range</a></li>
				<li><a href="function-iri_to_url.html">iri_to_url</a></li>
				<li><a href="function-is_not_banned.html">is_not_banned</a></li>
				<li><a href="function-is_not_guest.html">is_not_guest</a></li>
				<li><a href="function-isAccessiblePM.html">isAccessiblePM</a></li>
				<li><a href="function-isAllowedTo.html">isAllowedTo</a></li>
				<li><a href="function-isBannedEmail.html">isBannedEmail</a></li>
				<li><a href="function-isBrowser.html">isBrowser</a></li>
				<li><a href="function-isChildOf.html">isChildOf</a></li>
				<li><a href="function-isReservedName.html">isReservedName</a></li>
				<li><a href="function-issueWarning.html">issueWarning</a></li>
				<li><a href="function-isValidIP.html">isValidIP</a></li>
				<li><a href="function-isValidIPv6.html">isValidIPv6</a></li>
				<li><a href="function-JavaScriptEscape.html">JavaScriptEscape</a></li>
				<li><a href="function-JavaScriptModify.html">JavaScriptModify</a></li>
				<li><a href="function-jeffsdatediff.html">jeffsdatediff</a></li>
				<li><a href="function-JSMembers.html">JSMembers</a></li>
				<li><a href="function-KickGuest.html">KickGuest</a></li>
				<li><a href="function-legalise_bbc.html">legalise_bbc</a></li>
				<li><a href="function-list_getAttachDirs.html">list_getAttachDirs</a></li>
				<li><a href="function-list_getAttachments.html">list_getAttachments</a></li>
				<li><a href="function-list_getBanItems.html">list_getBanItems</a></li>
				<li><a href="function-list_getBanLogEntries.html">list_getBanLogEntries</a></li>
				<li><a href="function-list_getBans.html">list_getBans</a></li>
				<li><a href="function-list_getBanTriggers.html">list_getBanTriggers</a></li>
				<li><a href="function-list_getBaseDirs.html">list_getBaseDirs</a></li>
				<li><a href="function-list_getBoardNotifications.html">list_getBoardNotifications</a></li>
				<li><a href="function-list_getFiles.html">list_getFiles</a></li>
				<li><a href="function-list_getGroupRequestCount.html">list_getGroupRequestCount</a></li>
				<li><a href="function-list_getGroupRequests.html" class="invalid">list_getGroupRequests</a></li>
				<li><a href="function-list_getGroupRequestsCount.html">list_getGroupRequestsCount</a></li>
				<li><a href="function-list_getHolidays.html">list_getHolidays</a></li>
				<li><a href="function-list_getIPMessageCount.html">list_getIPMessageCount</a></li>
				<li><a href="function-list_getIPMessages.html">list_getIPMessages</a></li>
				<li><a href="function-list_getLanguages.html">list_getLanguages</a></li>
				<li><a href="function-list_getLanguagesList.html">list_getLanguagesList</a></li>
				<li><a href="function-list_getLoginCount.html">list_getLoginCount</a></li>
				<li><a href="function-list_getLogins.html">list_getLogins</a></li>
				<li><a href="function-list_getMailQueue.html">list_getMailQueue</a></li>
				<li><a href="function-list_getMailQueueSize.html">list_getMailQueueSize</a></li>
				<li><a href="function-list_getMembergroups.html">list_getMembergroups</a></li>
				<li><a href="function-list_getMembers.html">list_getMembers</a></li>
				<li><a href="function-list_getMessageIcons.html">list_getMessageIcons</a></li>
				<li><a href="function-list_getModLogEntries.html">list_getModLogEntries</a></li>
				<li><a href="function-list_getModLogEntryCount.html">list_getModLogEntryCount</a></li>
				<li><a href="function-list_getNews.html">list_getNews</a></li>
				<li><a href="function-list_getNumAttachments.html">list_getNumAttachments</a></li>
				<li><a href="function-list_getNumBanItems.html">list_getNumBanItems</a></li>
				<li><a href="function-list_getNumBanLogEntries.html">list_getNumBanLogEntries</a></li>
				<li><a href="function-list_getNumBans.html">list_getNumBans</a></li>
				<li><a href="function-list_getNumBanTriggers.html">list_getNumBanTriggers</a></li>
				<li><a href="function-list_getNumFiles.html">list_getNumFiles</a></li>
				<li><a href="function-list_getNumHolidays.html">list_getNumHolidays</a></li>
				<li><a href="function-list_getNumLanguages.html">list_getNumLanguages</a></li>
				<li><a href="function-list_getNumMembers.html">list_getNumMembers</a></li>
				<li><a href="function-list_getNumSmileys.html">list_getNumSmileys</a></li>
				<li><a href="function-list_getNumSmileySets.html">list_getNumSmileySets</a></li>
				<li><a href="function-list_getNumSpiderLogs.html">list_getNumSpiderLogs</a></li>
				<li><a href="function-list_getNumSpiders.html">list_getNumSpiders</a></li>
				<li><a href="function-list_getNumSpiderStats.html">list_getNumSpiderStats</a></li>
				<li><a href="function-list_getNumTaskLogEntries.html">list_getNumTaskLogEntries</a></li>
				<li><a href="function-list_getNumUnapprovedAttachments.html">list_getNumUnapprovedAttachments</a></li>
				<li><a href="function-list_getNumUnwatched.html">list_getNumUnwatched</a></li>
				<li><a href="function-list_getPackages.html">list_getPackages</a></li>
				<li><a href="function-list_getProfileEditCount.html">list_getProfileEditCount</a></li>
				<li><a href="function-list_getProfileEdits.html">list_getProfileEdits</a></li>
				<li><a href="function-list_getProfileFields.html">list_getProfileFields</a></li>
				<li><a href="function-list_getProfileFieldSize.html">list_getProfileFieldSize</a></li>
				<li><a href="function-list_getScheduledTasks.html">list_getScheduledTasks</a></li>
				<li><a href="function-list_getSmileys.html">list_getSmileys</a></li>
				<li><a href="function-list_getSmileySets.html">list_getSmileySets</a></li>
				<li><a href="function-list_getSpiderLogs.html">list_getSpiderLogs</a></li>
				<li><a href="function-list_getSpiders.html">list_getSpiders</a></li>
				<li><a href="function-list_getSpiderStats.html">list_getSpiderStats</a></li>
				<li><a href="function-list_getSubscribedUserCount.html">list_getSubscribedUserCount</a></li>
				<li><a href="function-list_getSubscribedUsers.html">list_getSubscribedUsers</a></li>
				<li><a href="function-list_getTaskLogEntries.html">list_getTaskLogEntries</a></li>
				<li><a href="function-list_getTopicNotificationCount.html">list_getTopicNotificationCount</a></li>
				<li><a href="function-list_getTopicNotifications.html">list_getTopicNotifications</a></li>
				<li><a href="function-list_getUnapprovedAttachments.html">list_getUnapprovedAttachments</a></li>
				<li><a href="function-list_getUnwatched.html">list_getUnwatched</a></li>
				<li><a href="function-list_getUserErrorCount.html">list_getUserErrorCount</a></li>
				<li><a href="function-list_getUserErrors.html">list_getUserErrors</a></li>
				<li><a href="function-list_getUserWarningCount.html">list_getUserWarningCount</a></li>
				<li><a href="function-list_getUserWarnings.html">list_getUserWarnings</a></li>
				<li><a href="function-list_getWarningCount.html">list_getWarningCount</a></li>
				<li><a href="function-list_getWarnings.html">list_getWarnings</a></li>
				<li><a href="function-list_getWarningTemplateCount.html">list_getWarningTemplateCount</a></li>
				<li><a href="function-list_getWarningTemplates.html">list_getWarningTemplates</a></li>
				<li><a href="function-list_getWatchedUserCount.html">list_getWatchedUserCount</a></li>
				<li><a href="function-list_getWatchedUserPosts.html">list_getWatchedUserPosts</a></li>
				<li><a href="function-list_getWatchedUserPostsCount.html">list_getWatchedUserPostsCount</a></li>
				<li><a href="function-list_getWatchedUsers.html">list_getWatchedUsers</a></li>
				<li><a href="function-list_integration_hooks.html">list_integration_hooks</a></li>
				<li><a href="function-listMembergroupMembers_Href.html">listMembergroupMembers_Href</a></li>
				<li><a href="function-ListMessageIcons.html">ListMessageIcons</a></li>
				<li><a href="function-listtree.html">listtree</a></li>
				<li><a href="function-load_database.html">load_database</a></li>
				<li><a href="function-load_file.html">load_file</a></li>
				<li><a href="function-load_lang_file.html" class="invalid">load_lang_file</a></li>
				<li><a href="function-loadAttachmentContext.html">loadAttachmentContext</a></li>
				<li><a href="function-loadBoard.html">loadBoard</a></li>
				<li><a href="function-loadCacheAccelerator.html">loadCacheAccelerator</a></li>
				<li><a href="function-loadCacheAPIs.html">loadCacheAPIs</a></li>
				<li><a href="function-loadCSSFile.html">loadCSSFile</a></li>
				<li><a href="function-loadCustomFields.html">loadCustomFields</a></li>
				<li><a href="function-loadDatabase.html">loadDatabase</a></li>
				<li><a href="function-loadDatePair.html">loadDatePair</a></li>
				<li><a href="function-loadDatePicker.html">loadDatePicker</a></li>
				<li><a href="function-loadEmailTemplate.html">loadEmailTemplate</a></li>
				<li><a href="function-loadEssentialData.html">loadEssentialData</a></li>
				<li><a href="function-loadEssentialThemeData.html">loadEssentialThemeData</a></li>
				<li><a href="function-loadForumTests.html">loadForumTests</a></li>
				<li><a href="function-loadGeneralSettingParameters.html">loadGeneralSettingParameters</a></li>
				<li><a href="function-loadIllegalBBCHtmlGroups.html">loadIllegalBBCHtmlGroups</a></li>
				<li><a href="function-loadIllegalGuestPermissions.html">loadIllegalGuestPermissions</a></li>
				<li><a href="function-loadIllegalPermissions.html">loadIllegalPermissions</a></li>
				<li><a href="function-loadInstalledPackages.html">loadInstalledPackages</a></li>
				<li><a href="function-loadJavaScriptFile.html">loadJavaScriptFile</a></li>
				<li><a href="function-loadLanguage.html">loadLanguage</a></li>
				<li><a href="function-loadLocale.html">loadLocale</a></li>
				<li><a href="function-loadMemberContext.html">loadMemberContext</a></li>
				<li><a href="function-loadMemberCustomFields.html">loadMemberCustomFields</a></li>
				<li><a href="function-loadMemberData.html">loadMemberData</a></li>
				<li><a href="function-loadPaymentGateways.html">loadPaymentGateways</a></li>
				<li><a href="function-loadPermissionProfiles.html">loadPermissionProfiles</a></li>
				<li><a href="function-loadPermissions.html">loadPermissions</a></li>
				<li><a href="function-loadProfileFields.html">loadProfileFields</a></li>
				<li><a href="function-LoadRules.html">LoadRules</a></li>
				<li><a href="function-loadSearchAPIs.html">loadSearchAPIs</a></li>
				<li><a href="function-loadSession.html">loadSession</a></li>
				<li><a href="function-loadSubscriptions.html">loadSubscriptions</a></li>
				<li><a href="function-loadSubTemplate.html">loadSubTemplate</a></li>
				<li><a href="function-loadTemplate.html">loadTemplate</a></li>
				<li><a href="function-loadTheme.html">loadTheme</a></li>
				<li><a href="function-loadThemeOptions.html">loadThemeOptions</a></li>
				<li><a href="function-loadTimePicker.html">loadTimePicker</a></li>
				<li><a href="function-loadUserSettings.html">loadUserSettings</a></li>
				<li><a href="function-LockTopic.html">LockTopic</a></li>
				<li><a href="function-LockVoting.html">LockVoting</a></li>
				<li><a href="function-log_ban.html">log_ban</a></li>
				<li><a href="function-log_error.html">log_error</a></li>
				<li><a href="function-log_error_online.html">log_error_online</a></li>
				<li><a href="function-logAction.html">logAction</a></li>
				<li><a href="function-logActions.html">logActions</a></li>
				<li><a href="function-Login.html">Login</a></li>
				<li><a href="function-Login2.html">Login2</a></li>
				<li><a href="function-LoginTFA.html">LoginTFA</a></li>
				<li><a href="function-logLastDatabaseError.html">logLastDatabaseError</a></li>
				<li><a href="function-Logout.html">Logout</a></li>
				<li><a href="function-logSpider.html">logSpider</a></li>
				<li><a href="function-logTriggersUpdates.html">logTriggersUpdates</a></li>
				<li><a href="function-MaintainCleanCache.html">MaintainCleanCache</a></li>
				<li><a href="function-MaintainDatabase.html">MaintainDatabase</a></li>
				<li><a href="function-MaintainEmptyUnimportantLogs.html">MaintainEmptyUnimportantLogs</a></li>
				<li><a href="function-MaintainFiles.html">MaintainFiles</a></li>
				<li><a href="function-MaintainFindFixErrors.html">MaintainFindFixErrors</a></li>
				<li><a href="function-MaintainMassMoveTopics.html">MaintainMassMoveTopics</a></li>
				<li><a href="function-MaintainMembers.html">MaintainMembers</a></li>
				<li><a href="function-MaintainPurgeInactiveMembers.html">MaintainPurgeInactiveMembers</a></li>
				<li><a href="function-MaintainReattributePosts.html">MaintainReattributePosts</a></li>
				<li><a href="function-MaintainRecountPosts.html">MaintainRecountPosts</a></li>
				<li><a href="function-MaintainRemoveOldDrafts.html">MaintainRemoveOldDrafts</a></li>
				<li><a href="function-MaintainRemoveOldPosts.html">MaintainRemoveOldPosts</a></li>
				<li><a href="function-MaintainRoutine.html">MaintainRoutine</a></li>
				<li><a href="function-MaintainTopics.html">MaintainTopics</a></li>
				<li><a href="function-makeCustomFieldChanges.html">makeCustomFieldChanges</a></li>
				<li><a href="function-makeFilesWritable.html">makeFilesWritable</a></li>
				<li><a href="function-makeNotificationChanges.html">makeNotificationChanges</a></li>
				<li><a href="function-makeThemeChanges.html">makeThemeChanges</a></li>
				<li><a href="function-ManageAttachmentPaths.html">ManageAttachmentPaths</a></li>
				<li><a href="function-ManageAttachments.html">ManageAttachments</a></li>
				<li><a href="function-ManageAttachmentSettings.html">ManageAttachmentSettings</a></li>
				<li><a href="function-ManageAvatarSettings.html">ManageAvatarSettings</a></li>
				<li><a href="function-ManageBoards.html">ManageBoards</a></li>
				<li><a href="function-ManageBoardsMain.html">ManageBoardsMain</a></li>
				<li><a href="function-ManageCalendar.html">ManageCalendar</a></li>
				<li><a href="function-ManageLabels.html">ManageLabels</a></li>
				<li><a href="function-ManageLanguages.html">ManageLanguages</a></li>
				<li><a href="function-ManageMail.html">ManageMail</a></li>
				<li><a href="function-ManageMaintenance.html">ManageMaintenance</a></li>
				<li><a href="function-ManageNews.html">ManageNews</a></li>
				<li><a href="function-ManagePaidSubscriptions.html">ManagePaidSubscriptions</a></li>
				<li><a href="function-ManagePostSettings.html">ManagePostSettings</a></li>
				<li><a href="function-ManageRules.html">ManageRules</a></li>
				<li><a href="function-ManageScheduledTasks.html">ManageScheduledTasks</a></li>
				<li><a href="function-ManageSearch.html">ManageSearch</a></li>
				<li><a href="function-ManageSearchEngineSettings.html">ManageSearchEngineSettings</a></li>
				<li><a href="function-ManageSmileys.html">ManageSmileys</a></li>
				<li><a href="function-markBoardsRead.html">markBoardsRead</a></li>
				<li><a href="function-markMessages.html">markMessages</a></li>
				<li><a href="function-MarkRead.html">MarkRead</a></li>
				<li><a href="function-matchHighestPackageVersion.html">matchHighestPackageVersion</a></li>
				<li><a href="function-matchIPtoCIDR.html">matchIPtoCIDR</a></li>
				<li><a href="function-matchPackageVersion.html">matchPackageVersion</a></li>
				<li><a href="function-md5_hmac.html">md5_hmac</a></li>
				<li><a href="function-MembergroupIndex.html">MembergroupIndex</a></li>
				<li><a href="function-MembergroupMembers.html">MembergroupMembers</a></li>
				<li><a href="function-MemberGroupsReport.html">MemberGroupsReport</a></li>
				<li><a href="function-Memberlist.html">Memberlist</a></li>
				<li><a href="function-membersAllowedTo.html">membersAllowedTo</a></li>
				<li><a href="function-MembersAwaitingActivation.html">MembersAwaitingActivation</a></li>
				<li><a href="function-memoryReturnBytes.html">memoryReturnBytes</a></li>
				<li><a href="function-MergeDone.html">MergeDone</a></li>
				<li><a href="function-MergeExecute.html">MergeExecute</a></li>
				<li><a href="function-MergeIndex.html">MergeIndex</a></li>
				<li><a href="function-mergePosts.html">mergePosts</a></li>
				<li><a href="function-MergeTopics.html">MergeTopics</a></li>
				<li><a href="function-MessageActionsApply.html">MessageActionsApply</a></li>
				<li><a href="function-MessageDrafts.html">MessageDrafts</a></li>
				<li><a href="function-MessageFolder.html">MessageFolder</a></li>
				<li><a href="function-MessageIndex.html">MessageIndex</a></li>
				<li><a href="function-messageIndexBar.html">messageIndexBar</a></li>
				<li><a href="function-MessageKillAll.html">MessageKillAll</a></li>
				<li><a href="function-MessageMain.html">MessageMain</a></li>
				<li><a href="function-MessagePopup.html">MessagePopup</a></li>
				<li><a href="function-MessagePost.html">MessagePost</a></li>
				<li><a href="function-MessagePost2.html">MessagePost2</a></li>
				<li><a href="function-messagePostError.html">messagePostError</a></li>
				<li><a href="function-MessagePrune.html">MessagePrune</a></li>
				<li><a href="function-MessageSearch.html">MessageSearch</a></li>
				<li><a href="function-MessageSearch2.html">MessageSearch2</a></li>
				<li><a href="function-MessageSettings.html">MessageSettings</a></li>
				<li><a href="function-mimespecialchars.html">mimespecialchars</a></li>
				<li><a href="function-mktree.html">mktree</a></li>
				<li><a href="function-MLAll.html">MLAll</a></li>
				<li><a href="function-MLSearch.html">MLSearch</a></li>
				<li><a href="function-ModBlockGroupRequests.html">ModBlockGroupRequests</a></li>
				<li><a href="function-ModBlockNotes.html">ModBlockNotes</a></li>
				<li><a href="function-ModBlockReportedMembers.html">ModBlockReportedMembers</a></li>
				<li><a href="function-ModBlockReportedPosts.html">ModBlockReportedPosts</a></li>
				<li><a href="function-ModBlockWatchedUsers.html">ModBlockWatchedUsers</a></li>
				<li><a href="function-ModEndSession.html">ModEndSession</a></li>
				<li><a href="function-ModerateGroups.html">ModerateGroups</a></li>
				<li><a href="function-ModerationHome.html">ModerationHome</a></li>
				<li><a href="function-ModerationMain.html">ModerationMain</a></li>
				<li><a href="function-ModerationSettings.html">ModerationSettings</a></li>
				<li><a href="function-ModifyAlertsSettings.html">ModifyAlertsSettings</a></li>
				<li><a href="function-ModifyAntispamSettings.html">ModifyAntispamSettings</a></li>
				<li><a href="function-ModifyBasicSettings.html">ModifyBasicSettings</a></li>
				<li><a href="function-ModifyBBCSettings.html">ModifyBBCSettings</a></li>
				<li><a href="function-modifyBoard.html">modifyBoard</a></li>
				<li><a href="function-ModifyCacheSettings.html">ModifyCacheSettings</a></li>
				<li><a href="function-ModifyCalendarSettings.html">ModifyCalendarSettings</a></li>
				<li><a href="function-ModifyCat.html">ModifyCat</a></li>
				<li><a href="function-modifyCategory.html">modifyCategory</a></li>
				<li><a href="function-ModifyCookieSettings.html">ModifyCookieSettings</a></li>
				<li><a href="function-ModifyDatabaseSettings.html">ModifyDatabaseSettings</a></li>
				<li><a href="function-ModifyDraftSettings.html">ModifyDraftSettings</a></li>
				<li><a href="function-modifyEvent.html">modifyEvent</a></li>
				<li><a href="function-ModifyFeatureSettings.html">ModifyFeatureSettings</a></li>
				<li><a href="function-ModifyGeneralModSettings.html">ModifyGeneralModSettings</a></li>
				<li><a href="function-ModifyGeneralSecuritySettings.html">ModifyGeneralSecuritySettings</a></li>
				<li><a href="function-ModifyGeneralSettings.html">ModifyGeneralSettings</a></li>
				<li><a href="function-ModifyHolidays.html">ModifyHolidays</a></li>
				<li><a href="function-ModifyLanguage.html">ModifyLanguage</a></li>
				<li><a href="function-ModifyLanguages.html">ModifyLanguages</a></li>
				<li><a href="function-ModifyLanguageSettings.html">ModifyLanguageSettings</a></li>
				<li><a href="function-ModifyLayoutSettings.html">ModifyLayoutSettings</a></li>
				<li><a href="function-ModifyLikesSettings.html">ModifyLikesSettings</a></li>
				<li><a href="function-ModifyLoadBalancingSettings.html">ModifyLoadBalancingSettings</a></li>
				<li><a href="function-ModifyLogSettings.html">ModifyLogSettings</a></li>
				<li><a href="function-ModifyMailSettings.html">ModifyMailSettings</a></li>
				<li><a href="function-ModifyMembergroup.html">ModifyMembergroup</a></li>
				<li><a href="function-ModifyMembergroup2.html">ModifyMembergroup2</a></li>
				<li><a href="function-ModifyMembergroups.html">ModifyMembergroups</a></li>
				<li><a href="function-ModifyMembergroupsettings.html">ModifyMembergroupsettings</a></li>
				<li><a href="function-ModifyMentionsSettings.html">ModifyMentionsSettings</a></li>
				<li><a href="function-ModifyModSettings.html">ModifyModSettings</a></li>
				<li><a href="function-ModifyNewsSettings.html">ModifyNewsSettings</a></li>
				<li><a href="function-ModifyPermissions.html">ModifyPermissions</a></li>
				<li><a href="function-modifyPost.html">modifyPost</a></li>
				<li><a href="function-ModifyPostModeration.html">ModifyPostModeration</a></li>
				<li><a href="function-ModifyPostSettings.html">ModifyPostSettings</a></li>
				<li><a href="function-ModifyProfile.html">ModifyProfile</a></li>
				<li><a href="function-ModifyRegistrationSettings.html">ModifyRegistrationSettings</a></li>
				<li><a href="function-ModifySettings.html">ModifySettings</a></li>
				<li><a href="function-ModifySignatureSettings.html">ModifySignatureSettings</a></li>
				<li><a href="function-ModifySubscription.html">ModifySubscription</a></li>
				<li><a href="function-ModifySubscriptionSettings.html">ModifySubscriptionSettings</a></li>
				<li><a href="function-ModifyTopicSettings.html">ModifyTopicSettings</a></li>
				<li><a href="function-ModifyUserSubscription.html">ModifyUserSubscription</a></li>
				<li><a href="function-ModifyWarningSettings.html">ModifyWarningSettings</a></li>
				<li><a href="function-ModifyWarningTemplate.html">ModifyWarningTemplate</a></li>
				<li><a href="function-MoveTopic.html">MoveTopic</a></li>
				<li><a href="function-MoveTopic2.html">MoveTopic2</a></li>
				<li><a href="function-moveTopicConcurrence.html">moveTopicConcurrence</a></li>
				<li><a href="function-moveTopics.html">moveTopics</a></li>
				<li><a href="function-MySQLConvertOldIp.html">MySQLConvertOldIp</a></li>
				<li><a href="function-newsletterpreview.html">newsletterpreview</a></li>
				<li><a href="function-newspreview.html">newspreview</a></li>
				<li><a href="function-newTable.html">newTable</a></li>
				<li><a href="function-next_time.html">next_time</a></li>
				<li><a href="function-nextSubstep.html">nextSubstep</a></li>
				<li><a href="function-notification.html">notification</a></li>
				<li><a href="function-ob_sessrewrite.html">ob_sessrewrite</a></li>
				<li><a href="function-obExit.html">obExit</a></li>
				<li><a href="function-obExit_cron.html">obExit_cron</a></li>
				<li><a href="function-OptimizeTables.html">OptimizeTables</a></li>
				<li><a href="function-package_chmod.html">package_chmod</a></li>
				<li><a href="function-package_create_backup.html">package_create_backup</a></li>
				<li><a href="function-package_crypt.html">package_crypt</a></li>
				<li><a href="function-package_flush_cache.html">package_flush_cache</a></li>
				<li><a href="function-package_get_contents.html">package_get_contents</a></li>
				<li><a href="function-package_put_contents.html">package_put_contents</a></li>
				<li><a href="function-PackageBrowse.html">PackageBrowse</a></li>
				<li><a href="function-PackageDownload.html">PackageDownload</a></li>
				<li><a href="function-PackageFTPTest.html">PackageFTPTest</a></li>
				<li><a href="function-PackageGBrowse.html">PackageGBrowse</a></li>
				<li><a href="function-PackageGet.html">PackageGet</a></li>
				<li><a href="function-PackageInstall.html">PackageInstall</a></li>
				<li><a href="function-PackageInstallTest.html">PackageInstallTest</a></li>
				<li><a href="function-PackageList.html">PackageList</a></li>
				<li><a href="function-PackageOptions.html">PackageOptions</a></li>
				<li><a href="function-PackagePermissions.html">PackagePermissions</a></li>
				<li><a href="function-PackagePermissionsAction.html">PackagePermissionsAction</a></li>
				<li><a href="function-PackageRemove.html">PackageRemove</a></li>
				<li><a href="function-packageRequireFTP.html">packageRequireFTP</a></li>
				<li><a href="function-Packages.html">Packages</a></li>
				<li><a href="function-PackageServerAdd.html">PackageServerAdd</a></li>
				<li><a href="function-PackageServerRemove.html">PackageServerRemove</a></li>
				<li><a href="function-PackageServers.html">PackageServers</a></li>
				<li><a href="function-PackageUpload.html">PackageUpload</a></li>
				<li><a href="function-parse_bbc.html">parse_bbc</a></li>
				<li><a href="function-parse_path.html">parse_path</a></li>
				<li><a href="function-parse_sql.html">parse_sql</a></li>
				<li><a href="function-parseAttachBBC.html">parseAttachBBC</a></li>
				<li><a href="function-parseBoardMod.html">parseBoardMod</a></li>
				<li><a href="function-parseModification.html">parseModification</a></li>
				<li><a href="function-parsePackageInfo.html">parsePackageInfo</a></li>
				<li><a href="function-parsesmileys.html">parsesmileys</a></li>
				<li><a href="function-password_get_info.html">password_get_info</a></li>
				<li><a href="function-password_hash.html">password_hash</a></li>
				<li><a href="function-password_needs_rehash.html">password_needs_rehash</a></li>
				<li><a href="function-password_verify.html">password_verify</a></li>
				<li><a href="function-pauseAttachmentMaintenance.html">pauseAttachmentMaintenance</a></li>
				<li><a href="function-pauseMailQueueClear.html">pauseMailQueueClear</a></li>
				<li><a href="function-pauseRepairProcess.html">pauseRepairProcess</a></li>
				<li><a href="function-pauseSignatureApplySettings.html">pauseSignatureApplySettings</a></li>
				<li><a href="function-perform_task.html">perform_task</a></li>
				<li><a href="function-PermissionByBoard.html">PermissionByBoard</a></li>
				<li><a href="function-PermissionIndex.html">PermissionIndex</a></li>
				<li><a href="function-permute.html" class="deprecated">permute</a></li>
				<li><a href="function-php_version_check.html">php_version_check</a></li>
				<li><a href="function-phpBB3_password_check.html">phpBB3_password_check</a></li>
				<li><a href="function-PickTheme.html">PickTheme</a></li>
				<li><a href="function-PlushSearch1.html">PlushSearch1</a></li>
				<li><a href="function-PlushSearch2.html">PlushSearch2</a></li>
				<li><a href="function-populateDuplicateMembers.html">populateDuplicateMembers</a></li>
				<li><a href="function-Post.html">Post</a></li>
				<li><a href="function-Post2.html">Post2</a></li>
				<li><a href="function-PostModerationMain.html">PostModerationMain</a></li>
				<li><a href="function-prepareAttachsByMsg.html">prepareAttachsByMsg</a></li>
				<li><a href="function-prepareCLIhandler.html">prepareCLIhandler</a></li>
				<li><a href="function-prepareDBSettingContext.html">prepareDBSettingContext</a></li>
				<li><a href="function-prepareDisplayContext.html">prepareDisplayContext</a></li>
				<li><a href="function-prepareLikesContext.html">prepareLikesContext</a></li>
				<li><a href="function-prepareMailingForPreview.html">prepareMailingForPreview</a></li>
				<li><a href="function-prepareMessageContext.html">prepareMessageContext</a></li>
				<li><a href="function-prepareSearchContext.html">prepareSearchContext</a></li>
				<li><a href="function-prepareServerSettingsContext.html">prepareServerSettingsContext</a></li>
				<li><a href="function-preparsecode.html">preparsecode</a></li>
				<li><a href="function-print_error.html">print_error</a></li>
				<li><a href="function-printMemberListRows.html">printMemberListRows</a></li>
				<li><a href="function-PrintTopic.html">PrintTopic</a></li>
				<li><a href="function-processAttachments.html">processAttachments</a></li>
				<li><a href="function-profile_popup.html">profile_popup</a></li>
				<li><a href="function-profileLoadAvatarData.html">profileLoadAvatarData</a></li>
				<li><a href="function-profileLoadGroups.html">profileLoadGroups</a></li>
				<li><a href="function-profileLoadLanguages.html">profileLoadLanguages</a></li>
				<li><a href="function-profileLoadSignatureData.html">profileLoadSignatureData</a></li>
				<li><a href="function-profileReloadUser.html">profileReloadUser</a></li>
				<li><a href="function-profileSaveAvatarData.html">profileSaveAvatarData</a></li>
				<li><a href="function-profileSaveGroups.html">profileSaveGroups</a></li>
				<li><a href="function-profileSendActivation.html">profileSendActivation</a></li>
				<li><a href="function-profileValidateEmail.html">profileValidateEmail</a></li>
				<li><a href="function-profileValidateSignature.html">profileValidateSignature</a></li>
				<li><a href="function-protected_alter.html">protected_alter</a></li>
				<li><a href="function-quickFileWritable.html">quickFileWritable</a></li>
				<li><a href="function-QuickInTopicModeration.html">QuickInTopicModeration</a></li>
				<li><a href="function-QuickModeration.html">QuickModeration</a></li>
				<li><a href="function-QuoteFast.html">QuoteFast</a></li>
				<li><a href="function-random_bytes.html" class="invalid">random_bytes</a></li>
				<li><a href="function-random_int.html">random_int</a></li>
				<li><a href="function-RandomCompat_intval.html">RandomCompat_intval</a></li>
				<li><a href="function-RandomCompat_strlen.html" class="invalid">RandomCompat_strlen</a></li>
				<li><a href="function-RandomCompat_substr.html" class="invalid">RandomCompat_substr</a></li>
				<li><a href="function-range2ip.html">range2ip</a></li>
				<li><a href="function-read_tgz_data.html">read_tgz_data</a></li>
				<li><a href="function-read_tgz_file.html">read_tgz_file</a></li>
				<li><a href="function-read_zip_data.html">read_zip_data</a></li>
				<li><a href="function-read_zip_file.html">read_zip_file</a></li>
				<li><a href="function-ReadDraft.html">ReadDraft</a></li>
				<li><a href="function-reapplySubscriptions.html">reapplySubscriptions</a></li>
				<li><a href="function-reattributePosts.html">reattributePosts</a></li>
				<li><a href="function-rebuildModCache.html">rebuildModCache</a></li>
				<li><a href="function-recacheSpiderNames.html">recacheSpiderNames</a></li>
				<li><a href="function-RecentPosts.html">RecentPosts</a></li>
				<li><a href="function-recountOpenReports.html">recountOpenReports</a></li>
				<li><a href="function-recursiveBoards.html">recursiveBoards</a></li>
				<li><a href="function-redirectexit.html">redirectexit</a></li>
				<li><a href="function-redirectLocation.html">redirectLocation</a></li>
				<li><a href="function-ReduceMailQueue.html">ReduceMailQueue</a></li>
				<li><a href="function-reencodeImage.html">reencodeImage</a></li>
				<li><a href="function-RegCenter.html">RegCenter</a></li>
				<li><a href="function-Register.html">Register</a></li>
				<li><a href="function-Register2.html">Register2</a></li>
				<li><a href="function-RegisterCheckUsername.html">RegisterCheckUsername</a></li>
				<li><a href="function-registerMember.html">registerMember</a></li>
				<li><a href="function-registerSMStats.html">registerSMStats</a></li>
				<li><a href="function-reloadSettings.html">reloadSettings</a></li>
				<li><a href="function-RemindMe.html">RemindMe</a></li>
				<li><a href="function-RemindPick.html">RemindPick</a></li>
				<li><a href="function-remove_dir.html">remove_dir</a></li>
				<li><a href="function-remove_integration_function.html">remove_integration_function</a></li>
				<li><a href="function-remove_theme.html">remove_theme</a></li>
				<li><a href="function-RemoveAllAttachments.html">RemoveAllAttachments</a></li>
				<li><a href="function-RemoveAttachment.html">RemoveAttachment</a></li>
				<li><a href="function-RemoveAttachmentByAge.html">RemoveAttachmentByAge</a></li>
				<li><a href="function-RemoveAttachmentBySize.html">RemoveAttachmentBySize</a></li>
				<li><a href="function-removeBanGroups.html">removeBanGroups</a></li>
				<li><a href="function-removeBanLogs.html">removeBanLogs</a></li>
				<li><a href="function-removeBanTriggers.html">removeBanTriggers</a></li>
				<li><a href="function-removeDeleteConcurrence.html">removeDeleteConcurrence</a></li>
				<li><a href="function-removeEvent.html">removeEvent</a></li>
				<li><a href="function-removeHolidays.html">removeHolidays</a></li>
				<li><a href="function-removeIllegalBBCHtmlPermission.html">removeIllegalBBCHtmlPermission</a></li>
				<li><a href="function-removeMembersFromGroups.html">removeMembersFromGroups</a></li>
				<li><a href="function-removeMessage.html">removeMessage</a></li>
				<li><a href="function-removeMessages.html">removeMessages</a></li>
				<li><a href="function-RemoveOldTopics2.html">RemoveOldTopics2</a></li>
				<li><a href="function-RemovePoll.html">RemovePoll</a></li>
				<li><a href="function-removeSubscription.html">removeSubscription</a></li>
				<li><a href="function-RemoveTheme.html">RemoveTheme</a></li>
				<li><a href="function-RemoveTopic2.html">RemoveTopic2</a></li>
				<li><a href="function-removeTopics.html">removeTopics</a></li>
				<li><a href="function-reorderBoards.html">reorderBoards</a></li>
				<li><a href="function-RepairAttachments.html">RepairAttachments</a></li>
				<li><a href="function-RepairBoards.html">RepairBoards</a></li>
				<li><a href="function-replaceEntities__callback.html">replaceEntities__callback</a></li>
				<li><a href="function-ReportDetails.html">ReportDetails</a></li>
				<li><a href="function-ReportedContent.html">ReportedContent</a></li>
				<li><a href="function-ReportedMembers.html">ReportedMembers</a></li>
				<li><a href="function-ReportMessage.html">ReportMessage</a></li>
				<li><a href="function-reportPost.html">reportPost</a></li>
				<li><a href="function-ReportsMain.html">ReportsMain</a></li>
				<li><a href="function-ReportToModerator.html">ReportToModerator</a></li>
				<li><a href="function-ReportToModerator2.html">ReportToModerator2</a></li>
				<li><a href="function-reportUser.html">reportUser</a></li>
				<li><a href="function-RequestMembers.html">RequestMembers</a></li>
				<li><a href="function-resetPassword.html">resetPassword</a></li>
				<li><a href="function-resizeImage.html">resizeImage</a></li>
				<li><a href="function-resizeImageFile.html">resizeImageFile</a></li>
				<li><a href="function-RestoreTopic.html">RestoreTopic</a></li>
				<li><a href="function-RetrievePreview.html">RetrievePreview</a></li>
				<li><a href="function-safe_file_write.html">safe_file_write</a></li>
				<li><a href="function-safe_serialize.html">safe_serialize</a></li>
				<li><a href="function-safe_unserialize.html">safe_unserialize</a></li>
				<li><a href="function-sanitize_iri.html">sanitize_iri</a></li>
				<li><a href="function-sanitizeMSCutPaste.html">sanitizeMSCutPaste</a></li>
				<li><a href="function-saveDBSettings.html">saveDBSettings</a></li>
				<li><a href="function-SaveDraft.html">SaveDraft</a></li>
				<li><a href="function-saveModComment.html">saveModComment</a></li>
				<li><a href="function-SavePMDraft.html">SavePMDraft</a></li>
				<li><a href="function-saveProfileChanges.html">saveProfileChanges</a></li>
				<li><a href="function-saveProfileFields.html">saveProfileFields</a></li>
				<li><a href="function-saveSettings.html">saveSettings</a></li>
				<li><a href="function-saveTriggers.html">saveTriggers</a></li>
				<li><a href="function-scheduled_birthdayemails.html">scheduled_birthdayemails</a></li>
				<li><a href="function-scheduled_daily_digest.html">scheduled_daily_digest</a></li>
				<li><a href="function-scheduled_daily_maintenance.html">scheduled_daily_maintenance</a></li>
				<li><a href="function-scheduled_fetchSMfiles.html">scheduled_fetchSMfiles</a></li>
				<li><a href="function-scheduled_paid_subscriptions.html">scheduled_paid_subscriptions</a></li>
				<li><a href="function-scheduled_remove_old_drafts.html">scheduled_remove_old_drafts</a></li>
				<li><a href="function-scheduled_remove_temp_attachments.html">scheduled_remove_temp_attachments</a></li>
				<li><a href="function-scheduled_remove_topic_redirect.html">scheduled_remove_topic_redirect</a></li>
				<li><a href="function-scheduled_weekly_digest.html">scheduled_weekly_digest</a></li>
				<li><a href="function-scheduled_weekly_maintenance.html">scheduled_weekly_maintenance</a></li>
				<li><a href="function-ScheduledTasks.html">ScheduledTasks</a></li>
				<li><a href="function-SearchEngines.html">SearchEngines</a></li>
				<li><a href="function-SearchMembers.html">SearchMembers</a></li>
				<li><a href="function-searchSort.html">searchSort</a></li>
				<li><a href="function-SecretAnswer2.html">SecretAnswer2</a></li>
				<li><a href="function-SecretAnswerInput.html">SecretAnswerInput</a></li>
				<li><a href="function-secureDirectory.html">secureDirectory</a></li>
				<li><a href="function-SelectMailingMembers.html">SelectMailingMembers</a></li>
				<li><a href="function-send_http_status.html">send_http_status</a></li>
				<li><a href="function-SendActivation.html">SendActivation</a></li>
				<li><a href="function-sendmail.html">sendmail</a></li>
				<li><a href="function-SendMailing.html">SendMailing</a></li>
				<li><a href="function-sendNotifications.html">sendNotifications</a></li>
				<li><a href="function-sendpm.html">sendpm</a></li>
				<li><a href="function-sentence_list.html">sentence_list</a></li>
				<li><a href="function-serialize_to_json.html">serialize_to_json</a></li>
				<li><a href="function-sessionClose.html">sessionClose</a></li>
				<li><a href="function-sessionDestroy.html">sessionDestroy</a></li>
				<li><a href="function-sessionGC.html">sessionGC</a></li>
				<li><a href="function-sessionOpen.html">sessionOpen</a></li>
				<li><a href="function-sessionRead.html">sessionRead</a></li>
				<li><a href="function-sessionWrite.html">sessionWrite</a></li>
				<li><a href="function-set_alert_icon.html">set_alert_icon</a></li>
				<li><a href="function-set_avatar_data.html">set_avatar_data</a></li>
				<li><a href="function-set_fatal_error_headers.html">set_fatal_error_headers</a></li>
				<li><a href="function-set_tld_regex.html">set_tld_regex</a></li>
				<li><a href="function-SetCensor.html">SetCensor</a></li>
				<li><a href="function-setEventStartEnd.html">setEventStartEnd</a></li>
				<li><a href="function-SetJavaScript.html">SetJavaScript</a></li>
				<li><a href="function-setKeys.html">setKeys</a></li>
				<li><a href="function-setLoginCookie.html">setLoginCookie</a></li>
				<li><a href="function-setMemoryLimit.html">setMemoryLimit</a></li>
				<li><a href="function-setNotifyPrefs.html">setNotifyPrefs</a></li>
				<li><a href="function-setPassword.html">setPassword</a></li>
				<li><a href="function-setPassword2.html">setPassword2</a></li>
				<li><a href="function-SetQuickGroups.html">SetQuickGroups</a></li>
				<li><a href="function-SetReserved.html">SetReserved</a></li>
				<li><a href="function-setSqlMode.html">setSqlMode</a></li>
				<li><a href="function-setTFACookie.html">setTFACookie</a></li>
				<li><a href="function-SetThemeOptions.html">SetThemeOptions</a></li>
				<li><a href="function-SetThemeSettings.html">SetThemeSettings</a></li>
				<li><a href="function-setup_fatal_error_context.html">setup_fatal_error_context</a></li>
				<li><a href="function-setupMenuContext.html">setupMenuContext</a></li>
				<li><a href="function-setupProfileContext.html">setupProfileContext</a></li>
				<li><a href="function-setupThemeContext.html">setupThemeContext</a></li>
				<li><a href="function-sha1_core.html">sha1_core</a></li>
				<li><a href="function-sha1_ft.html">sha1_ft</a></li>
				<li><a href="function-sha1_kt.html">sha1_kt</a></li>
				<li><a href="function-sha1_raw.html">sha1_raw</a></li>
				<li><a href="function-sha1_rol.html">sha1_rol</a></li>
				<li><a href="function-sha1_smf.html">sha1_smf</a></li>
				<li><a href="function-shorten_subject.html">shorten_subject</a></li>
				<li><a href="function-ShowAdminHelp.html">ShowAdminHelp</a></li>
				<li><a href="function-showAlerts.html">showAlerts</a></li>
				<li><a href="function-showAttachment.html">showAttachment</a></li>
				<li><a href="function-showAttachments.html">showAttachments</a></li>
				<li><a href="function-ShowClosedReports.html">ShowClosedReports</a></li>
				<li><a href="function-showCodeImage.html">showCodeImage</a></li>
				<li><a href="function-ShowCustomProfiles.html">ShowCustomProfiles</a></li>
				<li><a href="function-ShowDrafts.html">ShowDrafts</a></li>
				<li><a href="function-ShowHelp.html">ShowHelp</a></li>
				<li><a href="function-showLetterImage.html">showLetterImage</a></li>
				<li><a href="function-ShowNotice.html">ShowNotice</a></li>
				<li><a href="function-showPermissions.html">showPermissions</a></li>
				<li><a href="function-ShowPHPinfoSettings.html">ShowPHPinfoSettings</a></li>
				<li><a href="function-showPMDrafts.html">showPMDrafts</a></li>
				<li><a href="function-showPosts.html">showPosts</a></li>
				<li><a href="function-showProfileDrafts.html">showProfileDrafts</a></li>
				<li><a href="function-ShowReports.html">ShowReports</a></li>
				<li><a href="function-showUnwatched.html">showUnwatched</a></li>
				<li><a href="function-ShowXmlFeed.html">ShowXmlFeed</a></li>
				<li><a href="function-sig_preview.html">sig_preview</a></li>
				<li><a href="function-smf_chmod.html">smf_chmod</a></li>
				<li><a href="function-smf_crc32.html" class="invalid">smf_crc32</a></li>
				<li><a href="function-smf_db_add_column.html" class="invalid">smf_db_add_column</a></li>
				<li><a href="function-smf_db_add_index.html" class="invalid">smf_db_add_index</a></li>
				<li><a href="function-smf_db_affected_rows.html" class="invalid">smf_db_affected_rows</a></li>
				<li><a href="function-smf_db_allow_persistent.html" class="invalid">smf_db_allow_persistent</a></li>
				<li><a href="function-smf_db_backup_table.html" class="invalid">smf_db_backup_table</a></li>
				<li><a href="function-smf_db_calculate_type.html" class="invalid">smf_db_calculate_type</a></li>
				<li><a href="function-smf_db_change_column.html" class="invalid">smf_db_change_column</a></li>
				<li><a href="function-smf_db_create_query_column.html">smf_db_create_query_column</a></li>
				<li><a href="function-smf_db_create_table.html" class="invalid">smf_db_create_table</a></li>
				<li><a href="function-smf_db_create_word_search.html" class="invalid">smf_db_create_word_search</a></li>
				<li><a href="function-smf_db_cte_support.html" class="invalid">smf_db_cte_support</a></li>
				<li><a href="function-smf_db_custom_order.html" class="invalid">smf_db_custom_order</a></li>
				<li><a href="function-smf_db_drop_table.html" class="invalid">smf_db_drop_table</a></li>
				<li><a href="function-smf_db_error.html" class="invalid">smf_db_error</a></li>
				<li><a href="function-smf_db_error_backtrace.html" class="invalid">smf_db_error_backtrace</a></li>
				<li><a href="function-smf_db_error_insert.html" class="invalid">smf_db_error_insert</a></li>
				<li><a href="function-smf_db_escape_string.html" class="invalid">smf_db_escape_string</a></li>
				<li><a href="function-smf_db_escape_wildcard_string.html" class="invalid">smf_db_escape_wildcard_string</a></li>
				<li><a href="function-smf_db_fetch_all.html" class="invalid">smf_db_fetch_all</a></li>
				<li><a href="function-smf_db_get_server_info.html">smf_db_get_server_info</a></li>
				<li><a href="function-smf_db_get_vendor.html" class="invalid">smf_db_get_vendor</a></li>
				<li><a href="function-smf_db_get_version.html" class="invalid">smf_db_get_version</a></li>
				<li><a href="function-smf_db_initiate.html" class="invalid">smf_db_initiate</a></li>
				<li><a href="function-smf_db_insert.html" class="invalid">smf_db_insert</a></li>
				<li><a href="function-smf_db_insert_id.html" class="invalid">smf_db_insert_id</a></li>
				<li><a href="function-smf_db_list_columns.html" class="invalid">smf_db_list_columns</a></li>
				<li><a href="function-smf_db_list_indexes.html" class="invalid">smf_db_list_indexes</a></li>
				<li><a href="function-smf_db_list_tables.html" class="invalid">smf_db_list_tables</a></li>
				<li><a href="function-smf_db_native_replace.html" class="invalid">smf_db_native_replace</a></li>
				<li><a href="function-smf_db_optimize_table.html" class="invalid">smf_db_optimize_table</a></li>
				<li><a href="function-smf_db_query.html" class="invalid">smf_db_query</a></li>
				<li><a href="function-smf_db_quote.html" class="invalid">smf_db_quote</a></li>
				<li><a href="function-smf_db_remove_column.html" class="invalid">smf_db_remove_column</a></li>
				<li><a href="function-smf_db_remove_index.html" class="invalid">smf_db_remove_index</a></li>
				<li><a href="function-smf_db_replacement__callback.html" class="invalid">smf_db_replacement__callback</a></li>
				<li><a href="function-smf_db_search_language.html">smf_db_search_language</a></li>
				<li><a href="function-smf_db_search_query.html">smf_db_search_query</a></li>
				<li><a href="function-smf_db_search_support.html" class="invalid">smf_db_search_support</a></li>
				<li><a href="function-smf_db_select.html">smf_db_select</a></li>
				<li><a href="function-smf_db_select_db.html">smf_db_select_db</a></li>
				<li><a href="function-smf_db_table_sql.html" class="invalid">smf_db_table_sql</a></li>
				<li><a href="function-smf_db_table_structure.html" class="invalid">smf_db_table_structure</a></li>
				<li><a href="function-smf_db_transaction.html" class="invalid">smf_db_transaction</a></li>
				<li><a href="function-smf_db_version.html">smf_db_version</a></li>
				<li><a href="function-smf_error_handler.html">smf_error_handler</a></li>
				<li><a href="function-smf_error_handler_cron.html">smf_error_handler_cron</a></li>
				<li><a href="function-smf_is_resource.html">smf_is_resource</a></li>
				<li><a href="function-smf_json_decode.html">smf_json_decode</a></li>
				<li><a href="function-smf_list_timezones.html">smf_list_timezones</a></li>
				<li><a href="function-smf_main.html">smf_main</a></li>
				<li><a href="function-smf_mysql_fetch_assoc.html">smf_mysql_fetch_assoc</a></li>
				<li><a href="function-smf_mysql_fetch_row.html">smf_mysql_fetch_row</a></li>
				<li><a href="function-smf_mysql_free_result.html">smf_mysql_free_result</a></li>
				<li><a href="function-smf_mysql_insert_id.html">smf_mysql_insert_id</a></li>
				<li><a href="function-smf_mysql_num_rows.html">smf_mysql_num_rows</a></li>
				<li><a href="function-smf_mysql_real_escape_string.html">smf_mysql_real_escape_string</a></li>
				<li><a href="function-smf_seed_generator.html">smf_seed_generator</a></li>
				<li><a href="function-smf_serverResponse.html">smf_serverResponse</a></li>
				<li><a href="function-smf_setcookie.html">smf_setcookie</a></li>
				<li><a href="function-smf_strtolower.html">smf_strtolower</a></li>
				<li><a href="function-smf_var_export.html">smf_var_export</a></li>
				<li><a href="function-SMStats.html">SMStats</a></li>
				<li><a href="function-sortBoards.html">sortBoards</a></li>
				<li><a href="function-sortCategories.html">sortCategories</a></li>
				<li><a href="function-spamProtection.html">spamProtection</a></li>
				<li><a href="function-spell_check.html">spell_check</a></li>
				<li><a href="function-spell_init.html">spell_init</a></li>
				<li><a href="function-spell_suggest.html">spell_suggest</a></li>
				<li><a href="function-SpellCheck.html">SpellCheck</a></li>
				<li><a href="function-SpiderCheck.html">SpiderCheck</a></li>
				<li><a href="function-SpiderLogs.html">SpiderLogs</a></li>
				<li><a href="function-SpiderStats.html">SpiderStats</a></li>
				<li><a href="function-SplitExecute.html">SplitExecute</a></li>
				<li><a href="function-SplitIndex.html">SplitIndex</a></li>
				<li><a href="function-SplitSelectionExecute.html">SplitSelectionExecute</a></li>
				<li><a href="function-SplitSelectTopics.html">SplitSelectTopics</a></li>
				<li><a href="function-splitTopic.html">splitTopic</a></li>
				<li><a href="function-SplitTopics.html">SplitTopics</a></li>
				<li><a href="function-ssi_boardNews.html">ssi_boardNews</a></li>
				<li><a href="function-ssi_boardStats.html">ssi_boardStats</a></li>
				<li><a href="function-ssi_checkPassword.html">ssi_checkPassword</a></li>
				<li><a href="function-ssi_copyright.html">ssi_copyright</a></li>
				<li><a href="function-ssi_fetchGroupMembers.html">ssi_fetchGroupMembers</a></li>
				<li><a href="function-ssi_fetchMember.html">ssi_fetchMember</a></li>
				<li><a href="function-ssi_fetchPosts.html">ssi_fetchPosts</a></li>
				<li><a href="function-ssi_full_version.html">ssi_full_version</a></li>
				<li><a href="function-ssi_latestMember.html">ssi_latestMember</a></li>
				<li><a href="function-ssi_login.html">ssi_login</a></li>
				<li><a href="function-ssi_logOnline.html">ssi_logOnline</a></li>
				<li><a href="function-ssi_logout.html">ssi_logout</a></li>
				<li><a href="function-ssi_menubar.html">ssi_menubar</a></li>
				<li><a href="function-ssi_news.html">ssi_news</a></li>
				<li><a href="function-ssi_pollVote.html">ssi_pollVote</a></li>
				<li><a href="function-ssi_queryMembers.html">ssi_queryMembers</a></li>
				<li><a href="function-ssi_queryPosts.html">ssi_queryPosts</a></li>
				<li><a href="function-ssi_quickSearch.html">ssi_quickSearch</a></li>
				<li><a href="function-ssi_randomMember.html">ssi_randomMember</a></li>
				<li><a href="function-ssi_recentAttachments.html">ssi_recentAttachments</a></li>
				<li><a href="function-ssi_recentEvents.html">ssi_recentEvents</a></li>
				<li><a href="function-ssi_recentPoll.html">ssi_recentPoll</a></li>
				<li><a href="function-ssi_recentPosts.html">ssi_recentPosts</a></li>
				<li><a href="function-ssi_recentTopics.html">ssi_recentTopics</a></li>
				<li><a href="function-ssi_showPoll.html">ssi_showPoll</a></li>
				<li><a href="function-ssi_shutdown.html">ssi_shutdown</a></li>
				<li><a href="function-ssi_software_year.html">ssi_software_year</a></li>
				<li><a href="function-ssi_todaysBirthdays.html">ssi_todaysBirthdays</a></li>
				<li><a href="function-ssi_todaysCalendar.html">ssi_todaysCalendar</a></li>
				<li><a href="function-ssi_todaysEvents.html">ssi_todaysEvents</a></li>
				<li><a href="function-ssi_todaysHolidays.html">ssi_todaysHolidays</a></li>
				<li><a href="function-ssi_topBoards.html">ssi_topBoards</a></li>
				<li><a href="function-ssi_topPoll.html">ssi_topPoll</a></li>
				<li><a href="function-ssi_topPoster.html">ssi_topPoster</a></li>
				<li><a href="function-ssi_topTopics.html">ssi_topTopics</a></li>
				<li><a href="function-ssi_topTopicsReplies.html">ssi_topTopicsReplies</a></li>
				<li><a href="function-ssi_topTopicsViews.html">ssi_topTopicsViews</a></li>
				<li><a href="function-ssi_version.html">ssi_version</a></li>
				<li><a href="function-ssi_welcome.html">ssi_welcome</a></li>
				<li><a href="function-ssi_whosOnline.html">ssi_whosOnline</a></li>
				<li><a href="function-ssl_cert_found.html">ssl_cert_found</a></li>
				<li><a href="function-StaffReport.html">StaffReport</a></li>
				<li><a href="function-statPanel.html">statPanel</a></li>
				<li><a href="function-Sticky.html">Sticky</a></li>
				<li><a href="function-strip_php_comments.html">strip_php_comments</a></li>
				<li><a href="function-stripslashes__recursive.html">stripslashes__recursive</a></li>
				<li><a href="function-subscriptions.html">subscriptions</a></li>
				<li><a href="function-summary.html">summary</a></li>
				<li><a href="function-TaskLog.html">TaskLog</a></li>
				<li><a href="function-TaskSettings.html">TaskSettings</a></li>
				<li><a href="function-template_action_permissions.html">template_action_permissions</a></li>
				<li><a href="function-template_add_edit_group_boards_list.html">template_add_edit_group_boards_list</a></li>
				<li><a href="function-template_add_language.html">template_add_language</a></li>
				<li><a href="function-template_add_rule.html">template_add_rule</a></li>
				<li><a href="function-template_additional_rows.html">template_additional_rows</a></li>
				<li><a href="function-template_addsmiley.html">template_addsmiley</a></li>
				<li><a href="function-template_admin.html">template_admin</a></li>
				<li><a href="function-template_admin_account.html">template_admin_account</a></li>
				<li><a href="function-template_admin_browse.html">template_admin_browse</a></li>
				<li><a href="function-template_admin_login.html">template_admin_login</a></li>
				<li><a href="function-template_admin_quick_search.html">template_admin_quick_search</a></li>
				<li><a href="function-template_admin_register.html">template_admin_register</a></li>
				<li><a href="function-template_admin_search_results.html">template_admin_search_results</a></li>
				<li><a href="function-template_after.html">template_after</a></li>
				<li><a href="function-template_alert_configuration.html">template_alert_configuration</a></li>
				<li><a href="function-template_alert_notifications_boards.html">template_alert_notifications_boards</a></li>
				<li><a href="function-template_alert_notifications_topics.html">template_alert_notifications_topics</a></li>
				<li><a href="function-template_alerts_all_read.html">template_alerts_all_read</a></li>
				<li><a href="function-template_alerts_popup.html">template_alerts_popup</a></li>
				<li><a href="function-template_announce.html">template_announce</a></li>
				<li><a href="function-template_announcement_send.html">template_announcement_send</a></li>
				<li><a href="function-template_ask.html" class="invalid">template_ask</a></li>
				<li><a href="function-template_ask_delete.html">template_ask_delete</a></li>
				<li><a href="function-template_attachment_errors.html">template_attachment_errors</a></li>
				<li><a href="function-template_attachment_paths.html">template_attachment_paths</a></li>
				<li><a href="function-template_attachment_repair.html">template_attachment_repair</a></li>
				<li><a href="function-template_avatar_settings_above.html">template_avatar_settings_above</a></li>
				<li><a href="function-template_avatar_settings_below.html">template_avatar_settings_below</a></li>
				<li><a href="function-template_backup_database.html">template_backup_database</a></li>
				<li><a href="function-template_backup_xml.html">template_backup_xml</a></li>
				<li><a href="function-template_ban_edit.html">template_ban_edit</a></li>
				<li><a href="function-template_ban_edit_trigger.html">template_ban_edit_trigger</a></li>
				<li><a href="function-template_bcd.html">template_bcd</a></li>
				<li><a href="function-template_bi_board_children.html" class="invalid">template_bi_board_children</a></li>
				<li><a href="function-template_bi_board_icon.html" class="invalid">template_bi_board_icon</a></li>
				<li><a href="function-template_bi_board_info.html" class="invalid">template_bi_board_info</a></li>
				<li><a href="function-template_bi_board_lastpost.html" class="invalid">template_bi_board_lastpost</a></li>
				<li><a href="function-template_bi_board_stats.html" class="invalid">template_bi_board_stats</a></li>
				<li><a href="function-template_bi_redirect_icon.html" class="invalid">template_bi_redirect_icon</a></li>
				<li><a href="function-template_bi_redirect_stats.html" class="invalid">template_bi_redirect_stats</a></li>
				<li><a href="function-template_boardindex_outer_above.html">template_boardindex_outer_above</a></li>
				<li><a href="function-template_boardindex_outer_below.html">template_boardindex_outer_below</a></li>
				<li><a href="function-template_body_above.html">template_body_above</a></li>
				<li><a href="function-template_body_below.html">template_body_below</a></li>
				<li><a href="function-template_browse.html" class="invalid">template_browse</a></li>
				<li><a href="function-template_button_strip.html" class="invalid">template_button_strip</a></li>
				<li><a href="function-template_by_board.html">template_by_board</a></li>
				<li><a href="function-template_calendar_top.html">template_calendar_top</a></li>
				<li><a href="function-template_callback_question_answer_list.html">template_callback_question_answer_list</a></li>
				<li><a href="function-template_check_username.html">template_check_username</a></li>
				<li><a href="function-template_chmod.html">template_chmod</a></li>
				<li><a href="function-template_chmod_files.html">template_chmod_files</a></li>
				<li><a href="function-template_choose_payment.html">template_choose_payment</a></li>
				<li><a href="function-template_clean_cache_button_above.html">template_clean_cache_button_above</a></li>
				<li><a href="function-template_clean_cache_button_below.html">template_clean_cache_button_below</a></li>
				<li><a href="function-template_confirm_board_delete.html">template_confirm_board_delete</a></li>
				<li><a href="function-template_confirm_category_delete.html">template_confirm_category_delete</a></li>
				<li><a href="function-template_control_chmod.html">template_control_chmod</a></li>
				<li><a href="function-template_control_richedit.html">template_control_richedit</a></li>
				<li><a href="function-template_control_richedit_buttons.html">template_control_richedit_buttons</a></li>
				<li><a href="function-template_control_verification.html">template_control_verification</a></li>
				<li><a href="function-template_convert_entities.html">template_convert_entities</a></li>
				<li><a href="function-template_convert_msgbody.html">template_convert_msgbody</a></li>
				<li><a href="function-template_convert_utf8.html">template_convert_utf8</a></li>
				<li><a href="function-template_convert_xml.html">template_convert_xml</a></li>
				<li><a href="function-template_coppa.html">template_coppa</a></li>
				<li><a href="function-template_coppa_form.html">template_coppa_form</a></li>
				<li><a href="function-template_copy_template.html">template_copy_template</a></li>
				<li><a href="function-template_create_index.html">template_create_index</a></li>
				<li><a href="function-template_create_index_done.html">template_create_index_done</a></li>
				<li><a href="function-template_create_index_progress.html">template_create_index_progress</a></li>
				<li><a href="function-template_create_list_menu.html">template_create_list_menu</a></li>
				<li><a href="function-template_credits.html" class="invalid">template_credits</a></li>
				<li><a href="function-template_css.html">template_css</a></li>
				<li><a href="function-template_database_changes.html">template_database_changes</a></li>
				<li><a href="function-template_database_settings.html">template_database_settings</a></li>
				<li><a href="function-template_database_xml.html">template_database_xml</a></li>
				<li><a href="function-template_delete_install.html">template_delete_install</a></li>
				<li><a href="function-template_delete_subscription.html">template_delete_subscription</a></li>
				<li><a href="function-template_deleteAccount.html">template_deleteAccount</a></li>
				<li><a href="function-template_download_language.html">template_download_language</a></li>
				<li><a href="function-template_downloaded.html">template_downloaded</a></li>
				<li><a href="function-template_edit_agreement.html">template_edit_agreement</a></li>
				<li><a href="function-template_edit_browse.html">template_edit_browse</a></li>
				<li><a href="function-template_edit_censored.html">template_edit_censored</a></li>
				<li><a href="function-template_edit_comment.html">template_edit_comment</a></li>
				<li><a href="function-template_edit_file.html">template_edit_file</a></li>
				<li><a href="function-template_edit_group.html">template_edit_group</a></li>
				<li><a href="function-template_edit_holiday.html">template_edit_holiday</a></li>
				<li><a href="function-template_edit_list.html">template_edit_list</a></li>
				<li><a href="function-template_edit_options.html">template_edit_options</a></li>
				<li><a href="function-template_edit_profile_field.html">template_edit_profile_field</a></li>
				<li><a href="function-template_edit_profiles.html">template_edit_profiles</a></li>
				<li><a href="function-template_edit_reserved_words.html">template_edit_reserved_words</a></li>
				<li><a href="function-template_edit_scheduled_tasks.html">template_edit_scheduled_tasks</a></li>
				<li><a href="function-template_edit_style.html">template_edit_style</a></li>
				<li><a href="function-template_edit_template.html">template_edit_template</a></li>
				<li><a href="function-template_editBuddies.html">template_editBuddies</a></li>
				<li><a href="function-template_editicon.html">template_editicon</a></li>
				<li><a href="function-template_editicons.html">template_editicons</a></li>
				<li><a href="function-template_editIgnoreList.html">template_editIgnoreList</a></li>
				<li><a href="function-template_editsets.html">template_editsets</a></li>
				<li><a href="function-template_email_members.html">template_email_members</a></li>
				<li><a href="function-template_email_members_compose.html">template_email_members_compose</a></li>
				<li><a href="function-template_email_members_send.html">template_email_members_send</a></li>
				<li><a href="function-template_error_log.html">template_error_log</a></li>
				<li><a href="function-template_error_message.html" class="invalid">template_error_message</a></li>
				<li><a href="function-template_event_post.html">template_event_post</a></li>
				<li><a href="function-template_examine.html">template_examine</a></li>
				<li><a href="function-template_extract_package.html">template_extract_package</a></li>
				<li><a href="function-template_fatal_error.html">template_fatal_error</a></li>
				<li><a href="function-template_file_permissions.html">template_file_permissions</a></li>
				<li><a href="function-template_find_members.html">template_find_members</a></li>
				<li><a href="function-template_folder.html">template_folder</a></li>
				<li><a href="function-template_footer.html">template_footer</a></li>
				<li><a href="function-template_forum_settings.html">template_forum_settings</a></li>
				<li><a href="function-template_ftp_required.html">template_ftp_required</a></li>
				<li><a href="function-template_generic.html">template_generic</a></li>
				<li><a href="function-template_generic_menu.html">template_generic_menu</a></li>
				<li><a href="function-template_generic_menu_dropdown_above.html">template_generic_menu_dropdown_above</a></li>
				<li><a href="function-template_generic_menu_dropdown_below.html">template_generic_menu_dropdown_below</a></li>
				<li><a href="function-template_generic_menu_tabs.html">template_generic_menu_tabs</a></li>
				<li><a href="function-template_generic_xml.html">template_generic_xml</a></li>
				<li><a href="function-template_generic_xml_recursive.html">template_generic_xml_recursive</a></li>
				<li><a href="function-template_group_members.html">template_group_members</a></li>
				<li><a href="function-template_group_request_reason.html">template_group_request_reason</a></li>
				<li><a href="function-template_group_requests_block.html">template_group_requests_block</a></li>
				<li><a href="function-template_groupMembership.html">template_groupMembership</a></li>
				<li><a href="function-template_header.html">template_header</a></li>
				<li><a href="function-template_hms.html">template_hms</a></li>
				<li><a href="function-template_homepage_sample1.html">template_homepage_sample1</a></li>
				<li><a href="function-template_homepage_sample1_html.html">template_homepage_sample1_html</a></li>
				<li><a href="function-template_homepage_sample1_php.html">template_homepage_sample1_php</a></li>
				<li><a href="function-template_html_above.html">template_html_above</a></li>
				<li><a href="function-template_html_below.html">template_html_below</a></li>
				<li><a href="function-template_ic_block_calendar.html">template_ic_block_calendar</a></li>
				<li><a href="function-template_ic_block_online.html">template_ic_block_online</a></li>
				<li><a href="function-template_ic_block_recent.html">template_ic_block_recent</a></li>
				<li><a href="function-template_ic_block_stats.html">template_ic_block_stats</a></li>
				<li><a href="function-template_ignoreboards.html">template_ignoreboards</a></li>
				<li><a href="function-template_include.html">template_include</a></li>
				<li><a href="function-template_info_center.html">template_info_center</a></li>
				<li><a href="function-template_init.html">template_init</a></li>
				<li><a href="function-template_inline_permissions.html">template_inline_permissions</a></li>
				<li><a href="function-template_install_above.html">template_install_above</a></li>
				<li><a href="function-template_install_below.html">template_install_below</a></li>
				<li><a href="function-template_install_options.html">template_install_options</a></li>
				<li><a href="function-template_installed.html">template_installed</a></li>
				<li><a href="function-template_issueWarning.html">template_issueWarning</a></li>
				<li><a href="function-template_javascript.html">template_javascript</a></li>
				<li><a href="function-template_jump_to.html">template_jump_to</a></li>
				<li><a href="function-template_kick_guest.html">template_kick_guest</a></li>
				<li><a href="function-template_labels.html">template_labels</a></li>
				<li><a href="function-template_like.html">template_like</a></li>
				<li><a href="function-template_list.html">template_list</a></li>
				<li><a href="function-template_list_themes.html">template_list_themes</a></li>
				<li><a href="function-template_load_warning_variables.html">template_load_warning_variables</a></li>
				<li><a href="function-template_login.html">template_login</a></li>
				<li><a href="function-template_login_tfa.html">template_login_tfa</a></li>
				<li><a href="function-template_mailtest.html">template_mailtest</a></li>
				<li><a href="function-template_main.html" class="invalid">template_main</a></li>
				<li><a href="function-template_maint_warning_above.html">template_maint_warning_above</a></li>
				<li><a href="function-template_maint_warning_below.html">template_maint_warning_below</a></li>
				<li><a href="function-template_maintain_database.html">template_maintain_database</a></li>
				<li><a href="function-template_maintain_members.html">template_maintain_members</a></li>
				<li><a href="function-template_maintain_routine.html">template_maintain_routine</a></li>
				<li><a href="function-template_maintain_topics.html">template_maintain_topics</a></li>
				<li><a href="function-template_maintenance.html" class="invalid">template_maintenance</a></li>
				<li><a href="function-template_manual.html">template_manual</a></li>
				<li><a href="function-template_max_size.html">template_max_size</a></li>
				<li><a href="function-template_menu.html" class="invalid">template_menu</a></li>
				<li><a href="function-template_merge.html">template_merge</a></li>
				<li><a href="function-template_merge_done.html">template_merge_done</a></li>
				<li><a href="function-template_merge_extra_options.html">template_merge_extra_options</a></li>
				<li><a href="function-template_message_icons.html">template_message_icons</a></li>
				<li><a href="function-template_moderation_center.html">template_moderation_center</a></li>
				<li><a href="function-template_moderation_settings.html">template_moderation_settings</a></li>
				<li><a href="function-template_modify_board.html">template_modify_board</a></li>
				<li><a href="function-template_modify_category.html">template_modify_category</a></li>
				<li><a href="function-template_modify_group.html">template_modify_group</a></li>
				<li><a href="function-template_modify_group_display.html">template_modify_group_display</a></li>
				<li><a href="function-template_modify_language_entries.html">template_modify_language_entries</a></li>
				<li><a href="function-template_modify_subscription.html">template_modify_subscription</a></li>
				<li><a href="function-template_modify_user_subscription.html">template_modify_user_subscription</a></li>
				<li><a href="function-template_modify_weights.html">template_modify_weights</a></li>
				<li><a href="function-template_modifydone.html">template_modifydone</a></li>
				<li><a href="function-template_modifyfast.html">template_modifyfast</a></li>
				<li><a href="function-template_modifyset.html">template_modifyset</a></li>
				<li><a href="function-template_modifysmiley.html">template_modifysmiley</a></li>
				<li><a href="function-template_modifytopicdone.html">template_modifytopicdone</a></li>
				<li><a href="function-template_move.html">template_move</a></li>
				<li><a href="function-template_new_group.html">template_new_group</a></li>
				<li><a href="function-template_news_lists.html">template_news_lists</a></li>
				<li><a href="function-template_newsfader.html">template_newsfader</a></li>
				<li><a href="function-template_not_done.html">template_not_done</a></li>
				<li><a href="function-template_notes.html">template_notes</a></li>
				<li><a href="function-template_notify_board.html">template_notify_board</a></li>
				<li><a href="function-template_omfg.html">template_omfg</a></li>
				<li><a href="function-template_optimize.html">template_optimize</a></li>
				<li><a href="function-template_options.html">template_options</a></li>
				<li><a href="function-template_package_confirm.html">template_package_confirm</a></li>
				<li><a href="function-template_package_list.html">template_package_list</a></li>
				<li><a href="function-template_paid_done.html">template_paid_done</a></li>
				<li><a href="function-template_permission_index.html">template_permission_index</a></li>
				<li><a href="function-template_permission_show_contents.html">template_permission_show_contents</a></li>
				<li><a href="function-template_php_info.html">template_php_info</a></li>
				<li><a href="function-template_pick.html">template_pick</a></li>
				<li><a href="function-template_pm.html">template_pm</a></li>
				<li><a href="function-template_pm_above.html">template_pm_above</a></li>
				<li><a href="function-template_pm_below.html">template_pm_below</a></li>
				<li><a href="function-template_pm_popup.html">template_pm_popup</a></li>
				<li><a href="function-template_populate_database.html">template_populate_database</a></li>
				<li><a href="function-template_popup.html" class="invalid">template_popup</a></li>
				<li><a href="function-template_post.html">template_post</a></li>
				<li><a href="function-template_post_header.html">template_post_header</a></li>
				<li><a href="function-template_postmod_permissions.html">template_postmod_permissions</a></li>
				<li><a href="function-template_print.html">template_print</a></li>
				<li><a href="function-template_print_above.html" class="invalid">template_print_above</a></li>
				<li><a href="function-template_print_below.html" class="invalid">template_print_below</a></li>
				<li><a href="function-template_print_options.html">template_print_options</a></li>
				<li><a href="function-template_profile_above.html">template_profile_above</a></li>
				<li><a href="function-template_profile_avatar_select.html">template_profile_avatar_select</a></li>
				<li><a href="function-template_profile_below.html">template_profile_below</a></li>
				<li><a href="function-template_profile_birthdate.html">template_profile_birthdate</a></li>
				<li><a href="function-template_profile_group_manage.html">template_profile_group_manage</a></li>
				<li><a href="function-template_profile_pm_settings.html">template_profile_pm_settings</a></li>
				<li><a href="function-template_profile_popup.html">template_profile_popup</a></li>
				<li><a href="function-template_profile_save.html">template_profile_save</a></li>
				<li><a href="function-template_profile_signature_modify.html">template_profile_signature_modify</a></li>
				<li><a href="function-template_profile_smiley_pick.html">template_profile_smiley_pick</a></li>
				<li><a href="function-template_profile_tfa.html">template_profile_tfa</a></li>
				<li><a href="function-template_profile_theme_pick.html">template_profile_theme_pick</a></li>
				<li><a href="function-template_profile_theme_settings.html">template_profile_theme_settings</a></li>
				<li><a href="function-template_profile_timeformat_modify.html">template_profile_timeformat_modify</a></li>
				<li><a href="function-template_prune.html">template_prune</a></li>
				<li><a href="function-template_quickbuttons.html">template_quickbuttons</a></li>
				<li><a href="function-template_quickreply.html">template_quickreply</a></li>
				<li><a href="function-template_quotefast.html" class="invalid">template_quotefast</a></li>
				<li><a href="function-template_recent.html">template_recent</a></li>
				<li><a href="function-template_redirect_options.html">template_redirect_options</a></li>
				<li><a href="function-template_registration_agreement.html">template_registration_agreement</a></li>
				<li><a href="function-template_registration_form.html">template_registration_form</a></li>
				<li><a href="function-template_reminder_pick.html">template_reminder_pick</a></li>
				<li><a href="function-template_repair_boards.html">template_repair_boards</a></li>
				<li><a href="function-template_replies.html">template_replies</a></li>
				<li><a href="function-template_report_message.html">template_report_message</a></li>
				<li><a href="function-template_report_message_complete.html">template_report_message_complete</a></li>
				<li><a href="function-template_report_type.html">template_report_type</a></li>
				<li><a href="function-template_reported_members.html">template_reported_members</a></li>
				<li><a href="function-template_reported_members_block.html">template_reported_members_block</a></li>
				<li><a href="function-template_reported_posts.html">template_reported_posts</a></li>
				<li><a href="function-template_reported_posts_block.html" class="invalid">template_reported_posts_block</a></li>
				<li><a href="function-template_reported_users_block.html">template_reported_users_block</a></li>
				<li><a href="function-template_resend.html">template_resend</a></li>
				<li><a href="function-template_reset_list.html">template_reset_list</a></li>
				<li><a href="function-template_results.html" class="invalid">template_results</a></li>
				<li><a href="function-template_retry_activate.html">template_retry_activate</a></li>
				<li><a href="function-template_rules.html">template_rules</a></li>
				<li><a href="function-template_search.html" class="invalid">template_search</a></li>
				<li><a href="function-template_search_members.html">template_search_members</a></li>
				<li><a href="function-template_search_results.html">template_search_results</a></li>
				<li><a href="function-template_select.html">template_select</a></li>
				<li><a href="function-template_select_search_method.html">template_select_search_method</a></li>
				<li><a href="function-template_send.html">template_send</a></li>
				<li><a href="function-template_sendbody.html">template_sendbody</a></li>
				<li><a href="function-template_sent.html">template_sent</a></li>
				<li><a href="function-template_serialize_json.html">template_serialize_json</a></li>
				<li><a href="function-template_serialize_json_xml.html">template_serialize_json_xml</a></li>
				<li><a href="function-template_servers.html">template_servers</a></li>
				<li><a href="function-template_set_options.html">template_set_options</a></li>
				<li><a href="function-template_set_password.html">template_set_password</a></li>
				<li><a href="function-template_set_settings.html">template_set_settings</a></li>
				<li><a href="function-template_setorder.html">template_setorder</a></li>
				<li><a href="function-template_settings.html">template_settings</a></li>
				<li><a href="function-template_show_backtrace.html">template_show_backtrace</a></li>
				<li><a href="function-template_show_custom_profile.html">template_show_custom_profile</a></li>
				<li><a href="function-template_show_file.html">template_show_file</a></li>
				<li><a href="function-template_show_list.html">template_show_list</a></li>
				<li><a href="function-template_show_month_grid.html">template_show_month_grid</a></li>
				<li><a href="function-template_show_notice.html">template_show_notice</a></li>
				<li><a href="function-template_show_settings.html">template_show_settings</a></li>
				<li><a href="function-template_show_spider_logs.html">template_show_spider_logs</a></li>
				<li><a href="function-template_show_spider_stats.html">template_show_spider_stats</a></li>
				<li><a href="function-template_show_upcoming_list.html">template_show_upcoming_list</a></li>
				<li><a href="function-template_show_week_grid.html">template_show_week_grid</a></li>
				<li><a href="function-template_showAlerts.html">template_showAlerts</a></li>
				<li><a href="function-template_showDrafts.html">template_showDrafts</a></li>
				<li><a href="function-template_showPermissions.html">template_showPermissions</a></li>
				<li><a href="function-template_showPMDrafts.html">template_showPMDrafts</a></li>
				<li><a href="function-template_showPosts.html">template_showPosts</a></li>
				<li><a href="function-template_single_pm.html">template_single_pm</a></li>
				<li><a href="function-template_single_post.html">template_single_post</a></li>
				<li><a href="function-template_spellcheck.html">template_spellcheck</a></li>
				<li><a href="function-template_spider_edit.html">template_spider_edit</a></li>
				<li><a href="function-template_split.html">template_split</a></li>
				<li><a href="function-template_ssi_above.html">template_ssi_above</a></li>
				<li><a href="function-template_ssi_below.html">template_ssi_below</a></li>
				<li><a href="function-template_statPanel.html">template_statPanel</a></li>
				<li><a href="function-template_stats.html">template_stats</a></li>
				<li><a href="function-template_subject_list.html">template_subject_list</a></li>
				<li><a href="function-template_summary.html">template_summary</a></li>
				<li><a href="function-template_terms.html">template_terms</a></li>
				<li><a href="function-template_tfadisable.html">template_tfadisable</a></li>
				<li><a href="function-template_tfasetup.html">template_tfasetup</a></li>
				<li><a href="function-template_tfasetup_backup.html">template_tfasetup_backup</a></li>
				<li><a href="function-template_thetime.html">template_thetime</a></li>
				<li><a href="function-template_topic_legend.html">template_topic_legend</a></li>
				<li><a href="function-template_trackActivity.html">template_trackActivity</a></li>
				<li><a href="function-template_trackIP.html">template_trackIP</a></li>
				<li><a href="function-template_unapproved_posts.html">template_unapproved_posts</a></li>
				<li><a href="function-template_unread.html">template_unread</a></li>
				<li><a href="function-template_upgrade_above.html">template_upgrade_above</a></li>
				<li><a href="function-template_upgrade_below.html">template_upgrade_below</a></li>
				<li><a href="function-template_upgrade_complete.html">template_upgrade_complete</a></li>
				<li><a href="function-template_upgrade_options.html">template_upgrade_options</a></li>
				<li><a href="function-template_user_subscription.html">template_user_subscription</a></li>
				<li><a href="function-template_user_watch_post_callback.html">template_user_watch_post_callback</a></li>
				<li><a href="function-template_verification_sound.html">template_verification_sound</a></li>
				<li><a href="function-template_view_operations.html">template_view_operations</a></li>
				<li><a href="function-template_view_package.html">template_view_package</a></li>
				<li><a href="function-template_view_scheduled_tasks.html">template_view_scheduled_tasks</a></li>
				<li><a href="function-template_view_versions.html">template_view_versions</a></li>
				<li><a href="function-template_viewmemberreport.html">template_viewmemberreport</a></li>
				<li><a href="function-template_viewmodreport.html">template_viewmodreport</a></li>
				<li><a href="function-template_viewWarning.html">template_viewWarning</a></li>
				<li><a href="function-template_warn_template.html">template_warn_template</a></li>
				<li><a href="function-template_warning.html">template_warning</a></li>
				<li><a href="function-template_warning_divs.html">template_warning_divs</a></li>
				<li><a href="function-template_watched_users.html">template_watched_users</a></li>
				<li><a href="function-template_welcome_message.html" class="invalid">template_welcome_message</a></li>
				<li><a href="function-template_xml_above.html">template_xml_above</a></li>
				<li><a href="function-template_xml_below.html">template_xml_below</a></li>
				<li><a href="function-TestMailSend.html">TestMailSend</a></li>
				<li><a href="function-text2words.html">text2words</a></li>
				<li><a href="function-textfield_alter.html">textfield_alter</a></li>
				<li><a href="function-tfadisable.html">tfadisable</a></li>
				<li><a href="function-tfasetup.html">tfasetup</a></li>
				<li><a href="function-theme.html">theme</a></li>
				<li><a href="function-theme_copyright.html">theme_copyright</a></li>
				<li><a href="function-theme_inline_permissions.html">theme_inline_permissions</a></li>
				<li><a href="function-theme_install.html">theme_install</a></li>
				<li><a href="function-theme_linktree.html" class="invalid">theme_linktree</a></li>
				<li><a href="function-ThemeAdmin.html">ThemeAdmin</a></li>
				<li><a href="function-ThemeInstall.html">ThemeInstall</a></li>
				<li><a href="function-ThemeList.html">ThemeList</a></li>
				<li><a href="function-ThemesMain.html">ThemesMain</a></li>
				<li><a href="function-throw_error.html">throw_error</a></li>
				<li><a href="function-time_since.html">time_since</a></li>
				<li><a href="function-timeformat.html">timeformat</a></li>
				<li><a href="function-TopicNotify.html">TopicNotify</a></li>
				<li><a href="function-trackActivity.html">trackActivity</a></li>
				<li><a href="function-trackEdits.html">trackEdits</a></li>
				<li><a href="function-trackGroupReq.html">trackGroupReq</a></li>
				<li><a href="function-tracking.html">tracking</a></li>
				<li><a href="function-TrackIP.html">TrackIP</a></li>
				<li><a href="function-TrackLogins.html">TrackLogins</a></li>
				<li><a href="function-trackStats.html">trackStats</a></li>
				<li><a href="function-trackStatsUsersOnline.html">trackStatsUsersOnline</a></li>
				<li><a href="function-TransferAttachments.html">TransferAttachments</a></li>
				<li><a href="function-truncate_array.html">truncate_array</a></li>
				<li><a href="function-un_htmlspecialchars.html">un_htmlspecialchars</a></li>
				<li><a href="function-un_preparsecode.html">un_preparsecode</a></li>
				<li><a href="function-UnapprovedAttachments.html">UnapprovedAttachments</a></li>
				<li><a href="function-UnapprovedPosts.html">UnapprovedPosts</a></li>
				<li><a href="function-unescapestring__recursive.html">unescapestring__recursive</a></li>
				<li><a href="function-UnreadTopics.html">UnreadTopics</a></li>
				<li><a href="function-updateAdminPreferences.html">updateAdminPreferences</a></li>
				<li><a href="function-updateBanGroup.html">updateBanGroup</a></li>
				<li><a href="function-updateBanMembers.html">updateBanMembers</a></li>
				<li><a href="function-updateBoardManagers.html">updateBoardManagers</a></li>
				<li><a href="function-updateChildPermissions.html">updateChildPermissions</a></li>
				<li><a href="function-updateDbLastError.html">updateDbLastError</a></li>
				<li><a href="function-updateLastMessages.html">updateLastMessages</a></li>
				<li><a href="function-updateMemberData.html">updateMemberData</a></li>
				<li><a href="function-updateReport.html">updateReport</a></li>
				<li><a href="function-updateSettings.html">updateSettings</a></li>
				<li><a href="function-updateSettingsFile.html">updateSettingsFile</a></li>
				<li><a href="function-updateStats.html">updateStats</a></li>
				<li><a href="function-updateTriggers.html">updateTriggers</a></li>
				<li><a href="function-upgrade_clean_cache.html">upgrade_clean_cache</a></li>
				<li><a href="function-upgrade_query.html">upgrade_query</a></li>
				<li><a href="function-upgradeExit.html">upgradeExit</a></li>
				<li><a href="function-upgradeGetColumnInfo.html">upgradeGetColumnInfo</a></li>
				<li><a href="function-UpgradeOptions.html">UpgradeOptions</a></li>
				<li><a href="function-url_exists.html">url_exists</a></li>
				<li><a href="function-url_image_size.html">url_image_size</a></li>
				<li><a href="function-url_parts.html">url_parts</a></li>
				<li><a href="function-url_to_iri.html">url_to_iri</a></li>
				<li><a href="function-urldecode__recursive.html">urldecode__recursive</a></li>
				<li><a href="function-user_info_callback.html">user_info_callback</a></li>
				<li><a href="function-utf8_strtolower.html">utf8_strtolower</a></li>
				<li><a href="function-utf8_strtoupper.html">utf8_strtoupper</a></li>
				<li><a href="function-validate_iri.html">validate_iri</a></li>
				<li><a href="function-validateEventPost.html">validateEventPost</a></li>
				<li><a href="function-validatePassword.html">validatePassword</a></li>
				<li><a href="function-validatePasswordFlood.html">validatePasswordFlood</a></li>
				<li><a href="function-validateSession.html">validateSession</a></li>
				<li><a href="function-validateToken.html">validateToken</a></li>
				<li><a href="function-validateTriggers.html">validateTriggers</a></li>
				<li><a href="function-validateUsername.html">validateUsername</a></li>
				<li><a href="function-VerificationCode.html">VerificationCode</a></li>
				<li><a href="function-VersionDetail.html">VersionDetail</a></li>
				<li><a href="function-ViewBacktrace.html">ViewBacktrace</a></li>
				<li><a href="function-ViewErrorLog.html">ViewErrorLog</a></li>
				<li><a href="function-ViewFile.html">ViewFile</a></li>
				<li><a href="function-ViewMemberlist.html">ViewMemberlist</a></li>
				<li><a href="function-ViewMembers.html">ViewMembers</a></li>
				<li><a href="function-ViewModlog.html">ViewModlog</a></li>
				<li><a href="function-ViewOperations.html">ViewOperations</a></li>
				<li><a href="function-ViewQuery.html">ViewQuery</a></li>
				<li><a href="function-ViewSpiders.html">ViewSpiders</a></li>
				<li><a href="function-ViewSubscribedUsers.html">ViewSubscribedUsers</a></li>
				<li><a href="function-ViewSubscriptions.html">ViewSubscriptions</a></li>
				<li><a href="function-viewWarning.html">viewWarning</a></li>
				<li><a href="function-ViewWarningLog.html">ViewWarningLog</a></li>
				<li><a href="function-ViewWarnings.html">ViewWarnings</a></li>
				<li><a href="function-ViewWarningTemplates.html">ViewWarningTemplates</a></li>
				<li><a href="function-ViewWatchedUsers.html">ViewWatchedUsers</a></li>
				<li><a href="function-Vote.html">Vote</a></li>
				<li><a href="function-warning_preview.html">warning_preview</a></li>
				<li><a href="function-Welcome.html">Welcome</a></li>
				<li><a href="function-WelcomeLogin.html">WelcomeLogin</a></li>
				<li><a href="function-Who.html">Who</a></li>
				<li><a href="function-WrapAction.html">WrapAction</a></li>
				<li><a href="function-writeLog.html">writeLog</a></li>
				<li><a href="function-XmlDraft.html">XmlDraft</a></li>
				<li><a href="function-XMLhttpMain.html">XMLhttpMain</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
<span>Namespace</span>			</li>
			<li>
<span>Class</span>			</li>
		</ul>
		<ul>
		</ul>
		<ul>
		</ul>
	</div>

<pre class="numbers"><code><span class="l"><a href="#1">   1: </a></span><span class="l"><a href="#2">   2: </a></span><span class="l"><a href="#3">   3: </a></span></span><span class="l"><a href="#4">   4: </a></span></span><span class="l"><a href="#5">   5: </a></span></span><span class="l"><a href="#6">   6: </a></span></span><span class="l"><a href="#7">   7: </a></span></span><span class="l"><a href="#8">   8: </a></span></span><span class="l"><a href="#9">   9: </a></span></span><span class="l"><a href="#10">  10: </a></span></span><span class="l"><a href="#11">  11: </a></span></span><span class="l"><a href="#12">  12: </a></span></span><span class="l"><a href="#13">  13: </a></span></span><span class="l"><a href="#14">  14: </a></span></span><span class="l"><a href="#15">  15: </a></span><span class="l"><a href="#16">  16: </a></span><span class="l"><a href="#17">  17: </a></span><span class="l"><a href="#18">  18: </a></span><span class="l"><a href="#19">  19: </a></span><span class="l"><a href="#20">  20: </a></span></span><span class="l"><a href="#21">  21: </a></span></span><span class="l"><a href="#22">  22: </a></span></span><span class="l"><a href="#23">  23: </a></span><span class="l"><a href="#24">  24: </a></span><span class="l"><a href="#25">  25: </a></span></span><span class="l"><a href="#26">  26: </a></span></span><span class="l"><a href="#27">  27: </a></span></span><span class="l"><a href="#28">  28: </a></span><span class="l"><a href="#29">  29: </a></span><span class="l"><a href="#30">  30: </a></span><span class="l"><a href="#31">  31: </a></span><span class="l"><a href="#32">  32: </a></span><span class="l"><a href="#33">  33: </a></span><span class="l"><a href="#34">  34: </a></span><span class="l"><a href="#35">  35: </a></span><span class="l"><a href="#36">  36: </a></span><span class="l"><a href="#37">  37: </a></span><span class="l"><a href="#38">  38: </a></span><span class="l"><a href="#39">  39: </a></span><span class="l"><a href="#40">  40: </a></span><span class="l"><a href="#41">  41: </a></span><span class="l"><a href="#42">  42: </a></span><span class="l"><a href="#43">  43: </a></span><span class="l"><a href="#44">  44: </a></span><span class="l"><a href="#45">  45: </a></span></span><span class="l"><a href="#46">  46: </a></span></span><span class="l"><a href="#47">  47: </a></span></span><span class="l"><a href="#48">  48: </a></span></span><span class="l"><a href="#49">  49: </a></span></span><span class="l"><a href="#50">  50: </a></span><span class="l"><a href="#51">  51: </a></span><span class="l"><a href="#52">  52: </a></span><span class="l"><a href="#53">  53: </a></span><span class="l"><a href="#54">  54: </a></span><span class="l"><a href="#55">  55: </a></span><span class="l"><a href="#56">  56: </a></span><span class="l"><a href="#57">  57: </a></span><span class="l"><a href="#58">  58: </a></span><span class="l"><a href="#59">  59: </a></span><span class="l"><a href="#60">  60: </a></span><span class="l"><a href="#61">  61: </a></span><span class="l"><a href="#62">  62: </a></span><span class="l"><a href="#63">  63: </a></span><span class="l"><a href="#64">  64: </a></span><span class="l"><a href="#65">  65: </a></span><span class="l"><a href="#66">  66: </a></span><span class="l"><a href="#67">  67: </a></span><span class="l"><a href="#68">  68: </a></span><span class="l"><a href="#69">  69: </a></span><span class="l"><a href="#70">  70: </a></span><span class="l"><a href="#71">  71: </a></span><span class="l"><a href="#72">  72: </a></span><span class="l"><a href="#73">  73: </a></span><span class="l"><a href="#74">  74: </a></span><span class="l"><a href="#75">  75: </a></span><span class="l"><a href="#76">  76: </a></span><span class="l"><a href="#77">  77: </a></span><span class="l"><a href="#78">  78: </a></span><span class="l"><a href="#79">  79: </a></span><span class="l"><a href="#80">  80: </a></span><span class="l"><a href="#81">  81: </a></span><span class="l"><a href="#82">  82: </a></span><span class="l"><a href="#83">  83: </a></span><span class="l"><a href="#84">  84: </a></span><span class="l"><a href="#85">  85: </a></span><span class="l"><a href="#86">  86: </a></span></span><span class="l"><a href="#87">  87: </a></span></span><span class="l"><a href="#88">  88: </a></span></span><span class="l"><a href="#89">  89: </a></span><span class="l"><a href="#90">  90: </a></span><span class="l"><a href="#91">  91: </a></span><span class="l"><a href="#92">  92: </a></span><span class="l"><a href="#93">  93: </a></span><span class="l"><a href="#94">  94: </a></span><span class="l"><a href="#95">  95: </a></span><span class="l"><a href="#96">  96: </a></span><span class="l"><a href="#97">  97: </a></span><span class="l"><a href="#98">  98: </a></span><span class="l"><a href="#99">  99: </a></span><span class="l"><a href="#100"> 100: </a></span><span class="l"><a href="#101"> 101: </a></span><span class="l"><a href="#102"> 102: </a></span><span class="l"><a href="#103"> 103: </a></span><span class="l"><a href="#104"> 104: </a></span></span><span class="l"><a href="#105"> 105: </a></span></span><span class="l"><a href="#106"> 106: </a></span></span><span class="l"><a href="#107"> 107: </a></span></span><span class="l"><a href="#108"> 108: </a></span></span><span class="l"><a href="#109"> 109: </a></span><span class="l"><a href="#110"> 110: </a></span><span class="l"><a href="#111"> 111: </a></span><span class="l"><a href="#112"> 112: </a></span><span class="l"><a href="#113"> 113: </a></span><span class="l"><a href="#114"> 114: </a></span><span class="l"><a href="#115"> 115: </a></span><span class="l"><a href="#116"> 116: </a></span><span class="l"><a href="#117"> 117: </a></span><span class="l"><a href="#118"> 118: </a></span><span class="l"><a href="#119"> 119: </a></span><span class="l"><a href="#120"> 120: </a></span><span class="l"><a href="#121"> 121: </a></span><span class="l"><a href="#122"> 122: </a></span><span class="l"><a href="#123"> 123: </a></span><span class="l"><a href="#124"> 124: </a></span><span class="l"><a href="#125"> 125: </a></span><span class="l"><a href="#126"> 126: </a></span><span class="l"><a href="#127"> 127: </a></span><span class="l"><a href="#128"> 128: </a></span><span class="l"><a href="#129"> 129: </a></span><span class="l"><a href="#130"> 130: </a></span><span class="l"><a href="#131"> 131: </a></span><span class="l"><a href="#132"> 132: </a></span><span class="l"><a href="#133"> 133: </a></span><span class="l"><a href="#134"> 134: </a></span><span class="l"><a href="#135"> 135: </a></span><span class="l"><a href="#136"> 136: </a></span><span class="l"><a href="#137"> 137: </a></span><span class="l"><a href="#138"> 138: </a></span><span class="l"><a href="#139"> 139: </a></span><span class="l"><a href="#140"> 140: </a></span><span class="l"><a href="#141"> 141: </a></span><span class="l"><a href="#142"> 142: </a></span><span class="l"><a href="#143"> 143: </a></span><span class="l"><a href="#144"> 144: </a></span><span class="l"><a href="#145"> 145: </a></span><span class="l"><a href="#146"> 146: </a></span><span class="l"><a href="#147"> 147: </a></span><span class="l"><a href="#148"> 148: </a></span><span class="l"><a href="#149"> 149: </a></span><span class="l"><a href="#150"> 150: </a></span><span class="l"><a href="#151"> 151: </a></span><span class="l"><a href="#152"> 152: </a></span><span class="l"><a href="#153"> 153: </a></span><span class="l"><a href="#154"> 154: </a></span><span class="l"><a href="#155"> 155: </a></span><span class="l"><a href="#156"> 156: </a></span><span class="l"><a href="#157"> 157: </a></span><span class="l"><a href="#158"> 158: </a></span></span><span class="l"><a href="#159"> 159: </a></span></span><span class="l"><a href="#160"> 160: </a></span></span><span class="l"><a href="#161"> 161: </a></span><span class="l"><a href="#162"> 162: </a></span><span class="l"><a href="#163"> 163: </a></span><span class="l"><a href="#164"> 164: </a></span><span class="l"><a href="#165"> 165: </a></span><span class="l"><a href="#166"> 166: </a></span><span class="l"><a href="#167"> 167: </a></span><span class="l"><a href="#168"> 168: </a></span><span class="l"><a href="#169"> 169: </a></span><span class="l"><a href="#170"> 170: </a></span><span class="l"><a href="#171"> 171: </a></span><span class="l"><a href="#172"> 172: </a></span><span class="l"><a href="#173"> 173: </a></span><span class="l"><a href="#174"> 174: </a></span><span class="l"><a href="#175"> 175: </a></span><span class="l"><a href="#176"> 176: </a></span><span class="l"><a href="#177"> 177: </a></span><span class="l"><a href="#178"> 178: </a></span><span class="l"><a href="#179"> 179: </a></span><span class="l"><a href="#180"> 180: </a></span><span class="l"><a href="#181"> 181: </a></span><span class="l"><a href="#182"> 182: </a></span><span class="l"><a href="#183"> 183: </a></span><span class="l"><a href="#184"> 184: </a></span><span class="l"><a href="#185"> 185: </a></span><span class="l"><a href="#186"> 186: </a></span><span class="l"><a href="#187"> 187: </a></span></span><span class="l"><a href="#188"> 188: </a></span></span><span class="l"><a href="#189"> 189: </a></span></span><span class="l"><a href="#190"> 190: </a></span><span class="l"><a href="#191"> 191: </a></span><span class="l"><a href="#192"> 192: </a></span><span class="l"><a href="#193"> 193: </a></span><span class="l"><a href="#194"> 194: </a></span><span class="l"><a href="#195"> 195: </a></span><span class="l"><a href="#196"> 196: </a></span><span class="l"><a href="#197"> 197: </a></span><span class="l"><a href="#198"> 198: </a></span><span class="l"><a href="#199"> 199: </a></span></span><span class="l"><a href="#200"> 200: </a></span></span><span class="l"><a href="#201"> 201: </a></span><span class="l"><a href="#202"> 202: </a></span><span class="l"><a href="#203"> 203: </a></span><span class="l"><a href="#204"> 204: </a></span><span class="l"><a href="#205"> 205: </a></span><span class="l"><a href="#206"> 206: </a></span><span class="l"><a href="#207"> 207: </a></span><span class="l"><a href="#208"> 208: </a></span><span class="l"><a href="#209"> 209: </a></span></span><span class="l"><a href="#210"> 210: </a></span><span class="l"><a href="#211"> 211: </a></span><span class="l"><a href="#212"> 212: </a></span><span class="l"><a href="#213"> 213: </a></span><span class="l"><a href="#214"> 214: </a></span><span class="l"><a href="#215"> 215: </a></span></span><span class="l"><a href="#216"> 216: </a></span></span><span class="l"><a href="#217"> 217: </a></span></span><span class="l"><a href="#218"> 218: </a></span></span><span class="l"><a href="#219"> 219: </a></span></span><span class="l"><a href="#220"> 220: </a></span></span><span class="l"><a href="#221"> 221: </a></span><span class="l"><a href="#222"> 222: </a></span><span class="l"><a href="#223"> 223: </a></span><span class="l"><a href="#224"> 224: </a></span><span class="l"><a href="#225"> 225: </a></span><span class="l"><a href="#226"> 226: </a></span><span class="l"><a href="#227"> 227: </a></span><span class="l"><a href="#228"> 228: </a></span><span class="l"><a href="#229"> 229: </a></span><span class="l"><a href="#230"> 230: </a></span><span class="l"><a href="#231"> 231: </a></span><span class="l"><a href="#232"> 232: </a></span><span class="l"><a href="#233"> 233: </a></span><span class="l"><a href="#234"> 234: </a></span><span class="l"><a href="#235"> 235: </a></span><span class="l"><a href="#236"> 236: </a></span><span class="l"><a href="#237"> 237: </a></span></span><span class="l"><a href="#238"> 238: </a></span></span><span class="l"><a href="#239"> 239: </a></span></span><span class="l"><a href="#240"> 240: </a></span></span><span class="l"><a href="#241"> 241: </a></span></span><span class="l"><a href="#242"> 242: </a></span></span><span class="l"><a href="#243"> 243: </a></span></span><span class="l"><a href="#244"> 244: </a></span><span class="l"><a href="#245"> 245: </a></span><span class="l"><a href="#246"> 246: </a></span><span class="l"><a href="#247"> 247: </a></span><span class="l"><a href="#248"> 248: </a></span><span class="l"><a href="#249"> 249: </a></span><span class="l"><a href="#250"> 250: </a></span><span class="l"><a href="#251"> 251: </a></span><span class="l"><a href="#252"> 252: </a></span><span class="l"><a href="#253"> 253: </a></span><span class="l"><a href="#254"> 254: </a></span><span class="l"><a href="#255"> 255: </a></span><span class="l"><a href="#256"> 256: </a></span><span class="l"><a href="#257"> 257: </a></span><span class="l"><a href="#258"> 258: </a></span><span class="l"><a href="#259"> 259: </a></span><span class="l"><a href="#260"> 260: </a></span><span class="l"><a href="#261"> 261: </a></span><span class="l"><a href="#262"> 262: </a></span><span class="l"><a href="#263"> 263: </a></span><span class="l"><a href="#264"> 264: </a></span></span><span class="l"><a href="#265"> 265: </a></span></span><span class="l"><a href="#266"> 266: </a></span></span><span class="l"><a href="#267"> 267: </a></span></span><span class="l"><a href="#268"> 268: </a></span></span><span class="l"><a href="#269"> 269: </a></span></span><span class="l"><a href="#270"> 270: </a></span></span><span class="l"><a href="#271"> 271: </a></span></span><span class="l"><a href="#272"> 272: </a></span><span class="l"><a href="#273"> 273: </a></span><span class="l"><a href="#274"> 274: </a></span><span class="l"><a href="#275"> 275: </a></span><span class="l"><a href="#276"> 276: </a></span><span class="l"><a href="#277"> 277: </a></span><span class="l"><a href="#278"> 278: </a></span><span class="l"><a href="#279"> 279: </a></span><span class="l"><a href="#280"> 280: </a></span><span class="l"><a href="#281"> 281: </a></span><span class="l"><a href="#282"> 282: </a></span><span class="l"><a href="#283"> 283: </a></span><span class="l"><a href="#284"> 284: </a></span><span class="l"><a href="#285"> 285: </a></span><span class="l"><a href="#286"> 286: </a></span><span class="l"><a href="#287"> 287: </a></span><span class="l"><a href="#288"> 288: </a></span><span class="l"><a href="#289"> 289: </a></span><span class="l"><a href="#290"> 290: </a></span><span class="l"><a href="#291"> 291: </a></span></span><span class="l"><a href="#292"> 292: </a></span></span><span class="l"><a href="#293"> 293: </a></span></span><span class="l"><a href="#294"> 294: </a></span></span><span class="l"><a href="#295"> 295: </a></span></span><span class="l"><a href="#296"> 296: </a></span><span class="l"><a href="#297"> 297: </a></span><span class="l"><a href="#298"> 298: </a></span><span class="l"><a href="#299"> 299: </a></span><span class="l"><a href="#300"> 300: </a></span><span class="l"><a href="#301"> 301: </a></span><span class="l"><a href="#302"> 302: </a></span><span class="l"><a href="#303"> 303: </a></span><span class="l"><a href="#304"> 304: </a></span><span class="l"><a href="#305"> 305: </a></span><span class="l"><a href="#306"> 306: </a></span><span class="l"><a href="#307"> 307: </a></span><span class="l"><a href="#308"> 308: </a></span><span class="l"><a href="#309"> 309: </a></span><span class="l"><a href="#310"> 310: </a></span><span class="l"><a href="#311"> 311: </a></span><span class="l"><a href="#312"> 312: </a></span><span class="l"><a href="#313"> 313: </a></span><span class="l"><a href="#314"> 314: </a></span><span class="l"><a href="#315"> 315: </a></span></span><span class="l"><a href="#316"> 316: </a></span></span><span class="l"><a href="#317"> 317: </a></span></span><span class="l"><a href="#318"> 318: </a></span><span class="l"><a href="#319"> 319: </a></span><span class="l"><a href="#320"> 320: </a></span><span class="l"><a href="#321"> 321: </a></span><span class="l"><a href="#322"> 322: </a></span><span class="l"><a href="#323"> 323: </a></span><span class="l"><a href="#324"> 324: </a></span><span class="l"><a href="#325"> 325: </a></span><span class="l"><a href="#326"> 326: </a></span><span class="l"><a href="#327"> 327: </a></span><span class="l"><a href="#328"> 328: </a></span><span class="l"><a href="#329"> 329: </a></span><span class="l"><a href="#330"> 330: </a></span><span class="l"><a href="#331"> 331: </a></span><span class="l"><a href="#332"> 332: </a></span><span class="l"><a href="#333"> 333: </a></span><span class="l"><a href="#334"> 334: </a></span><span class="l"><a href="#335"> 335: </a></span></span><span class="l"><a href="#336"> 336: </a></span></span><span class="l"><a href="#337"> 337: </a></span></span><span class="l"><a href="#338"> 338: </a></span><span class="l"><a href="#339"> 339: </a></span><span class="l"><a href="#340"> 340: </a></span><span class="l"><a href="#341"> 341: </a></span><span class="l"><a href="#342"> 342: </a></span><span class="l"><a href="#343"> 343: </a></span><span class="l"><a href="#344"> 344: </a></span><span class="l"><a href="#345"> 345: </a></span><span class="l"><a href="#346"> 346: </a></span><span class="l"><a href="#347"> 347: </a></span><span class="l"><a href="#348"> 348: </a></span><span class="l"><a href="#349"> 349: </a></span><span class="l"><a href="#350"> 350: </a></span><span class="l"><a href="#351"> 351: </a></span><span class="l"><a href="#352"> 352: </a></span><span class="l"><a href="#353"> 353: </a></span><span class="l"><a href="#354"> 354: </a></span><span class="l"><a href="#355"> 355: </a></span><span class="l"><a href="#356"> 356: </a></span><span class="l"><a href="#357"> 357: </a></span><span class="l"><a href="#358"> 358: </a></span><span class="l"><a href="#359"> 359: </a></span><span class="l"><a href="#360"> 360: </a></span><span class="l"><a href="#361"> 361: </a></span><span class="l"><a href="#362"> 362: </a></span><span class="l"><a href="#363"> 363: </a></span><span class="l"><a href="#364"> 364: </a></span><span class="l"><a href="#365"> 365: </a></span><span class="l"><a href="#366"> 366: </a></span><span class="l"><a href="#367"> 367: </a></span><span class="l"><a href="#368"> 368: </a></span><span class="l"><a href="#369"> 369: </a></span><span class="l"><a href="#370"> 370: </a></span></span><span class="l"><a href="#371"> 371: </a></span></span><span class="l"><a href="#372"> 372: </a></span></span><span class="l"><a href="#373"> 373: </a></span></span><span class="l"><a href="#374"> 374: </a></span></span><span class="l"><a href="#375"> 375: </a></span><span class="l"><a href="#376"> 376: </a></span><span class="l"><a href="#377"> 377: </a></span><span class="l"><a href="#378"> 378: </a></span><span class="l"><a href="#379"> 379: </a></span><span class="l"><a href="#380"> 380: </a></span><span class="l"><a href="#381"> 381: </a></span><span class="l"><a href="#382"> 382: </a></span><span class="l"><a href="#383"> 383: </a></span><span class="l"><a href="#384"> 384: </a></span><span class="l"><a href="#385"> 385: </a></span><span class="l"><a href="#386"> 386: </a></span><span class="l"><a href="#387"> 387: </a></span><span class="l"><a href="#388"> 388: </a></span><span class="l"><a href="#389"> 389: </a></span><span class="l"><a href="#390"> 390: </a></span><span class="l"><a href="#391"> 391: </a></span><span class="l"><a href="#392"> 392: </a></span><span class="l"><a href="#393"> 393: </a></span><span class="l"><a href="#394"> 394: </a></span><span class="l"><a href="#395"> 395: </a></span><span class="l"><a href="#396"> 396: </a></span><span class="l"><a href="#397"> 397: </a></span><span class="l"><a href="#398"> 398: </a></span><span class="l"><a href="#399"> 399: </a></span><span class="l"><a href="#400"> 400: </a></span><span class="l"><a href="#401"> 401: </a></span><span class="l"><a href="#402"> 402: </a></span><span class="l"><a href="#403"> 403: </a></span><span class="l"><a href="#404"> 404: </a></span><span class="l"><a href="#405"> 405: </a></span><span class="l"><a href="#406"> 406: </a></span><span class="l"><a href="#407"> 407: </a></span><span class="l"><a href="#408"> 408: </a></span><span class="l"><a href="#409"> 409: </a></span><span class="l"><a href="#410"> 410: </a></span><span class="l"><a href="#411"> 411: </a></span><span class="l"><a href="#412"> 412: </a></span></span><span class="l"><a href="#413"> 413: </a></span></span><span class="l"><a href="#414"> 414: </a></span></span><span class="l"><a href="#415"> 415: </a></span></span><span class="l"><a href="#416"> 416: </a></span></span><span class="l"><a href="#417"> 417: </a></span></span><span class="l"><a href="#418"> 418: </a></span></span><span class="l"><a href="#419"> 419: </a></span><span class="l"><a href="#420"> 420: </a></span><span class="l"><a href="#421"> 421: </a></span><span class="l"><a href="#422"> 422: </a></span><span class="l"><a href="#423"> 423: </a></span><span class="l"><a href="#424"> 424: </a></span><span class="l"><a href="#425"> 425: </a></span><span class="l"><a href="#426"> 426: </a></span><span class="l"><a href="#427"> 427: </a></span><span class="l"><a href="#428"> 428: </a></span><span class="l"><a href="#429"> 429: </a></span><span class="l"><a href="#430"> 430: </a></span><span class="l"><a href="#431"> 431: </a></span></span><span class="l"><a href="#432"> 432: </a></span></span><span class="l"><a href="#433"> 433: </a></span></span><span class="l"><a href="#434"> 434: </a></span></span><span class="l"><a href="#435"> 435: </a></span></span><span class="l"><a href="#436"> 436: </a></span><span class="l"><a href="#437"> 437: </a></span><span class="l"><a href="#438"> 438: </a></span><span class="l"><a href="#439"> 439: </a></span><span class="l"><a href="#440"> 440: </a></span><span class="l"><a href="#441"> 441: </a></span><span class="l"><a href="#442"> 442: </a></span><span class="l"><a href="#443"> 443: </a></span><span class="l"><a href="#444"> 444: </a></span><span class="l"><a href="#445"> 445: </a></span><span class="l"><a href="#446"> 446: </a></span><span class="l"><a href="#447"> 447: </a></span><span class="l"><a href="#448"> 448: </a></span><span class="l"><a href="#449"> 449: </a></span><span class="l"><a href="#450"> 450: </a></span></span><span class="l"><a href="#451"> 451: </a></span></span><span class="l"><a href="#452"> 452: </a></span><span class="l"><a href="#453"> 453: </a></span><span class="l"><a href="#454"> 454: </a></span><span class="l"><a href="#455"> 455: </a></span><span class="l"><a href="#456"> 456: </a></span><span class="l"><a href="#457"> 457: </a></span></span><span class="l"><a href="#458"> 458: </a></span></span><span class="l"><a href="#459"> 459: </a></span><span class="l"><a href="#460"> 460: </a></span><span class="l"><a href="#461"> 461: </a></span><span class="l"><a href="#462"> 462: </a></span><span class="l"><a href="#463"> 463: </a></span><span class="l"><a href="#464"> 464: </a></span></span><span class="l"><a href="#465"> 465: </a></span></span><span class="l"><a href="#466"> 466: </a></span><span class="l"><a href="#467"> 467: </a></span><span class="l"><a href="#468"> 468: </a></span><span class="l"><a href="#469"> 469: </a></span><span class="l"><a href="#470"> 470: </a></span><span class="l"><a href="#471"> 471: </a></span><span class="l"><a href="#472"> 472: </a></span><span class="l"><a href="#473"> 473: </a></span><span class="l"><a href="#474"> 474: </a></span><span class="l"><a href="#475"> 475: </a></span><span class="l"><a href="#476"> 476: </a></span><span class="l"><a href="#477"> 477: </a></span><span class="l"><a href="#478"> 478: </a></span><span class="l"><a href="#479"> 479: </a></span><span class="l"><a href="#480"> 480: </a></span><span class="l"><a href="#481"> 481: </a></span><span class="l"><a href="#482"> 482: </a></span><span class="l"><a href="#483"> 483: </a></span><span class="l"><a href="#484"> 484: </a></span><span class="l"><a href="#485"> 485: </a></span><span class="l"><a href="#486"> 486: </a></span><span class="l"><a href="#487"> 487: </a></span><span class="l"><a href="#488"> 488: </a></span></span><span class="l"><a href="#489"> 489: </a></span></span><span class="l"><a href="#490"> 490: </a></span></span><span class="l"><a href="#491"> 491: </a></span><span class="l"><a href="#492"> 492: </a></span><span class="l"><a href="#493"> 493: </a></span><span class="l"><a href="#494"> 494: </a></span><span class="l"><a href="#495"> 495: </a></span><span class="l"><a href="#496"> 496: </a></span><span class="l"><a href="#497"> 497: </a></span><span class="l"><a href="#498"> 498: </a></span><span class="l"><a href="#499"> 499: </a></span><span class="l"><a href="#500"> 500: </a></span><span class="l"><a href="#501"> 501: </a></span><span class="l"><a href="#502"> 502: </a></span><span class="l"><a href="#503"> 503: </a></span><span class="l"><a href="#504"> 504: </a></span><span class="l"><a href="#505"> 505: </a></span><span class="l"><a href="#506"> 506: </a></span><span class="l"><a href="#507"> 507: </a></span><span class="l"><a href="#508"> 508: </a></span></span><span class="l"><a href="#509"> 509: </a></span></span><span class="l"><a href="#510"> 510: </a></span></span><span class="l"><a href="#511"> 511: </a></span><span class="l"><a href="#512"> 512: </a></span><span class="l"><a href="#513"> 513: </a></span><span class="l"><a href="#514"> 514: </a></span><span class="l"><a href="#515"> 515: </a></span><span class="l"><a href="#516"> 516: </a></span><span class="l"><a href="#517"> 517: </a></span><span class="l"><a href="#518"> 518: </a></span><span class="l"><a href="#519"> 519: </a></span><span class="l"><a href="#520"> 520: </a></span></span><span class="l"><a href="#521"> 521: </a></span></span><span class="l"><a href="#522"> 522: </a></span><span class="l"><a href="#523"> 523: </a></span><span class="l"><a href="#524"> 524: </a></span><span class="l"><a href="#525"> 525: </a></span><span class="l"><a href="#526"> 526: </a></span><span class="l"><a href="#527"> 527: </a></span></span><span class="l"><a href="#528"> 528: </a></span></span><span class="l"><a href="#529"> 529: </a></span><span class="l"><a href="#530"> 530: </a></span><span class="l"><a href="#531"> 531: </a></span><span class="l"><a href="#532"> 532: </a></span><span class="l"><a href="#533"> 533: </a></span><span class="l"><a href="#534"> 534: </a></span></span><span class="l"><a href="#535"> 535: </a></span></span><span class="l"><a href="#536"> 536: </a></span><span class="l"><a href="#537"> 537: </a></span><span class="l"><a href="#538"> 538: </a></span><span class="l"><a href="#539"> 539: </a></span><span class="l"><a href="#540"> 540: </a></span><span class="l"><a href="#541"> 541: </a></span></span><span class="l"><a href="#542"> 542: </a></span></span><span class="l"><a href="#543"> 543: </a></span><span class="l"><a href="#544"> 544: </a></span><span class="l"><a href="#545"> 545: </a></span><span class="l"><a href="#546"> 546: </a></span><span class="l"><a href="#547"> 547: </a></span><span class="l"><a href="#548"> 548: </a></span></span><span class="l"><a href="#549"> 549: </a></span></span><span class="l"><a href="#550"> 550: </a></span><span class="l"><a href="#551"> 551: </a></span><span class="l"><a href="#552"> 552: </a></span><span class="l"><a href="#553"> 553: </a></span><span class="l"><a href="#554"> 554: </a></span><span class="l"><a href="#555"> 555: </a></span></span><span class="l"><a href="#556"> 556: </a></span></span><span class="l"><a href="#557"> 557: </a></span><span class="l"><a href="#558"> 558: </a></span><span class="l"><a href="#559"> 559: </a></span><span class="l"><a href="#560"> 560: </a></span><span class="l"><a href="#561"> 561: </a></span><span class="l"><a href="#562"> 562: </a></span><span class="l"><a href="#563"> 563: </a></span><span class="l"><a href="#564"> 564: </a></span><span class="l"><a href="#565"> 565: </a></span><span class="l"><a href="#566"> 566: </a></span><span class="l"><a href="#567"> 567: </a></span><span class="l"><a href="#568"> 568: </a></span><span class="l"><a href="#569"> 569: </a></span><span class="l"><a href="#570"> 570: </a></span><span class="l"><a href="#571"> 571: </a></span><span class="l"><a href="#572"> 572: </a></span><span class="l"><a href="#573"> 573: </a></span><span class="l"><a href="#574"> 574: </a></span><span class="l"><a href="#575"> 575: </a></span><span class="l"><a href="#576"> 576: </a></span><span class="l"><a href="#577"> 577: </a></span><span class="l"><a href="#578"> 578: </a></span><span class="l"><a href="#579"> 579: </a></span><span class="l"><a href="#580"> 580: </a></span></span><span class="l"><a href="#581"> 581: </a></span></span><span class="l"><a href="#582"> 582: </a></span></span><span class="l"><a href="#583"> 583: </a></span></span><span class="l"><a href="#584"> 584: </a></span></span><span class="l"><a href="#585"> 585: </a></span></span><span class="l"><a href="#586"> 586: </a></span></span><span class="l"><a href="#587"> 587: </a></span></span><span class="l"><a href="#588"> 588: </a></span><span class="l"><a href="#589"> 589: </a></span><span class="l"><a href="#590"> 590: </a></span><span class="l"><a href="#591"> 591: </a></span><span class="l"><a href="#592"> 592: </a></span><span class="l"><a href="#593"> 593: </a></span><span class="l"><a href="#594"> 594: </a></span><span class="l"><a href="#595"> 595: </a></span><span class="l"><a href="#596"> 596: </a></span><span class="l"><a href="#597"> 597: </a></span><span class="l"><a href="#598"> 598: </a></span></span><span class="l"><a href="#599"> 599: </a></span></span><span class="l"><a href="#600"> 600: </a></span></span><span class="l"><a href="#601"> 601: </a></span></span><span class="l"><a href="#602"> 602: </a></span></span><span class="l"><a href="#603"> 603: </a></span></span><span class="l"><a href="#604"> 604: </a></span></span><span class="l"><a href="#605"> 605: </a></span></span><span class="l"><a href="#606"> 606: </a></span></span><span class="l"><a href="#607"> 607: </a></span></span><span class="l"><a href="#608"> 608: </a></span><span class="l"><a href="#609"> 609: </a></span><span class="l"><a href="#610"> 610: </a></span><span class="l"><a href="#611"> 611: </a></span><span class="l"><a href="#612"> 612: </a></span><span class="l"><a href="#613"> 613: </a></span><span class="l"><a href="#614"> 614: </a></span><span class="l"><a href="#615"> 615: </a></span><span class="l"><a href="#616"> 616: </a></span><span class="l"><a href="#617"> 617: </a></span><span class="l"><a href="#618"> 618: </a></span><span class="l"><a href="#619"> 619: </a></span><span class="l"><a href="#620"> 620: </a></span><span class="l"><a href="#621"> 621: </a></span><span class="l"><a href="#622"> 622: </a></span><span class="l"><a href="#623"> 623: </a></span><span class="l"><a href="#624"> 624: </a></span><span class="l"><a href="#625"> 625: </a></span><span class="l"><a href="#626"> 626: </a></span><span class="l"><a href="#627"> 627: </a></span><span class="l"><a href="#628"> 628: </a></span><span class="l"><a href="#629"> 629: </a></span><span class="l"><a href="#630"> 630: </a></span><span class="l"><a href="#631"> 631: </a></span><span class="l"><a href="#632"> 632: </a></span><span class="l"><a href="#633"> 633: </a></span><span class="l"><a href="#634"> 634: </a></span><span class="l"><a href="#635"> 635: </a></span><span class="l"><a href="#636"> 636: </a></span><span class="l"><a href="#637"> 637: </a></span><span class="l"><a href="#638"> 638: </a></span><span class="l"><a href="#639"> 639: </a></span><span class="l"><a href="#640"> 640: </a></span><span class="l"><a href="#641"> 641: </a></span><span class="l"><a href="#642"> 642: </a></span><span class="l"><a href="#643"> 643: </a></span><span class="l"><a href="#644"> 644: </a></span><span class="l"><a href="#645"> 645: </a></span><span class="l"><a href="#646"> 646: </a></span><span class="l"><a href="#647"> 647: </a></span><span class="l"><a href="#648"> 648: </a></span><span class="l"><a href="#649"> 649: </a></span><span class="l"><a href="#650"> 650: </a></span><span class="l"><a href="#651"> 651: </a></span><span class="l"><a href="#652"> 652: </a></span><span class="l"><a href="#653"> 653: </a></span><span class="l"><a href="#654"> 654: </a></span><span class="l"><a href="#655"> 655: </a></span><span class="l"><a href="#656"> 656: </a></span><span class="l"><a href="#657"> 657: </a></span><span class="l"><a href="#658"> 658: </a></span><span class="l"><a href="#659"> 659: </a></span><span class="l"><a href="#660"> 660: </a></span><span class="l"><a href="#661"> 661: </a></span><span class="l"><a href="#662"> 662: </a></span><span class="l"><a href="#663"> 663: </a></span><span class="l"><a href="#664"> 664: </a></span><span class="l"><a href="#665"> 665: </a></span><span class="l"><a href="#666"> 666: </a></span><span class="l"><a href="#667"> 667: </a></span><span class="l"><a href="#668"> 668: </a></span><span class="l"><a href="#669"> 669: </a></span><span class="l"><a href="#670"> 670: </a></span><span class="l"><a href="#671"> 671: </a></span><span class="l"><a href="#672"> 672: </a></span><span class="l"><a href="#673"> 673: </a></span><span class="l"><a href="#674"> 674: </a></span><span class="l"><a href="#675"> 675: </a></span><span class="l"><a href="#676"> 676: </a></span><span class="l"><a href="#677"> 677: </a></span><span class="l"><a href="#678"> 678: </a></span><span class="l"><a href="#679"> 679: </a></span><span class="l"><a href="#680"> 680: </a></span><span class="l"><a href="#681"> 681: </a></span><span class="l"><a href="#682"> 682: </a></span><span class="l"><a href="#683"> 683: </a></span><span class="l"><a href="#684"> 684: </a></span><span class="l"><a href="#685"> 685: </a></span><span class="l"><a href="#686"> 686: </a></span><span class="l"><a href="#687"> 687: </a></span><span class="l"><a href="#688"> 688: </a></span><span class="l"><a href="#689"> 689: </a></span><span class="l"><a href="#690"> 690: </a></span><span class="l"><a href="#691"> 691: </a></span><span class="l"><a href="#692"> 692: </a></span><span class="l"><a href="#693"> 693: </a></span><span class="l"><a href="#694"> 694: </a></span><span class="l"><a href="#695"> 695: </a></span><span class="l"><a href="#696"> 696: </a></span><span class="l"><a href="#697"> 697: </a></span><span class="l"><a href="#698"> 698: </a></span><span class="l"><a href="#699"> 699: </a></span><span class="l"><a href="#700"> 700: </a></span><span class="l"><a href="#701"> 701: </a></span><span class="l"><a href="#702"> 702: </a></span><span class="l"><a href="#703"> 703: </a></span><span class="l"><a href="#704"> 704: </a></span><span class="l"><a href="#705"> 705: </a></span><span class="l"><a href="#706"> 706: </a></span><span class="l"><a href="#707"> 707: </a></span><span class="l"><a href="#708"> 708: </a></span><span class="l"><a href="#709"> 709: </a></span><span class="l"><a href="#710"> 710: </a></span><span class="l"><a href="#711"> 711: </a></span><span class="l"><a href="#712"> 712: </a></span><span class="l"><a href="#713"> 713: </a></span><span class="l"><a href="#714"> 714: </a></span><span class="l"><a href="#715"> 715: </a></span><span class="l"><a href="#716"> 716: </a></span><span class="l"><a href="#717"> 717: </a></span><span class="l"><a href="#718"> 718: </a></span><span class="l"><a href="#719"> 719: </a></span><span class="l"><a href="#720"> 720: </a></span><span class="l"><a href="#721"> 721: </a></span><span class="l"><a href="#722"> 722: </a></span><span class="l"><a href="#723"> 723: </a></span><span class="l"><a href="#724"> 724: </a></span><span class="l"><a href="#725"> 725: </a></span><span class="l"><a href="#726"> 726: </a></span><span class="l"><a href="#727"> 727: </a></span><span class="l"><a href="#728"> 728: </a></span><span class="l"><a href="#729"> 729: </a></span></span><span class="l"><a href="#730"> 730: </a></span></span><span class="l"><a href="#731"> 731: </a></span></span><span class="l"><a href="#732"> 732: </a></span></span><span class="l"><a href="#733"> 733: </a></span></span><span class="l"><a href="#734"> 734: </a></span></span><span class="l"><a href="#735"> 735: </a></span><span class="l"><a href="#736"> 736: </a></span><span class="l"><a href="#737"> 737: </a></span><span class="l"><a href="#738"> 738: </a></span><span class="l"><a href="#739"> 739: </a></span><span class="l"><a href="#740"> 740: </a></span><span class="l"><a href="#741"> 741: </a></span><span class="l"><a href="#742"> 742: </a></span><span class="l"><a href="#743"> 743: </a></span><span class="l"><a href="#744"> 744: </a></span></span><span class="l"><a href="#745"> 745: </a></span></span><span class="l"><a href="#746"> 746: </a></span></span><span class="l"><a href="#747"> 747: </a></span></span><span class="l"><a href="#748"> 748: </a></span></span><span class="l"><a href="#749"> 749: </a></span></span><span class="l"><a href="#750"> 750: </a></span></span><span class="l"><a href="#751"> 751: </a></span><span class="l"><a href="#752"> 752: </a></span><span class="l"><a href="#753"> 753: </a></span><span class="l"><a href="#754"> 754: </a></span><span class="l"><a href="#755"> 755: </a></span><span class="l"><a href="#756"> 756: </a></span><span class="l"><a href="#757"> 757: </a></span><span class="l"><a href="#758"> 758: </a></span><span class="l"><a href="#759"> 759: </a></span><span class="l"><a href="#760"> 760: </a></span><span class="l"><a href="#761"> 761: </a></span><span class="l"><a href="#762"> 762: </a></span><span class="l"><a href="#763"> 763: </a></span></span><span class="l"><a href="#764"> 764: </a></span></span><span class="l"><a href="#765"> 765: </a></span></span><span class="l"><a href="#766"> 766: </a></span></span><span class="l"><a href="#767"> 767: </a></span></span><span class="l"><a href="#768"> 768: </a></span><span class="l"><a href="#769"> 769: </a></span><span class="l"><a href="#770"> 770: </a></span><span class="l"><a href="#771"> 771: </a></span><span class="l"><a href="#772"> 772: </a></span><span class="l"><a href="#773"> 773: </a></span><span class="l"><a href="#774"> 774: </a></span><span class="l"><a href="#775"> 775: </a></span><span class="l"><a href="#776"> 776: </a></span><span class="l"><a href="#777"> 777: </a></span><span class="l"><a href="#778"> 778: </a></span><span class="l"><a href="#779"> 779: </a></span><span class="l"><a href="#780"> 780: </a></span><span class="l"><a href="#781"> 781: </a></span><span class="l"><a href="#782"> 782: </a></span><span class="l"><a href="#783"> 783: </a></span><span class="l"><a href="#784"> 784: </a></span></span><span class="l"><a href="#785"> 785: </a></span></span><span class="l"><a href="#786"> 786: </a></span></span><span class="l"><a href="#787"> 787: </a></span></span><span class="l"><a href="#788"> 788: </a></span><span class="l"><a href="#789"> 789: </a></span><span class="l"><a href="#790"> 790: </a></span><span class="l"><a href="#791"> 791: </a></span><span class="l"><a href="#792"> 792: </a></span><span class="l"><a href="#793"> 793: </a></span><span class="l"><a href="#794"> 794: </a></span><span class="l"><a href="#795"> 795: </a></span><span class="l"><a href="#796"> 796: </a></span><span class="l"><a href="#797"> 797: </a></span><span class="l"><a href="#798"> 798: </a></span><span class="l"><a href="#799"> 799: </a></span><span class="l"><a href="#800"> 800: </a></span></span><span class="l"><a href="#801"> 801: </a></span></span><span class="l"><a href="#802"> 802: </a></span></span><span class="l"><a href="#803"> 803: </a></span></span><span class="l"><a href="#804"> 804: </a></span><span class="l"><a href="#805"> 805: </a></span><span class="l"><a href="#806"> 806: </a></span><span class="l"><a href="#807"> 807: </a></span><span class="l"><a href="#808"> 808: </a></span><span class="l"><a href="#809"> 809: </a></span><span class="l"><a href="#810"> 810: </a></span><span class="l"><a href="#811"> 811: </a></span><span class="l"><a href="#812"> 812: </a></span><span class="l"><a href="#813"> 813: </a></span><span class="l"><a href="#814"> 814: </a></span><span class="l"><a href="#815"> 815: </a></span><span class="l"><a href="#816"> 816: </a></span><span class="l"><a href="#817"> 817: </a></span><span class="l"><a href="#818"> 818: </a></span><span class="l"><a href="#819"> 819: </a></span><span class="l"><a href="#820"> 820: </a></span><span class="l"><a href="#821"> 821: </a></span><span class="l"><a href="#822"> 822: </a></span><span class="l"><a href="#823"> 823: </a></span><span class="l"><a href="#824"> 824: </a></span><span class="l"><a href="#825"> 825: </a></span><span class="l"><a href="#826"> 826: </a></span><span class="l"><a href="#827"> 827: </a></span><span class="l"><a href="#828"> 828: </a></span><span class="l"><a href="#829"> 829: </a></span><span class="l"><a href="#830"> 830: </a></span><span class="l"><a href="#831"> 831: </a></span><span class="l"><a href="#832"> 832: </a></span><span class="l"><a href="#833"> 833: </a></span><span class="l"><a href="#834"> 834: </a></span><span class="l"><a href="#835"> 835: </a></span></span><span class="l"><a href="#836"> 836: </a></span></span><span class="l"><a href="#837"> 837: </a></span></span><span class="l"><a href="#838"> 838: </a></span></span><span class="l"><a href="#839"> 839: </a></span></span><span class="l"><a href="#840"> 840: </a></span></span><span class="l"><a href="#841"> 841: </a></span><span class="l"><a href="#842"> 842: </a></span><span class="l"><a href="#843"> 843: </a></span><span class="l"><a href="#844"> 844: </a></span><span class="l"><a href="#845"> 845: </a></span><span class="l"><a href="#846"> 846: </a></span><span class="l"><a href="#847"> 847: </a></span><span class="l"><a href="#848"> 848: </a></span><span class="l"><a href="#849"> 849: </a></span><span class="l"><a href="#850"> 850: </a></span><span class="l"><a href="#851"> 851: </a></span></span><span class="l"><a href="#852"> 852: </a></span></span><span class="l"><a href="#853"> 853: </a></span></span><span class="l"><a href="#854"> 854: </a></span></span><span class="l"><a href="#855"> 855: </a></span></span><span class="l"><a href="#856"> 856: </a></span><span class="l"><a href="#857"> 857: </a></span><span class="l"><a href="#858"> 858: </a></span><span class="l"><a href="#859"> 859: </a></span><span class="l"><a href="#860"> 860: </a></span><span class="l"><a href="#861"> 861: </a></span><span class="l"><a href="#862"> 862: </a></span><span class="l"><a href="#863"> 863: </a></span><span class="l"><a href="#864"> 864: </a></span><span class="l"><a href="#865"> 865: </a></span><span class="l"><a href="#866"> 866: </a></span><span class="l"><a href="#867"> 867: </a></span><span class="l"><a href="#868"> 868: </a></span><span class="l"><a href="#869"> 869: </a></span><span class="l"><a href="#870"> 870: </a></span><span class="l"><a href="#871"> 871: </a></span><span class="l"><a href="#872"> 872: </a></span><span class="l"><a href="#873"> 873: </a></span><span class="l"><a href="#874"> 874: </a></span><span class="l"><a href="#875"> 875: </a></span><span class="l"><a href="#876"> 876: </a></span><span class="l"><a href="#877"> 877: </a></span><span class="l"><a href="#878"> 878: </a></span><span class="l"><a href="#879"> 879: </a></span><span class="l"><a href="#880"> 880: </a></span><span class="l"><a href="#881"> 881: </a></span><span class="l"><a href="#882"> 882: </a></span><span class="l"><a href="#883"> 883: </a></span></span><span class="l"><a href="#884"> 884: </a></span></span><span class="l"><a href="#885"> 885: </a></span></span><span class="l"><a href="#886"> 886: </a></span></span><span class="l"><a href="#887"> 887: </a></span><span class="l"><a href="#888"> 888: </a></span></span><span class="l"><a href="#889"> 889: </a></span><span class="l"><a href="#890"> 890: </a></span><span class="l"><a href="#891"> 891: </a></span><span class="l"><a href="#892"> 892: </a></span><span class="l"><a href="#893"> 893: </a></span><span class="l"><a href="#894"> 894: </a></span><span class="l"><a href="#895"> 895: </a></span><span class="l"><a href="#896"> 896: </a></span><span class="l"><a href="#897"> 897: </a></span><span class="l"><a href="#898"> 898: </a></span><span class="l"><a href="#899"> 899: </a></span></span><span class="l"><a href="#900"> 900: </a></span></span><span class="l"><a href="#901"> 901: </a></span><span class="l"><a href="#902"> 902: </a></span><span class="l"><a href="#903"> 903: </a></span></span><span class="l"><a href="#904"> 904: </a></span><span class="l"><a href="#905"> 905: </a></span><span class="l"><a href="#906"> 906: </a></span><span class="l"><a href="#907"> 907: </a></span><span class="l"><a href="#908"> 908: </a></span><span class="l"><a href="#909"> 909: </a></span><span class="l"><a href="#910"> 910: </a></span><span class="l"><a href="#911"> 911: </a></span><span class="l"><a href="#912"> 912: </a></span><span class="l"><a href="#913"> 913: </a></span><span class="l"><a href="#914"> 914: </a></span><span class="l"><a href="#915"> 915: </a></span><span class="l"><a href="#916"> 916: </a></span><span class="l"><a href="#917"> 917: </a></span><span class="l"><a href="#918"> 918: </a></span><span class="l"><a href="#919"> 919: </a></span><span class="l"><a href="#920"> 920: </a></span></span><span class="l"><a href="#921"> 921: </a></span></span><span class="l"><a href="#922"> 922: </a></span></span><span class="l"><a href="#923"> 923: </a></span><span class="l"><a href="#924"> 924: </a></span><span class="l"><a href="#925"> 925: </a></span><span class="l"><a href="#926"> 926: </a></span><span class="l"><a href="#927"> 927: </a></span><span class="l"><a href="#928"> 928: </a></span><span class="l"><a href="#929"> 929: </a></span><span class="l"><a href="#930"> 930: </a></span><span class="l"><a href="#931"> 931: </a></span></span><span class="l"><a href="#932"> 932: </a></span></span><span class="l"><a href="#933"> 933: </a></span></span><span class="l"><a href="#934"> 934: </a></span></span><span class="l"><a href="#935"> 935: </a></span></span><span class="l"><a href="#936"> 936: </a></span><span class="l"><a href="#937"> 937: </a></span><span class="l"><a href="#938"> 938: </a></span><span class="l"><a href="#939"> 939: </a></span><span class="l"><a href="#940"> 940: </a></span><span class="l"><a href="#941"> 941: </a></span><span class="l"><a href="#942"> 942: </a></span><span class="l"><a href="#943"> 943: </a></span><span class="l"><a href="#944"> 944: </a></span><span class="l"><a href="#945"> 945: </a></span><span class="l"><a href="#946"> 946: </a></span><span class="l"><a href="#947"> 947: </a></span><span class="l"><a href="#948"> 948: </a></span><span class="l"><a href="#949"> 949: </a></span><span class="l"><a href="#950"> 950: </a></span><span class="l"><a href="#951"> 951: </a></span><span class="l"><a href="#952"> 952: </a></span><span class="l"><a href="#953"> 953: </a></span><span class="l"><a href="#954"> 954: </a></span><span class="l"><a href="#955"> 955: </a></span><span class="l"><a href="#956"> 956: </a></span><span class="l"><a href="#957"> 957: </a></span><span class="l"><a href="#958"> 958: </a></span><span class="l"><a href="#959"> 959: </a></span></span><span class="l"><a href="#960"> 960: </a></span></span><span class="l"><a href="#961"> 961: </a></span><span class="l"><a href="#962"> 962: </a></span><span class="l"><a href="#963"> 963: </a></span><span class="l"><a href="#964"> 964: </a></span><span class="l"><a href="#965"> 965: </a></span><span class="l"><a href="#966"> 966: </a></span><span class="l"><a href="#967"> 967: </a></span><span class="l"><a href="#968"> 968: </a></span><span class="l"><a href="#969"> 969: </a></span><span class="l"><a href="#970"> 970: </a></span><span class="l"><a href="#971"> 971: </a></span><span class="l"><a href="#972"> 972: </a></span></span><span class="l"><a href="#973"> 973: </a></span></span><span class="l"><a href="#974"> 974: </a></span></span><span class="l"><a href="#975"> 975: </a></span><span class="l"><a href="#976"> 976: </a></span><span class="l"><a href="#977"> 977: </a></span><span class="l"><a href="#978"> 978: </a></span><span class="l"><a href="#979"> 979: </a></span><span class="l"><a href="#980"> 980: </a></span><span class="l"><a href="#981"> 981: </a></span><span class="l"><a href="#982"> 982: </a></span><span class="l"><a href="#983"> 983: </a></span><span class="l"><a href="#984"> 984: </a></span><span class="l"><a href="#985"> 985: </a></span><span class="l"><a href="#986"> 986: </a></span><span class="l"><a href="#987"> 987: </a></span><span class="l"><a href="#988"> 988: </a></span><span class="l"><a href="#989"> 989: </a></span><span class="l"><a href="#990"> 990: </a></span><span class="l"><a href="#991"> 991: </a></span><span class="l"><a href="#992"> 992: </a></span><span class="l"><a href="#993"> 993: </a></span><span class="l"><a href="#994"> 994: </a></span><span class="l"><a href="#995"> 995: </a></span><span class="l"><a href="#996"> 996: </a></span><span class="l"><a href="#997"> 997: </a></span><span class="l"><a href="#998"> 998: </a></span><span class="l"><a href="#999"> 999: </a></span><span class="l"><a href="#1000">1000: </a></span><span class="l"><a href="#1001">1001: </a></span><span class="l"><a href="#1002">1002: </a></span><span class="l"><a href="#1003">1003: </a></span><span class="l"><a href="#1004">1004: </a></span><span class="l"><a href="#1005">1005: </a></span><span class="l"><a href="#1006">1006: </a></span><span class="l"><a href="#1007">1007: </a></span><span class="l"><a href="#1008">1008: </a></span><span class="l"><a href="#1009">1009: </a></span><span class="l"><a href="#1010">1010: </a></span></span><span class="l"><a href="#1011">1011: </a></span></span><span class="l"><a href="#1012">1012: </a></span></span><span class="l"><a href="#1013">1013: </a></span><span class="l"><a href="#1014">1014: </a></span><span class="l"><a href="#1015">1015: </a></span><span class="l"><a href="#1016">1016: </a></span><span class="l"><a href="#1017">1017: </a></span><span class="l"><a href="#1018">1018: </a></span><span class="l"><a href="#1019">1019: </a></span><span class="l"><a href="#1020">1020: </a></span><span class="l"><a href="#1021">1021: </a></span><span class="l"><a href="#1022">1022: </a></span><span class="l"><a href="#1023">1023: </a></span><span class="l"><a href="#1024">1024: </a></span><span class="l"><a href="#1025">1025: </a></span><span class="l"><a href="#1026">1026: </a></span><span class="l"><a href="#1027">1027: </a></span><span class="l"><a href="#1028">1028: </a></span><span class="l"><a href="#1029">1029: </a></span></span><span class="l"><a href="#1030">1030: </a></span></span><span class="l"><a href="#1031">1031: </a></span><span class="l"><a href="#1032">1032: </a></span><span class="l"><a href="#1033">1033: </a></span><span class="l"><a href="#1034">1034: </a></span><span class="l"><a href="#1035">1035: </a></span><span class="l"><a href="#1036">1036: </a></span><span class="l"><a href="#1037">1037: </a></span><span class="l"><a href="#1038">1038: </a></span><span class="l"><a href="#1039">1039: </a></span><span class="l"><a href="#1040">1040: </a></span><span class="l"><a href="#1041">1041: </a></span><span class="l"><a href="#1042">1042: </a></span><span class="l"><a href="#1043">1043: </a></span><span class="l"><a href="#1044">1044: </a></span><span class="l"><a href="#1045">1045: </a></span><span class="l"><a href="#1046">1046: </a></span><span class="l"><a href="#1047">1047: </a></span><span class="l"><a href="#1048">1048: </a></span><span class="l"><a href="#1049">1049: </a></span><span class="l"><a href="#1050">1050: </a></span><span class="l"><a href="#1051">1051: </a></span><span class="l"><a href="#1052">1052: </a></span><span class="l"><a href="#1053">1053: </a></span><span class="l"><a href="#1054">1054: </a></span><span class="l"><a href="#1055">1055: </a></span><span class="l"><a href="#1056">1056: </a></span><span class="l"><a href="#1057">1057: </a></span><span class="l"><a href="#1058">1058: </a></span><span class="l"><a href="#1059">1059: </a></span><span class="l"><a href="#1060">1060: </a></span></span><span class="l"><a href="#1061">1061: </a></span></span><span class="l"><a href="#1062">1062: </a></span></span><span class="l"><a href="#1063">1063: </a></span></span><span class="l"><a href="#1064">1064: </a></span></span><span class="l"><a href="#1065">1065: </a></span></span><span class="l"><a href="#1066">1066: </a></span></span><span class="l"><a href="#1067">1067: </a></span><span class="l"><a href="#1068">1068: </a></span><span class="l"><a href="#1069">1069: </a></span><span class="l"><a href="#1070">1070: </a></span><span class="l"><a href="#1071">1071: </a></span><span class="l"><a href="#1072">1072: </a></span><span class="l"><a href="#1073">1073: </a></span><span class="l"><a href="#1074">1074: </a></span><span class="l"><a href="#1075">1075: </a></span><span class="l"><a href="#1076">1076: </a></span><span class="l"><a href="#1077">1077: </a></span><span class="l"><a href="#1078">1078: </a></span><span class="l"><a href="#1079">1079: </a></span><span class="l"><a href="#1080">1080: </a></span><span class="l"><a href="#1081">1081: </a></span><span class="l"><a href="#1082">1082: </a></span><span class="l"><a href="#1083">1083: </a></span><span class="l"><a href="#1084">1084: </a></span><span class="l"><a href="#1085">1085: </a></span><span class="l"><a href="#1086">1086: </a></span><span class="l"><a href="#1087">1087: </a></span><span class="l"><a href="#1088">1088: </a></span><span class="l"><a href="#1089">1089: </a></span><span class="l"><a href="#1090">1090: </a></span><span class="l"><a href="#1091">1091: </a></span><span class="l"><a href="#1092">1092: </a></span><span class="l"><a href="#1093">1093: </a></span><span class="l"><a href="#1094">1094: </a></span><span class="l"><a href="#1095">1095: </a></span><span class="l"><a href="#1096">1096: </a></span><span class="l"><a href="#1097">1097: </a></span><span class="l"><a href="#1098">1098: </a></span><span class="l"><a href="#1099">1099: </a></span><span class="l"><a href="#1100">1100: </a></span><span class="l"><a href="#1101">1101: </a></span><span class="l"><a href="#1102">1102: </a></span><span class="l"><a href="#1103">1103: </a></span><span class="l"><a href="#1104">1104: </a></span><span class="l"><a href="#1105">1105: </a></span><span class="l"><a href="#1106">1106: </a></span><span class="l"><a href="#1107">1107: </a></span><span class="l"><a href="#1108">1108: </a></span><span class="l"><a href="#1109">1109: </a></span><span class="l"><a href="#1110">1110: </a></span><span class="l"><a href="#1111">1111: </a></span><span class="l"><a href="#1112">1112: </a></span><span class="l"><a href="#1113">1113: </a></span><span class="l"><a href="#1114">1114: </a></span><span class="l"><a href="#1115">1115: </a></span><span class="l"><a href="#1116">1116: </a></span><span class="l"><a href="#1117">1117: </a></span></span><span class="l"><a href="#1118">1118: </a></span></span><span class="l"><a href="#1119">1119: </a></span></span><span class="l"><a href="#1120">1120: </a></span></span><span class="l"><a href="#1121">1121: </a></span><span class="l"><a href="#1122">1122: </a></span><span class="l"><a href="#1123">1123: </a></span><span class="l"><a href="#1124">1124: </a></span><span class="l"><a href="#1125">1125: </a></span><span class="l"><a href="#1126">1126: </a></span><span class="l"><a href="#1127">1127: </a></span><span class="l"><a href="#1128">1128: </a></span><span class="l"><a href="#1129">1129: </a></span><span class="l"><a href="#1130">1130: </a></span><span class="l"><a href="#1131">1131: </a></span><span class="l"><a href="#1132">1132: </a></span><span class="l"><a href="#1133">1133: </a></span><span class="l"><a href="#1134">1134: </a></span><span class="l"><a href="#1135">1135: </a></span><span class="l"><a href="#1136">1136: </a></span><span class="l"><a href="#1137">1137: </a></span><span class="l"><a href="#1138">1138: </a></span><span class="l"><a href="#1139">1139: </a></span><span class="l"><a href="#1140">1140: </a></span><span class="l"><a href="#1141">1141: </a></span><span class="l"><a href="#1142">1142: </a></span><span class="l"><a href="#1143">1143: </a></span><span class="l"><a href="#1144">1144: </a></span><span class="l"><a href="#1145">1145: </a></span><span class="l"><a href="#1146">1146: </a></span><span class="l"><a href="#1147">1147: </a></span><span class="l"><a href="#1148">1148: </a></span><span class="l"><a href="#1149">1149: </a></span><span class="l"><a href="#1150">1150: </a></span><span class="l"><a href="#1151">1151: </a></span><span class="l"><a href="#1152">1152: </a></span><span class="l"><a href="#1153">1153: </a></span><span class="l"><a href="#1154">1154: </a></span><span class="l"><a href="#1155">1155: </a></span><span class="l"><a href="#1156">1156: </a></span><span class="l"><a href="#1157">1157: </a></span><span class="l"><a href="#1158">1158: </a></span><span class="l"><a href="#1159">1159: </a></span><span class="l"><a href="#1160">1160: </a></span><span class="l"><a href="#1161">1161: </a></span><span class="l"><a href="#1162">1162: </a></span><span class="l"><a href="#1163">1163: </a></span><span class="l"><a href="#1164">1164: </a></span><span class="l"><a href="#1165">1165: </a></span><span class="l"><a href="#1166">1166: </a></span><span class="l"><a href="#1167">1167: </a></span><span class="l"><a href="#1168">1168: </a></span><span class="l"><a href="#1169">1169: </a></span><span class="l"><a href="#1170">1170: </a></span><span class="l"><a href="#1171">1171: </a></span><span class="l"><a href="#1172">1172: </a></span><span class="l"><a href="#1173">1173: </a></span></span><span class="l"><a href="#1174">1174: </a></span></span><span class="l"><a href="#1175">1175: </a></span></span><span class="l"><a href="#1176">1176: </a></span></span><span class="l"><a href="#1177">1177: </a></span><span class="l"><a href="#1178">1178: </a></span><span class="l"><a href="#1179">1179: </a></span><span class="l"><a href="#1180">1180: </a></span><span class="l"><a href="#1181">1181: </a></span><span class="l"><a href="#1182">1182: </a></span><span class="l"><a href="#1183">1183: </a></span><span class="l"><a href="#1184">1184: </a></span><span class="l"><a href="#1185">1185: </a></span><span class="l"><a href="#1186">1186: </a></span><span class="l"><a href="#1187">1187: </a></span><span class="l"><a href="#1188">1188: </a></span><span class="l"><a href="#1189">1189: </a></span><span class="l"><a href="#1190">1190: </a></span><span class="l"><a href="#1191">1191: </a></span><span class="l"><a href="#1192">1192: </a></span><span class="l"><a href="#1193">1193: </a></span><span class="l"><a href="#1194">1194: </a></span><span class="l"><a href="#1195">1195: </a></span></span><span class="l"><a href="#1196">1196: </a></span></span><span class="l"><a href="#1197">1197: </a></span></span><span class="l"><a href="#1198">1198: </a></span><span class="l"><a href="#1199">1199: </a></span><span class="l"><a href="#1200">1200: </a></span><span class="l"><a href="#1201">1201: </a></span><span class="l"><a href="#1202">1202: </a></span><span class="l"><a href="#1203">1203: </a></span><span class="l"><a href="#1204">1204: </a></span><span class="l"><a href="#1205">1205: </a></span><span class="l"><a href="#1206">1206: </a></span><span class="l"><a href="#1207">1207: </a></span><span class="l"><a href="#1208">1208: </a></span><span class="l"><a href="#1209">1209: </a></span></span><span class="l"><a href="#1210">1210: </a></span></span><span class="l"><a href="#1211">1211: </a></span></span><span class="l"><a href="#1212">1212: </a></span></span><span class="l"><a href="#1213">1213: </a></span></span><span class="l"><a href="#1214">1214: </a></span><span class="l"><a href="#1215">1215: </a></span><span class="l"><a href="#1216">1216: </a></span><span class="l"><a href="#1217">1217: </a></span><span class="l"><a href="#1218">1218: </a></span><span class="l"><a href="#1219">1219: </a></span><span class="l"><a href="#1220">1220: </a></span><span class="l"><a href="#1221">1221: </a></span><span class="l"><a href="#1222">1222: </a></span><span class="l"><a href="#1223">1223: </a></span><span class="l"><a href="#1224">1224: </a></span><span class="l"><a href="#1225">1225: </a></span><span class="l"><a href="#1226">1226: </a></span><span class="l"><a href="#1227">1227: </a></span><span class="l"><a href="#1228">1228: </a></span><span class="l"><a href="#1229">1229: </a></span><span class="l"><a href="#1230">1230: </a></span><span class="l"><a href="#1231">1231: </a></span><span class="l"><a href="#1232">1232: </a></span><span class="l"><a href="#1233">1233: </a></span><span class="l"><a href="#1234">1234: </a></span><span class="l"><a href="#1235">1235: </a></span><span class="l"><a href="#1236">1236: </a></span><span class="l"><a href="#1237">1237: </a></span><span class="l"><a href="#1238">1238: </a></span><span class="l"><a href="#1239">1239: </a></span><span class="l"><a href="#1240">1240: </a></span></span><span class="l"><a href="#1241">1241: </a></span></span><span class="l"><a href="#1242">1242: </a></span></span><span class="l"><a href="#1243">1243: </a></span></span><span class="l"><a href="#1244">1244: </a></span></span><span class="l"><a href="#1245">1245: </a></span></span><span class="l"><a href="#1246">1246: </a></span><span class="l"><a href="#1247">1247: </a></span><span class="l"><a href="#1248">1248: </a></span><span class="l"><a href="#1249">1249: </a></span><span class="l"><a href="#1250">1250: </a></span><span class="l"><a href="#1251">1251: </a></span><span class="l"><a href="#1252">1252: </a></span><span class="l"><a href="#1253">1253: </a></span><span class="l"><a href="#1254">1254: </a></span><span class="l"><a href="#1255">1255: </a></span><span class="l"><a href="#1256">1256: </a></span><span class="l"><a href="#1257">1257: </a></span><span class="l"><a href="#1258">1258: </a></span><span class="l"><a href="#1259">1259: </a></span><span class="l"><a href="#1260">1260: </a></span><span class="l"><a href="#1261">1261: </a></span><span class="l"><a href="#1262">1262: </a></span></span><span class="l"><a href="#1263">1263: </a></span></span><span class="l"><a href="#1264">1264: </a></span></span><span class="l"><a href="#1265">1265: </a></span></span><span class="l"><a href="#1266">1266: </a></span><span class="l"><a href="#1267">1267: </a></span><span class="l"><a href="#1268">1268: </a></span><span class="l"><a href="#1269">1269: </a></span><span class="l"><a href="#1270">1270: </a></span><span class="l"><a href="#1271">1271: </a></span><span class="l"><a href="#1272">1272: </a></span><span class="l"><a href="#1273">1273: </a></span><span class="l"><a href="#1274">1274: </a></span><span class="l"><a href="#1275">1275: </a></span></span><span class="l"><a href="#1276">1276: </a></span></span><span class="l"><a href="#1277">1277: </a></span></span><span class="l"><a href="#1278">1278: </a></span></span><span class="l"><a href="#1279">1279: </a></span><span class="l"><a href="#1280">1280: </a></span><span class="l"><a href="#1281">1281: </a></span><span class="l"><a href="#1282">1282: </a></span><span class="l"><a href="#1283">1283: </a></span><span class="l"><a href="#1284">1284: </a></span><span class="l"><a href="#1285">1285: </a></span><span class="l"><a href="#1286">1286: </a></span><span class="l"><a href="#1287">1287: </a></span><span class="l"><a href="#1288">1288: </a></span><span class="l"><a href="#1289">1289: </a></span><span class="l"><a href="#1290">1290: </a></span><span class="l"><a href="#1291">1291: </a></span></span><span class="l"><a href="#1292">1292: </a></span></span><span class="l"><a href="#1293">1293: </a></span></span><span class="l"><a href="#1294">1294: </a></span></span><span class="l"><a href="#1295">1295: </a></span><span class="l"><a href="#1296">1296: </a></span><span class="l"><a href="#1297">1297: </a></span><span class="l"><a href="#1298">1298: </a></span><span class="l"><a href="#1299">1299: </a></span><span class="l"><a href="#1300">1300: </a></span><span class="l"><a href="#1301">1301: </a></span><span class="l"><a href="#1302">1302: </a></span><span class="l"><a href="#1303">1303: </a></span><span class="l"><a href="#1304">1304: </a></span><span class="l"><a href="#1305">1305: </a></span><span class="l"><a href="#1306">1306: </a></span><span class="l"><a href="#1307">1307: </a></span></span><span class="l"><a href="#1308">1308: </a></span></span><span class="l"><a href="#1309">1309: </a></span></span><span class="l"><a href="#1310">1310: </a></span></span><span class="l"><a href="#1311">1311: </a></span></span><span class="l"><a href="#1312">1312: </a></span><span class="l"><a href="#1313">1313: </a></span><span class="l"><a href="#1314">1314: </a></span><span class="l"><a href="#1315">1315: </a></span><span class="l"><a href="#1316">1316: </a></span><span class="l"><a href="#1317">1317: </a></span><span class="l"><a href="#1318">1318: </a></span><span class="l"><a href="#1319">1319: </a></span><span class="l"><a href="#1320">1320: </a></span><span class="l"><a href="#1321">1321: </a></span><span class="l"><a href="#1322">1322: </a></span><span class="l"><a href="#1323">1323: </a></span><span class="l"><a href="#1324">1324: </a></span><span class="l"><a href="#1325">1325: </a></span><span class="l"><a href="#1326">1326: </a></span></span><span class="l"><a href="#1327">1327: </a></span></span><span class="l"><a href="#1328">1328: </a></span></span><span class="l"><a href="#1329">1329: </a></span></span><span class="l"><a href="#1330">1330: </a></span></span><span class="l"><a href="#1331">1331: </a></span></span><span class="l"><a href="#1332">1332: </a></span><span class="l"><a href="#1333">1333: </a></span><span class="l"><a href="#1334">1334: </a></span><span class="l"><a href="#1335">1335: </a></span><span class="l"><a href="#1336">1336: </a></span><span class="l"><a href="#1337">1337: </a></span><span class="l"><a href="#1338">1338: </a></span><span class="l"><a href="#1339">1339: </a></span><span class="l"><a href="#1340">1340: </a></span><span class="l"><a href="#1341">1341: </a></span><span class="l"><a href="#1342">1342: </a></span><span class="l"><a href="#1343">1343: </a></span><span class="l"><a href="#1344">1344: </a></span><span class="l"><a href="#1345">1345: </a></span><span class="l"><a href="#1346">1346: </a></span><span class="l"><a href="#1347">1347: </a></span><span class="l"><a href="#1348">1348: </a></span><span class="l"><a href="#1349">1349: </a></span><span class="l"><a href="#1350">1350: </a></span></span><span class="l"><a href="#1351">1351: </a></span></span><span class="l"><a href="#1352">1352: </a></span></span><span class="l"><a href="#1353">1353: </a></span></span><span class="l"><a href="#1354">1354: </a></span></span><span class="l"><a href="#1355">1355: </a></span><span class="l"><a href="#1356">1356: </a></span><span class="l"><a href="#1357">1357: </a></span><span class="l"><a href="#1358">1358: </a></span><span class="l"><a href="#1359">1359: </a></span><span class="l"><a href="#1360">1360: </a></span><span class="l"><a href="#1361">1361: </a></span><span class="l"><a href="#1362">1362: </a></span><span class="l"><a href="#1363">1363: </a></span><span class="l"><a href="#1364">1364: </a></span></span><span class="l"><a href="#1365">1365: </a></span></span><span class="l"><a href="#1366">1366: </a></span></span><span class="l"><a href="#1367">1367: </a></span><span class="l"><a href="#1368">1368: </a></span><span class="l"><a href="#1369">1369: </a></span><span class="l"><a href="#1370">1370: </a></span><span class="l"><a href="#1371">1371: </a></span><span class="l"><a href="#1372">1372: </a></span><span class="l"><a href="#1373">1373: </a></span><span class="l"><a href="#1374">1374: </a></span><span class="l"><a href="#1375">1375: </a></span><span class="l"><a href="#1376">1376: </a></span><span class="l"><a href="#1377">1377: </a></span><span class="l"><a href="#1378">1378: </a></span><span class="l"><a href="#1379">1379: </a></span><span class="l"><a href="#1380">1380: </a></span><span class="l"><a href="#1381">1381: </a></span><span class="l"><a href="#1382">1382: </a></span><span class="l"><a href="#1383">1383: </a></span><span class="l"><a href="#1384">1384: </a></span><span class="l"><a href="#1385">1385: </a></span><span class="l"><a href="#1386">1386: </a></span><span class="l"><a href="#1387">1387: </a></span><span class="l"><a href="#1388">1388: </a></span><span class="l"><a href="#1389">1389: </a></span><span class="l"><a href="#1390">1390: </a></span><span class="l"><a href="#1391">1391: </a></span></span><span class="l"><a href="#1392">1392: </a></span></span><span class="l"><a href="#1393">1393: </a></span></span><span class="l"><a href="#1394">1394: </a></span></span><span class="l"><a href="#1395">1395: </a></span></span><span class="l"><a href="#1396">1396: </a></span></span><span class="l"><a href="#1397">1397: </a></span><span class="l"><a href="#1398">1398: </a></span><span class="l"><a href="#1399">1399: </a></span><span class="l"><a href="#1400">1400: </a></span><span class="l"><a href="#1401">1401: </a></span><span class="l"><a href="#1402">1402: </a></span><span class="l"><a href="#1403">1403: </a></span><span class="l"><a href="#1404">1404: </a></span><span class="l"><a href="#1405">1405: </a></span><span class="l"><a href="#1406">1406: </a></span><span class="l"><a href="#1407">1407: </a></span><span class="l"><a href="#1408">1408: </a></span><span class="l"><a href="#1409">1409: </a></span><span class="l"><a href="#1410">1410: </a></span><span class="l"><a href="#1411">1411: </a></span><span class="l"><a href="#1412">1412: </a></span><span class="l"><a href="#1413">1413: </a></span><span class="l"><a href="#1414">1414: </a></span><span class="l"><a href="#1415">1415: </a></span></span><span class="l"><a href="#1416">1416: </a></span></span><span class="l"><a href="#1417">1417: </a></span></span><span class="l"><a href="#1418">1418: </a></span></span><span class="l"><a href="#1419">1419: </a></span></span><span class="l"><a href="#1420">1420: </a></span></span><span class="l"><a href="#1421">1421: </a></span></span><span class="l"><a href="#1422">1422: </a></span><span class="l"><a href="#1423">1423: </a></span><span class="l"><a href="#1424">1424: </a></span><span class="l"><a href="#1425">1425: </a></span><span class="l"><a href="#1426">1426: </a></span><span class="l"><a href="#1427">1427: </a></span><span class="l"><a href="#1428">1428: </a></span><span class="l"><a href="#1429">1429: </a></span><span class="l"><a href="#1430">1430: </a></span><span class="l"><a href="#1431">1431: </a></span><span class="l"><a href="#1432">1432: </a></span><span class="l"><a href="#1433">1433: </a></span></span><span class="l"><a href="#1434">1434: </a></span></span><span class="l"><a href="#1435">1435: </a></span></span><span class="l"><a href="#1436">1436: </a></span></span><span class="l"><a href="#1437">1437: </a></span></span><span class="l"><a href="#1438">1438: </a></span><span class="l"><a href="#1439">1439: </a></span><span class="l"><a href="#1440">1440: </a></span><span class="l"><a href="#1441">1441: </a></span><span class="l"><a href="#1442">1442: </a></span><span class="l"><a href="#1443">1443: </a></span><span class="l"><a href="#1444">1444: </a></span><span class="l"><a href="#1445">1445: </a></span><span class="l"><a href="#1446">1446: </a></span><span class="l"><a href="#1447">1447: </a></span><span class="l"><a href="#1448">1448: </a></span></span><span class="l"><a href="#1449">1449: </a></span></span><span class="l"><a href="#1450">1450: </a></span></span><span class="l"><a href="#1451">1451: </a></span></span><span class="l"><a href="#1452">1452: </a></span></span><span class="l"><a href="#1453">1453: </a></span></span><span class="l"><a href="#1454">1454: </a></span></span><span class="l"><a href="#1455">1455: </a></span><span class="l"><a href="#1456">1456: </a></span><span class="l"><a href="#1457">1457: </a></span><span class="l"><a href="#1458">1458: </a></span><span class="l"><a href="#1459">1459: </a></span><span class="l"><a href="#1460">1460: </a></span><span class="l"><a href="#1461">1461: </a></span><span class="l"><a href="#1462">1462: </a></span><span class="l"><a href="#1463">1463: </a></span><span class="l"><a href="#1464">1464: </a></span><span class="l"><a href="#1465">1465: </a></span><span class="l"><a href="#1466">1466: </a></span><span class="l"><a href="#1467">1467: </a></span><span class="l"><a href="#1468">1468: </a></span><span class="l"><a href="#1469">1469: </a></span><span class="l"><a href="#1470">1470: </a></span><span class="l"><a href="#1471">1471: </a></span><span class="l"><a href="#1472">1472: </a></span><span class="l"><a href="#1473">1473: </a></span><span class="l"><a href="#1474">1474: </a></span><span class="l"><a href="#1475">1475: </a></span><span class="l"><a href="#1476">1476: </a></span><span class="l"><a href="#1477">1477: </a></span><span class="l"><a href="#1478">1478: </a></span><span class="l"><a href="#1479">1479: </a></span><span class="l"><a href="#1480">1480: </a></span><span class="l"><a href="#1481">1481: </a></span></span><span class="l"><a href="#1482">1482: </a></span></span><span class="l"><a href="#1483">1483: </a></span></span><span class="l"><a href="#1484">1484: </a></span><span class="l"><a href="#1485">1485: </a></span><span class="l"><a href="#1486">1486: </a></span><span class="l"><a href="#1487">1487: </a></span><span class="l"><a href="#1488">1488: </a></span><span class="l"><a href="#1489">1489: </a></span><span class="l"><a href="#1490">1490: </a></span><span class="l"><a href="#1491">1491: </a></span><span class="l"><a href="#1492">1492: </a></span><span class="l"><a href="#1493">1493: </a></span><span class="l"><a href="#1494">1494: </a></span><span class="l"><a href="#1495">1495: </a></span><span class="l"><a href="#1496">1496: </a></span><span class="l"><a href="#1497">1497: </a></span></span><span class="l"><a href="#1498">1498: </a></span></span><span class="l"><a href="#1499">1499: </a></span></span><span class="l"><a href="#1500">1500: </a></span></span><span class="l"><a href="#1501">1501: </a></span><span class="l"><a href="#1502">1502: </a></span><span class="l"><a href="#1503">1503: </a></span><span class="l"><a href="#1504">1504: </a></span><span class="l"><a href="#1505">1505: </a></span><span class="l"><a href="#1506">1506: </a></span><span class="l"><a href="#1507">1507: </a></span><span class="l"><a href="#1508">1508: </a></span><span class="l"><a href="#1509">1509: </a></span><span class="l"><a href="#1510">1510: </a></span><span class="l"><a href="#1511">1511: </a></span><span class="l"><a href="#1512">1512: </a></span><span class="l"><a href="#1513">1513: </a></span><span class="l"><a href="#1514">1514: </a></span><span class="l"><a href="#1515">1515: </a></span><span class="l"><a href="#1516">1516: </a></span><span class="l"><a href="#1517">1517: </a></span><span class="l"><a href="#1518">1518: </a></span><span class="l"><a href="#1519">1519: </a></span><span class="l"><a href="#1520">1520: </a></span><span class="l"><a href="#1521">1521: </a></span><span class="l"><a href="#1522">1522: </a></span><span class="l"><a href="#1523">1523: </a></span><span class="l"><a href="#1524">1524: </a></span><span class="l"><a href="#1525">1525: </a></span><span class="l"><a href="#1526">1526: </a></span><span class="l"><a href="#1527">1527: </a></span></code></pre>
<pre class="code"><code><span id="1" class="l"><span class="xlang">&lt;?php</span>
</span><span id="2" class="l">
</span><span id="3" class="l"><span class="php-comment">/**
</span></span><span id="4" class="l"><span class="php-comment"> * The contents of this file handle the deletion of topics, posts, and related
</span></span><span id="5" class="l"><span class="php-comment"> * paraphernalia.
</span></span><span id="6" class="l"><span class="php-comment"> *
</span></span><span id="7" class="l"><span class="php-comment"> * Simple Machines Forum (SMF)
</span></span><span id="8" class="l"><span class="php-comment"> *
</span></span><span id="9" class="l"><span class="php-comment"> * @package SMF
</span></span><span id="10" class="l"><span class="php-comment"> * @author Simple Machines https://www.simplemachines.org
</span></span><span id="11" class="l"><span class="php-comment"> * @copyright 2020 Simple Machines and individual contributors
</span></span><span id="12" class="l"><span class="php-comment"> * @license https://www.simplemachines.org/about/smf/license.php BSD
</span></span><span id="13" class="l"><span class="php-comment"> *
</span></span><span id="14" class="l"><span class="php-comment"> * @version 2.1 RC2
</span></span><span id="15" class="l"><span class="php-comment"> */</span>
</span><span id="16" class="l">
</span><span id="17" class="l"><span class="php-keyword1">if</span> (!<span class="php-keyword2">defined</span>(<span class="php-quote">'SMF'</span>))
</span><span id="18" class="l">    <span class="php-keyword1">die</span>(<span class="php-quote">'No direct access...'</span>);
</span><span id="19" class="l">
</span><span id="20" class="l"><span class="php-comment">/*  The contents of this file handle the deletion of topics, posts, and related
</span></span><span id="21" class="l"><span class="php-comment">    paraphernalia.  It has the following functions:
</span></span><span id="22" class="l"><span class="php-comment">
</span></span><span id="23" class="l"><span class="php-comment">*/</span>
</span><span id="24" class="l">
</span><span id="25" class="l"><span class="php-comment">/**
</span></span><span id="26" class="l"><span class="php-comment"> * Completely remove an entire topic.
</span></span><span id="27" class="l"><span class="php-comment"> * Redirects to the board when completed.
</span></span><span id="28" class="l"><span class="php-comment"> */</span>
</span><span id="29" class="l"><span class="php-keyword1">function</span> RemoveTopic2()
</span><span id="30" class="l">{
</span><span id="31" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$user_info</span>, <span class="php-var">$topic</span>, <span class="php-var">$board</span>, <span class="php-var">$sourcedir</span>, <span class="php-var">$smcFunc</span>, <span class="php-var">$modSettings</span>;
</span><span id="32" class="l">
</span><span id="33" class="l">    <span class="php-comment">// Make sure they aren't being lead around by someone. (:@)</span>
</span><span id="34" class="l">    checkSession(<span class="php-quote">'get'</span>);
</span><span id="35" class="l">
</span><span id="36" class="l">    <span class="php-comment">// This file needs to be included for sendNotifications().</span>
</span><span id="37" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Subs-Post.php'</span>);
</span><span id="38" class="l">
</span><span id="39" class="l">    <span class="php-comment">// Trying to fool us around, are we?</span>
</span><span id="40" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$topic</span>))
</span><span id="41" class="l">        redirectexit();
</span><span id="42" class="l">
</span><span id="43" class="l">    removeDeleteConcurrence();
</span><span id="44" class="l">
</span><span id="45" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="46" class="l"><span class="php-quote">        SELECT t.id_member_started, ms.subject, t.approved, t.locked
</span></span><span id="47" class="l"><span class="php-quote">        FROM {db_prefix}topics AS t
</span></span><span id="48" class="l"><span class="php-quote">            INNER JOIN {db_prefix}messages AS ms ON (ms.id_msg = t.id_first_msg)
</span></span><span id="49" class="l"><span class="php-quote">        WHERE t.id_topic = {int:current_topic}
</span></span><span id="50" class="l"><span class="php-quote">        LIMIT 1'</span>,
</span><span id="51" class="l">        <span class="php-keyword1">array</span>(
</span><span id="52" class="l">            <span class="php-quote">'current_topic'</span> =&gt; <span class="php-var">$topic</span>,
</span><span id="53" class="l">        )
</span><span id="54" class="l">    );
</span><span id="55" class="l">    <span class="php-keyword1">list</span> (<span class="php-var">$starter</span>, <span class="php-var">$subject</span>, <span class="php-var">$approved</span>, <span class="php-var">$locked</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="56" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="57" class="l">
</span><span id="58" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$starter</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'remove_any'</span>))
</span><span id="59" class="l">        isAllowedTo(<span class="php-quote">'remove_own'</span>);
</span><span id="60" class="l">    <span class="php-keyword1">else</span>
</span><span id="61" class="l">        isAllowedTo(<span class="php-quote">'remove_any'</span>);
</span><span id="62" class="l">
</span><span id="63" class="l">    <span class="php-comment">// Can they see the topic?</span>
</span><span id="64" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] &amp;&amp; !<span class="php-var">$approved</span> &amp;&amp; <span class="php-var">$starter</span> != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="65" class="l">        isAllowedTo(<span class="php-quote">'approve_posts'</span>);
</span><span id="66" class="l">
</span><span id="67" class="l">    <span class="php-comment">// Ok, we got that far, but is it locked?</span>
</span><span id="68" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$locked</span>)
</span><span id="69" class="l">    {
</span><span id="70" class="l">        <span class="php-keyword1">if</span> (!(<span class="php-var">$locked</span> == <span class="php-num">1</span> &amp;&amp; <span class="php-var">$starter</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] || allowedTo(<span class="php-quote">'lock_any'</span>)))
</span><span id="71" class="l">            fatal_lang_error(<span class="php-quote">'cannot_remove_locked'</span>, <span class="php-quote">'user'</span>);
</span><span id="72" class="l">    }
</span><span id="73" class="l">
</span><span id="74" class="l">    <span class="php-comment">// Notify people that this topic has been removed.</span>
</span><span id="75" class="l">    sendNotifications(<span class="php-var">$topic</span>, <span class="php-quote">'remove'</span>);
</span><span id="76" class="l">
</span><span id="77" class="l">    removeTopics(<span class="php-var">$topic</span>);
</span><span id="78" class="l">
</span><span id="79" class="l">    <span class="php-comment">// Note, only log topic ID in native form if it's not gone forever.</span>
</span><span id="80" class="l">    <span class="php-keyword1">if</span> (allowedTo(<span class="php-quote">'remove_any'</span>) || (allowedTo(<span class="php-quote">'remove_own'</span>) &amp;&amp; <span class="php-var">$starter</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>]))
</span><span id="81" class="l">        logAction(<span class="php-quote">'remove'</span>, <span class="php-keyword1">array</span>((<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]) || <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>] != <span class="php-var">$board</span> ? <span class="php-quote">'topic'</span> : <span class="php-quote">'old_topic_id'</span>) =&gt; <span class="php-var">$topic</span>, <span class="php-quote">'subject'</span> =&gt; <span class="php-var">$subject</span>, <span class="php-quote">'member'</span> =&gt; <span class="php-var">$starter</span>, <span class="php-quote">'board'</span> =&gt; <span class="php-var">$board</span>));
</span><span id="82" class="l">
</span><span id="83" class="l">    redirectexit(<span class="php-quote">'board='</span> . <span class="php-var">$board</span> . <span class="php-quote">'.0'</span>);
</span><span id="84" class="l">}
</span><span id="85" class="l">
</span><span id="86" class="l"><span class="php-comment">/**
</span></span><span id="87" class="l"><span class="php-comment"> * Remove just a single post.
</span></span><span id="88" class="l"><span class="php-comment"> * On completion redirect to the topic or to the board.
</span></span><span id="89" class="l"><span class="php-comment"> */</span>
</span><span id="90" class="l"><span class="php-keyword1">function</span> DeleteMessage()
</span><span id="91" class="l">{
</span><span id="92" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$user_info</span>, <span class="php-var">$topic</span>, <span class="php-var">$board</span>, <span class="php-var">$modSettings</span>, <span class="php-var">$smcFunc</span>;
</span><span id="93" class="l">
</span><span id="94" class="l">    checkSession(<span class="php-quote">'get'</span>);
</span><span id="95" class="l">
</span><span id="96" class="l">    <span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>] = (int) <span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>];
</span><span id="97" class="l">
</span><span id="98" class="l">    <span class="php-comment">// Is $topic set?</span>
</span><span id="99" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$topic</span>) &amp;&amp; <span class="php-keyword1">isset</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'topic'</span>]))
</span><span id="100" class="l">        <span class="php-var">$topic</span> = (int) <span class="php-var">$_REQUEST</span>[<span class="php-quote">'topic'</span>];
</span><span id="101" class="l">
</span><span id="102" class="l">    removeDeleteConcurrence();
</span><span id="103" class="l">
</span><span id="104" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="105" class="l"><span class="php-quote">        SELECT t.id_member_started, m.id_member, m.subject, m.poster_time, m.approved
</span></span><span id="106" class="l"><span class="php-quote">        FROM {db_prefix}topics AS t
</span></span><span id="107" class="l"><span class="php-quote">            INNER JOIN {db_prefix}messages AS m ON (m.id_msg = {int:id_msg} AND m.id_topic = {int:current_topic})
</span></span><span id="108" class="l"><span class="php-quote">        WHERE t.id_topic = {int:current_topic}
</span></span><span id="109" class="l"><span class="php-quote">        LIMIT 1'</span>,
</span><span id="110" class="l">        <span class="php-keyword1">array</span>(
</span><span id="111" class="l">            <span class="php-quote">'current_topic'</span> =&gt; <span class="php-var">$topic</span>,
</span><span id="112" class="l">            <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>],
</span><span id="113" class="l">        )
</span><span id="114" class="l">    );
</span><span id="115" class="l">    <span class="php-keyword1">list</span> (<span class="php-var">$starter</span>, <span class="php-var">$poster</span>, <span class="php-var">$subject</span>, <span class="php-var">$post_time</span>, <span class="php-var">$approved</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="116" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="117" class="l">
</span><span id="118" class="l">    <span class="php-comment">// Verify they can see this!</span>
</span><span id="119" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] &amp;&amp; !<span class="php-var">$approved</span> &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$poster</span>) &amp;&amp; <span class="php-var">$poster</span> != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="120" class="l">        isAllowedTo(<span class="php-quote">'approve_posts'</span>);
</span><span id="121" class="l">
</span><span id="122" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$poster</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="123" class="l">    {
</span><span id="124" class="l">        <span class="php-keyword1">if</span> (!allowedTo(<span class="php-quote">'delete_own'</span>))
</span><span id="125" class="l">        {
</span><span id="126" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$starter</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="127" class="l">                isAllowedTo(<span class="php-quote">'delete_replies'</span>);
</span><span id="128" class="l">            <span class="php-keyword1">elseif</span> (!allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="129" class="l">                isAllowedTo(<span class="php-quote">'delete_own'</span>);
</span><span id="130" class="l">        }
</span><span id="131" class="l">        <span class="php-keyword1">elseif</span> (!allowedTo(<span class="php-quote">'delete_any'</span>) &amp;&amp; (<span class="php-var">$starter</span> != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] || !allowedTo(<span class="php-quote">'delete_replies'</span>)) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>]) &amp;&amp; <span class="php-var">$post_time</span> + <span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>] * <span class="php-num">60</span> &lt; <span class="php-keyword2">time</span>())
</span><span id="132" class="l">            fatal_lang_error(<span class="php-quote">'modify_post_time_passed'</span>, <span class="php-keyword1">false</span>);
</span><span id="133" class="l">    }
</span><span id="134" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-var">$starter</span> == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="135" class="l">        isAllowedTo(<span class="php-quote">'delete_replies'</span>);
</span><span id="136" class="l">    <span class="php-keyword1">else</span>
</span><span id="137" class="l">        isAllowedTo(<span class="php-quote">'delete_any'</span>);
</span><span id="138" class="l">
</span><span id="139" class="l">    <span class="php-comment">// If the full topic was removed go back to the board.</span>
</span><span id="140" class="l">    <span class="php-var">$full_topic</span> = removeMessage(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>]);
</span><span id="141" class="l">
</span><span id="142" class="l">    <span class="php-keyword1">if</span> (allowedTo(<span class="php-quote">'delete_any'</span>) &amp;&amp; (!allowedTo(<span class="php-quote">'delete_own'</span>) || <span class="php-var">$poster</span> != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>]))
</span><span id="143" class="l">        logAction(<span class="php-quote">'delete'</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'topic'</span> =&gt; <span class="php-var">$topic</span>, <span class="php-quote">'subject'</span> =&gt; <span class="php-var">$subject</span>, <span class="php-quote">'member'</span> =&gt; <span class="php-var">$poster</span>, <span class="php-quote">'board'</span> =&gt; <span class="php-var">$board</span>));
</span><span id="144" class="l">
</span><span id="145" class="l">    <span class="php-comment">// We want to redirect back to recent action.</span>
</span><span id="146" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'modcenter'</span>]))
</span><span id="147" class="l">        redirectexit(<span class="php-quote">'action=moderate;area=reportedposts;done'</span>);
</span><span id="148" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'recent'</span>]))
</span><span id="149" class="l">        redirectexit(<span class="php-quote">'action=recent'</span>);
</span><span id="150" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'profile'</span>], <span class="php-var">$_REQUEST</span>[<span class="php-quote">'start'</span>], <span class="php-var">$_REQUEST</span>[<span class="php-quote">'u'</span>]))
</span><span id="151" class="l">        redirectexit(<span class="php-quote">'action=profile;u='</span> . <span class="php-var">$_REQUEST</span>[<span class="php-quote">'u'</span>] . <span class="php-quote">';area=showposts;start='</span> . <span class="php-var">$_REQUEST</span>[<span class="php-quote">'start'</span>]);
</span><span id="152" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-var">$full_topic</span>)
</span><span id="153" class="l">        redirectexit(<span class="php-quote">'board='</span> . <span class="php-var">$board</span> . <span class="php-quote">'.0'</span>);
</span><span id="154" class="l">    <span class="php-keyword1">else</span>
</span><span id="155" class="l">        redirectexit(<span class="php-quote">'topic='</span> . <span class="php-var">$topic</span> . <span class="php-quote">'.'</span> . <span class="php-var">$_REQUEST</span>[<span class="php-quote">'start'</span>]);
</span><span id="156" class="l">}
</span><span id="157" class="l">
</span><span id="158" class="l"><span class="php-comment">/**
</span></span><span id="159" class="l"><span class="php-comment"> * So long as you are sure... all old posts will be gone.
</span></span><span id="160" class="l"><span class="php-comment"> * Used in ManageMaintenance.php to prune old topics.
</span></span><span id="161" class="l"><span class="php-comment"> */</span>
</span><span id="162" class="l"><span class="php-keyword1">function</span> RemoveOldTopics2()
</span><span id="163" class="l">{
</span><span id="164" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$smcFunc</span>;
</span><span id="165" class="l">
</span><span id="166" class="l">    isAllowedTo(<span class="php-quote">'admin_forum'</span>);
</span><span id="167" class="l">    checkSession(<span class="php-quote">'post'</span>, <span class="php-quote">'admin'</span>);
</span><span id="168" class="l">
</span><span id="169" class="l">    <span class="php-comment">// No boards at all?  Forget it then :/.</span>
</span><span id="170" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$_POST</span>[<span class="php-quote">'boards'</span>]))
</span><span id="171" class="l">        redirectexit(<span class="php-quote">'action=admin;area=maintain;sa=topics'</span>);
</span><span id="172" class="l">
</span><span id="173" class="l">    <span class="php-comment">// This should exist, but we can make sure.</span>
</span><span id="174" class="l">    <span class="php-var">$_POST</span>[<span class="php-quote">'delete_type'</span>] = <span class="php-keyword1">isset</span>(<span class="php-var">$_POST</span>[<span class="php-quote">'delete_type'</span>]) ? <span class="php-var">$_POST</span>[<span class="php-quote">'delete_type'</span>] : <span class="php-quote">'nothing'</span>;
</span><span id="175" class="l">
</span><span id="176" class="l">    <span class="php-comment">// Custom conditions.</span>
</span><span id="177" class="l">    <span class="php-var">$condition</span> = <span class="php-quote">''</span>;
</span><span id="178" class="l">    <span class="php-var">$condition_params</span> = <span class="php-keyword1">array</span>(
</span><span id="179" class="l">        <span class="php-quote">'boards'</span> =&gt; <span class="php-keyword2">array_keys</span>(<span class="php-var">$_POST</span>[<span class="php-quote">'boards'</span>]),
</span><span id="180" class="l">        <span class="php-quote">'poster_time'</span> =&gt; <span class="php-keyword2">time</span>() - <span class="php-num">3600</span> * <span class="php-num">24</span> * <span class="php-var">$_POST</span>[<span class="php-quote">'maxdays'</span>],
</span><span id="181" class="l">    );
</span><span id="182" class="l">
</span><span id="183" class="l">    <span class="php-comment">// Just moved notice topics?</span>
</span><span id="184" class="l">    <span class="php-comment">// Note that this ignores redirection topics unless it's a non-expiring one</span>
</span><span id="185" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$_POST</span>[<span class="php-quote">'delete_type'</span>] == <span class="php-quote">'moved'</span>)
</span><span id="186" class="l">    {
</span><span id="187" class="l">        <span class="php-var">$condition</span> .= <span class="php-quote">'
</span></span><span id="188" class="l"><span class="php-quote">            AND m.icon = {string:icon}
</span></span><span id="189" class="l"><span class="php-quote">            AND t.locked = {int:locked}
</span></span><span id="190" class="l"><span class="php-quote">            AND t.redirect_expires = {int:not_expiring}'</span>;
</span><span id="191" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'icon'</span>] = <span class="php-quote">'moved'</span>;
</span><span id="192" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'locked'</span>] = <span class="php-num">1</span>;
</span><span id="193" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'not_expiring'</span>] = <span class="php-num">0</span>;
</span><span id="194" class="l">    }
</span><span id="195" class="l">    <span class="php-comment">// Otherwise, maybe locked topics only?</span>
</span><span id="196" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-var">$_POST</span>[<span class="php-quote">'delete_type'</span>] == <span class="php-quote">'locked'</span>)
</span><span id="197" class="l">    {
</span><span id="198" class="l">        <span class="php-comment">// Exclude moved/merged notices since we have another option for those...</span>
</span><span id="199" class="l">        <span class="php-var">$condition</span> .= <span class="php-quote">'
</span></span><span id="200" class="l"><span class="php-quote">            AND t.icon != {string:icon}
</span></span><span id="201" class="l"><span class="php-quote">            AND t.locked = {int:locked}'</span>;
</span><span id="202" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'icon'</span>] = <span class="php-quote">'moved'</span>;
</span><span id="203" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'locked'</span>] = <span class="php-num">1</span>;
</span><span id="204" class="l">    }
</span><span id="205" class="l">
</span><span id="206" class="l">    <span class="php-comment">// Exclude stickies?</span>
</span><span id="207" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_POST</span>[<span class="php-quote">'delete_old_not_sticky'</span>]))
</span><span id="208" class="l">    {
</span><span id="209" class="l">        <span class="php-var">$condition</span> .= <span class="php-quote">'
</span></span><span id="210" class="l"><span class="php-quote">            AND t.is_sticky = {int:is_sticky}'</span>;
</span><span id="211" class="l">        <span class="php-var">$condition_params</span>[<span class="php-quote">'is_sticky'</span>] = <span class="php-num">0</span>;
</span><span id="212" class="l">    }
</span><span id="213" class="l">
</span><span id="214" class="l">    <span class="php-comment">// All we're gonna do here is grab the id_topic's and send them to removeTopics().</span>
</span><span id="215" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="216" class="l"><span class="php-quote">        SELECT t.id_topic
</span></span><span id="217" class="l"><span class="php-quote">        FROM {db_prefix}topics AS t
</span></span><span id="218" class="l"><span class="php-quote">            INNER JOIN {db_prefix}messages AS m ON (m.id_msg = t.id_last_msg)
</span></span><span id="219" class="l"><span class="php-quote">        WHERE
</span></span><span id="220" class="l"><span class="php-quote">            m.poster_time &lt; {int:poster_time}'</span> . <span class="php-var">$condition</span> . <span class="php-quote">'
</span></span><span id="221" class="l"><span class="php-quote">            AND t.id_board IN ({array_int:boards})'</span>,
</span><span id="222" class="l">        <span class="php-var">$condition_params</span>
</span><span id="223" class="l">    );
</span><span id="224" class="l">    <span class="php-var">$topics</span> = <span class="php-keyword1">array</span>();
</span><span id="225" class="l">    <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="226" class="l">        <span class="php-var">$topics</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>];
</span><span id="227" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="228" class="l">
</span><span id="229" class="l">    removeTopics(<span class="php-var">$topics</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">true</span>);
</span><span id="230" class="l">
</span><span id="231" class="l">    <span class="php-comment">// Log an action into the moderation log.</span>
</span><span id="232" class="l">    logAction(<span class="php-quote">'pruned'</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'days'</span> =&gt; <span class="php-var">$_POST</span>[<span class="php-quote">'maxdays'</span>]));
</span><span id="233" class="l">
</span><span id="234" class="l">    redirectexit(<span class="php-quote">'action=admin;area=maintain;sa=topics;done=purgeold'</span>);
</span><span id="235" class="l">}
</span><span id="236" class="l">
</span><span id="237" class="l"><span class="php-comment">/**
</span></span><span id="238" class="l"><span class="php-comment"> * Removes the passed id_topic's. (permissions are NOT checked here!).
</span></span><span id="239" class="l"><span class="php-comment"> *
</span></span><span id="240" class="l"><span class="php-comment"> * @param array|int $topics The topics to remove (can be an id or an array of ids).
</span></span><span id="241" class="l"><span class="php-comment"> * @param bool $decreasePostCount Whether to decrease the users' post counts
</span></span><span id="242" class="l"><span class="php-comment"> * @param bool $ignoreRecycling Whether to ignore recycling board settings
</span></span><span id="243" class="l"><span class="php-comment"> * @param bool $updateBoardCount Whether to adjust topic counts for the boards
</span></span><span id="244" class="l"><span class="php-comment"> */</span>
</span><span id="245" class="l"><span class="php-keyword1">function</span> removeTopics(<span class="php-var">$topics</span>, <span class="php-var">$decreasePostCount</span> = <span class="php-keyword1">true</span>, <span class="php-var">$ignoreRecycling</span> = <span class="php-keyword1">false</span>, <span class="php-var">$updateBoardCount</span> = <span class="php-keyword1">true</span>)
</span><span id="246" class="l">{
</span><span id="247" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$sourcedir</span>, <span class="php-var">$modSettings</span>, <span class="php-var">$smcFunc</span>;
</span><span id="248" class="l">
</span><span id="249" class="l">    <span class="php-comment">// Nothing to do?</span>
</span><span id="250" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$topics</span>))
</span><span id="251" class="l">        <span class="php-keyword1">return</span>;
</span><span id="252" class="l">    <span class="php-comment">// Only a single topic.</span>
</span><span id="253" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword2">is_numeric</span>(<span class="php-var">$topics</span>))
</span><span id="254" class="l">        <span class="php-var">$topics</span> = <span class="php-keyword1">array</span>(<span class="php-var">$topics</span>);
</span><span id="255" class="l">
</span><span id="256" class="l">    <span class="php-var">$recycle_board</span> = !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]) ? (int) <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>] : <span class="php-num">0</span>;
</span><span id="257" class="l">
</span><span id="258" class="l">    <span class="php-comment">// Do something before?</span>
</span><span id="259" class="l">    call_integration_hook(<span class="php-quote">'integrate_remove_topics_before'</span>, <span class="php-keyword1">array</span>(<span class="php-var">$topics</span>, <span class="php-var">$recycle_board</span>));
</span><span id="260" class="l">
</span><span id="261" class="l">    <span class="php-comment">// Decrease the post counts.</span>
</span><span id="262" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$decreasePostCount</span>)
</span><span id="263" class="l">    {
</span><span id="264" class="l">        <span class="php-var">$requestMembers</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="265" class="l"><span class="php-quote">            SELECT m.id_member, COUNT(*) AS posts
</span></span><span id="266" class="l"><span class="php-quote">            FROM {db_prefix}messages AS m
</span></span><span id="267" class="l"><span class="php-quote">                INNER JOIN {db_prefix}boards AS b ON (b.id_board = m.id_board)
</span></span><span id="268" class="l"><span class="php-quote">            WHERE m.id_topic IN ({array_int:topics})'</span> . (!<span class="php-keyword1">empty</span>(<span class="php-var">$recycle_board</span>) ? <span class="php-quote">'
</span></span><span id="269" class="l"><span class="php-quote">                AND m.id_board != {int:recycled_board}'</span> : <span class="php-quote">''</span>) . <span class="php-quote">'
</span></span><span id="270" class="l"><span class="php-quote">                AND b.count_posts = {int:do_count_posts}
</span></span><span id="271" class="l"><span class="php-quote">                AND m.approved = {int:is_approved}
</span></span><span id="272" class="l"><span class="php-quote">            GROUP BY m.id_member'</span>,
</span><span id="273" class="l">            <span class="php-keyword1">array</span>(
</span><span id="274" class="l">                <span class="php-quote">'do_count_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="275" class="l">                <span class="php-quote">'recycled_board'</span> =&gt; <span class="php-var">$recycle_board</span>,
</span><span id="276" class="l">                <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="277" class="l">                <span class="php-quote">'is_approved'</span> =&gt; <span class="php-num">1</span>,
</span><span id="278" class="l">            )
</span><span id="279" class="l">        );
</span><span id="280" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_num_rows'</span>](<span class="php-var">$requestMembers</span>) &gt; <span class="php-num">0</span>)
</span><span id="281" class="l">        {
</span><span id="282" class="l">            <span class="php-keyword1">while</span> (<span class="php-var">$rowMembers</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$requestMembers</span>))
</span><span id="283" class="l">                updateMemberData(<span class="php-var">$rowMembers</span>[<span class="php-quote">'id_member'</span>], <span class="php-keyword1">array</span>(<span class="php-quote">'posts'</span> =&gt; <span class="php-quote">'posts - '</span> . <span class="php-var">$rowMembers</span>[<span class="php-quote">'posts'</span>]));
</span><span id="284" class="l">        }
</span><span id="285" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$requestMembers</span>);
</span><span id="286" class="l">    }
</span><span id="287" class="l">
</span><span id="288" class="l">    <span class="php-comment">// Recycle topics that aren't in the recycle board...</span>
</span><span id="289" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$recycle_board</span>) &amp;&amp; !<span class="php-var">$ignoreRecycling</span>)
</span><span id="290" class="l">    {
</span><span id="291" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="292" class="l"><span class="php-quote">            SELECT id_topic, id_board, unapproved_posts, approved
</span></span><span id="293" class="l"><span class="php-quote">            FROM {db_prefix}topics
</span></span><span id="294" class="l"><span class="php-quote">            WHERE id_topic IN ({array_int:topics})
</span></span><span id="295" class="l"><span class="php-quote">                AND id_board != {int:recycle_board}
</span></span><span id="296" class="l"><span class="php-quote">            LIMIT {int:limit}'</span>,
</span><span id="297" class="l">            <span class="php-keyword1">array</span>(
</span><span id="298" class="l">                <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$recycle_board</span>,
</span><span id="299" class="l">                <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="300" class="l">                <span class="php-quote">'limit'</span> =&gt; <span class="php-keyword2">count</span>(<span class="php-var">$topics</span>),
</span><span id="301" class="l">            )
</span><span id="302" class="l">        );
</span><span id="303" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_num_rows'</span>](<span class="php-var">$request</span>) &gt; <span class="php-num">0</span>)
</span><span id="304" class="l">        {
</span><span id="305" class="l">            <span class="php-comment">// Get topics that will be recycled.</span>
</span><span id="306" class="l">            <span class="php-var">$recycleTopics</span> = <span class="php-keyword1">array</span>();
</span><span id="307" class="l">            <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="308" class="l">            {
</span><span id="309" class="l">                <span class="php-keyword1">if</span> (<span class="php-keyword2">function_exists</span>(<span class="php-quote">'apache_reset_timeout'</span>))
</span><span id="310" class="l">                    @apache_reset_timeout();
</span><span id="311" class="l">
</span><span id="312" class="l">                <span class="php-var">$recycleTopics</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>];
</span><span id="313" class="l">
</span><span id="314" class="l">                <span class="php-comment">// Set the id_previous_board for this topic - and make it not sticky.</span>
</span><span id="315" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="316" class="l"><span class="php-quote">                    UPDATE {db_prefix}topics
</span></span><span id="317" class="l"><span class="php-quote">                    SET id_previous_board = {int:id_previous_board}, is_sticky = {int:not_sticky}
</span></span><span id="318" class="l"><span class="php-quote">                    WHERE id_topic = {int:id_topic}'</span>,
</span><span id="319" class="l">                    <span class="php-keyword1">array</span>(
</span><span id="320" class="l">                        <span class="php-quote">'id_previous_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>],
</span><span id="321" class="l">                        <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="322" class="l">                        <span class="php-quote">'not_sticky'</span> =&gt; <span class="php-num">0</span>,
</span><span id="323" class="l">                    )
</span><span id="324" class="l">                );
</span><span id="325" class="l">            }
</span><span id="326" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="327" class="l">
</span><span id="328" class="l">            <span class="php-comment">// Move the topics to the recycle board.</span>
</span><span id="329" class="l">            <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/MoveTopic.php'</span>);
</span><span id="330" class="l">            moveTopics(<span class="php-var">$recycleTopics</span>, <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]);
</span><span id="331" class="l">
</span><span id="332" class="l">            <span class="php-comment">// Close reports that are being recycled.</span>
</span><span id="333" class="l">            <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/ModerationCenter.php'</span>);
</span><span id="334" class="l">
</span><span id="335" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="336" class="l"><span class="php-quote">                UPDATE {db_prefix}log_reported
</span></span><span id="337" class="l"><span class="php-quote">                SET closed = {int:is_closed}
</span></span><span id="338" class="l"><span class="php-quote">                WHERE id_topic IN ({array_int:recycle_topics})'</span>,
</span><span id="339" class="l">                <span class="php-keyword1">array</span>(
</span><span id="340" class="l">                    <span class="php-quote">'recycle_topics'</span> =&gt; <span class="php-var">$recycleTopics</span>,
</span><span id="341" class="l">                    <span class="php-quote">'is_closed'</span> =&gt; <span class="php-num">1</span>,
</span><span id="342" class="l">                )
</span><span id="343" class="l">            );
</span><span id="344" class="l">
</span><span id="345" class="l">            updateSettings(<span class="php-keyword1">array</span>(<span class="php-quote">'last_mod_report_action'</span> =&gt; <span class="php-keyword2">time</span>()));
</span><span id="346" class="l">
</span><span id="347" class="l">            <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Subs-ReportedContent.php'</span>);
</span><span id="348" class="l">            recountOpenReports(<span class="php-quote">'posts'</span>);
</span><span id="349" class="l">
</span><span id="350" class="l">            <span class="php-comment">// Topics that were recycled don't need to be deleted, so subtract them.</span>
</span><span id="351" class="l">            <span class="php-var">$topics</span> = <span class="php-keyword2">array_diff</span>(<span class="php-var">$topics</span>, <span class="php-var">$recycleTopics</span>);
</span><span id="352" class="l">        }
</span><span id="353" class="l">        <span class="php-keyword1">else</span>
</span><span id="354" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="355" class="l">    }
</span><span id="356" class="l">
</span><span id="357" class="l">    <span class="php-comment">// Still topics left to delete?</span>
</span><span id="358" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$topics</span>))
</span><span id="359" class="l">        <span class="php-keyword1">return</span>;
</span><span id="360" class="l">
</span><span id="361" class="l">    <span class="php-comment">// Callback for search APIs to do their thing</span>
</span><span id="362" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Search.php'</span>);
</span><span id="363" class="l">    <span class="php-var">$searchAPI</span> = findSearchAPI();
</span><span id="364" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$searchAPI</span>-&gt;supportsMethod(<span class="php-quote">'topicsRemoved'</span>))
</span><span id="365" class="l">        <span class="php-var">$searchAPI</span>-&gt;topicsRemoved(<span class="php-var">$topics</span>);
</span><span id="366" class="l">
</span><span id="367" class="l">    <span class="php-var">$adjustBoards</span> = <span class="php-keyword1">array</span>();
</span><span id="368" class="l">
</span><span id="369" class="l">    <span class="php-comment">// Find out how many posts we are deleting.</span>
</span><span id="370" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="371" class="l"><span class="php-quote">        SELECT id_board, approved, COUNT(*) AS num_topics, SUM(unapproved_posts) AS unapproved_posts,
</span></span><span id="372" class="l"><span class="php-quote">            SUM(num_replies) AS num_replies
</span></span><span id="373" class="l"><span class="php-quote">        FROM {db_prefix}topics
</span></span><span id="374" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})
</span></span><span id="375" class="l"><span class="php-quote">        GROUP BY id_board, approved'</span>,
</span><span id="376" class="l">        <span class="php-keyword1">array</span>(
</span><span id="377" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="378" class="l">        )
</span><span id="379" class="l">    );
</span><span id="380" class="l">    <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="381" class="l">    {
</span><span id="382" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]][<span class="php-quote">'num_posts'</span>]))
</span><span id="383" class="l">        {
</span><span id="384" class="l">            <span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]] = <span class="php-keyword1">array</span>(
</span><span id="385" class="l">                <span class="php-quote">'num_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="386" class="l">                <span class="php-quote">'num_topics'</span> =&gt; <span class="php-num">0</span>,
</span><span id="387" class="l">                <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="388" class="l">                <span class="php-quote">'unapproved_topics'</span> =&gt; <span class="php-num">0</span>,
</span><span id="389" class="l">                <span class="php-quote">'id_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]
</span><span id="390" class="l">            );
</span><span id="391" class="l">        }
</span><span id="392" class="l">        <span class="php-comment">// Posts = (num_replies + 1) for each approved topic.</span>
</span><span id="393" class="l">        <span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]][<span class="php-quote">'num_posts'</span>] += <span class="php-var">$row</span>[<span class="php-quote">'num_replies'</span>] + (<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] ? <span class="php-var">$row</span>[<span class="php-quote">'num_topics'</span>] : <span class="php-num">0</span>);
</span><span id="394" class="l">        <span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]][<span class="php-quote">'unapproved_posts'</span>] += <span class="php-var">$row</span>[<span class="php-quote">'unapproved_posts'</span>];
</span><span id="395" class="l">
</span><span id="396" class="l">        <span class="php-comment">// Add the topics to the right type.</span>
</span><span id="397" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>])
</span><span id="398" class="l">            <span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]][<span class="php-quote">'num_topics'</span>] += <span class="php-var">$row</span>[<span class="php-quote">'num_topics'</span>];
</span><span id="399" class="l">        <span class="php-keyword1">else</span>
</span><span id="400" class="l">            <span class="php-var">$adjustBoards</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]][<span class="php-quote">'unapproved_topics'</span>] += <span class="php-var">$row</span>[<span class="php-quote">'num_topics'</span>];
</span><span id="401" class="l">    }
</span><span id="402" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="403" class="l">
</span><span id="404" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$updateBoardCount</span>)
</span><span id="405" class="l">    {
</span><span id="406" class="l">        <span class="php-comment">// Decrease the posts/topics...</span>
</span><span id="407" class="l">        <span class="php-keyword1">foreach</span> (<span class="php-var">$adjustBoards</span> <span class="php-keyword1">as</span> <span class="php-var">$stats</span>)
</span><span id="408" class="l">        {
</span><span id="409" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword2">function_exists</span>(<span class="php-quote">'apache_reset_timeout'</span>))
</span><span id="410" class="l">                @apache_reset_timeout();
</span><span id="411" class="l">
</span><span id="412" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="413" class="l"><span class="php-quote">                UPDATE {db_prefix}boards
</span></span><span id="414" class="l"><span class="php-quote">                SET
</span></span><span id="415" class="l"><span class="php-quote">                    num_posts = CASE WHEN {int:num_posts} &gt; num_posts THEN 0 ELSE num_posts - {int:num_posts} END,
</span></span><span id="416" class="l"><span class="php-quote">                    num_topics = CASE WHEN {int:num_topics} &gt; num_topics THEN 0 ELSE num_topics - {int:num_topics} END,
</span></span><span id="417" class="l"><span class="php-quote">                    unapproved_posts = CASE WHEN {int:unapproved_posts} &gt; unapproved_posts THEN 0 ELSE unapproved_posts - {int:unapproved_posts} END,
</span></span><span id="418" class="l"><span class="php-quote">                    unapproved_topics = CASE WHEN {int:unapproved_topics} &gt; unapproved_topics THEN 0 ELSE unapproved_topics - {int:unapproved_topics} END
</span></span><span id="419" class="l"><span class="php-quote">                WHERE id_board = {int:id_board}'</span>,
</span><span id="420" class="l">                <span class="php-keyword1">array</span>(
</span><span id="421" class="l">                    <span class="php-quote">'id_board'</span> =&gt; <span class="php-var">$stats</span>[<span class="php-quote">'id_board'</span>],
</span><span id="422" class="l">                    <span class="php-quote">'num_posts'</span> =&gt; <span class="php-var">$stats</span>[<span class="php-quote">'num_posts'</span>],
</span><span id="423" class="l">                    <span class="php-quote">'num_topics'</span> =&gt; <span class="php-var">$stats</span>[<span class="php-quote">'num_topics'</span>],
</span><span id="424" class="l">                    <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-var">$stats</span>[<span class="php-quote">'unapproved_posts'</span>],
</span><span id="425" class="l">                    <span class="php-quote">'unapproved_topics'</span> =&gt; <span class="php-var">$stats</span>[<span class="php-quote">'unapproved_topics'</span>],
</span><span id="426" class="l">                )
</span><span id="427" class="l">            );
</span><span id="428" class="l">        }
</span><span id="429" class="l">    }
</span><span id="430" class="l">    <span class="php-comment">// Remove Polls.</span>
</span><span id="431" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="432" class="l"><span class="php-quote">        SELECT id_poll
</span></span><span id="433" class="l"><span class="php-quote">        FROM {db_prefix}topics
</span></span><span id="434" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})
</span></span><span id="435" class="l"><span class="php-quote">            AND id_poll &gt; {int:no_poll}
</span></span><span id="436" class="l"><span class="php-quote">        LIMIT {int:limit}'</span>,
</span><span id="437" class="l">        <span class="php-keyword1">array</span>(
</span><span id="438" class="l">            <span class="php-quote">'no_poll'</span> =&gt; <span class="php-num">0</span>,
</span><span id="439" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="440" class="l">            <span class="php-quote">'limit'</span> =&gt; <span class="php-keyword2">count</span>(<span class="php-var">$topics</span>),
</span><span id="441" class="l">        )
</span><span id="442" class="l">    );
</span><span id="443" class="l">    <span class="php-var">$polls</span> = <span class="php-keyword1">array</span>();
</span><span id="444" class="l">    <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="445" class="l">        <span class="php-var">$polls</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_poll'</span>];
</span><span id="446" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="447" class="l">
</span><span id="448" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$polls</span>))
</span><span id="449" class="l">    {
</span><span id="450" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="451" class="l"><span class="php-quote">            DELETE FROM {db_prefix}polls
</span></span><span id="452" class="l"><span class="php-quote">            WHERE id_poll IN ({array_int:polls})'</span>,
</span><span id="453" class="l">            <span class="php-keyword1">array</span>(
</span><span id="454" class="l">                <span class="php-quote">'polls'</span> =&gt; <span class="php-var">$polls</span>,
</span><span id="455" class="l">            )
</span><span id="456" class="l">        );
</span><span id="457" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="458" class="l"><span class="php-quote">            DELETE FROM {db_prefix}poll_choices
</span></span><span id="459" class="l"><span class="php-quote">            WHERE id_poll IN ({array_int:polls})'</span>,
</span><span id="460" class="l">            <span class="php-keyword1">array</span>(
</span><span id="461" class="l">                <span class="php-quote">'polls'</span> =&gt; <span class="php-var">$polls</span>,
</span><span id="462" class="l">            )
</span><span id="463" class="l">        );
</span><span id="464" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="465" class="l"><span class="php-quote">            DELETE FROM {db_prefix}log_polls
</span></span><span id="466" class="l"><span class="php-quote">            WHERE id_poll IN ({array_int:polls})'</span>,
</span><span id="467" class="l">            <span class="php-keyword1">array</span>(
</span><span id="468" class="l">                <span class="php-quote">'polls'</span> =&gt; <span class="php-var">$polls</span>,
</span><span id="469" class="l">            )
</span><span id="470" class="l">        );
</span><span id="471" class="l">    }
</span><span id="472" class="l">
</span><span id="473" class="l">    <span class="php-comment">// Get rid of the attachment, if it exists.</span>
</span><span id="474" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/ManageAttachments.php'</span>);
</span><span id="475" class="l">    <span class="php-var">$attachmentQuery</span> = <span class="php-keyword1">array</span>(
</span><span id="476" class="l">        <span class="php-quote">'attachment_type'</span> =&gt; <span class="php-num">0</span>,
</span><span id="477" class="l">        <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="478" class="l">    );
</span><span id="479" class="l">    removeAttachments(<span class="php-var">$attachmentQuery</span>, <span class="php-quote">'messages'</span>);
</span><span id="480" class="l">
</span><span id="481" class="l">    <span class="php-comment">// Delete possible search index entries.</span>
</span><span id="482" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'search_custom_index_config'</span>]))
</span><span id="483" class="l">    {
</span><span id="484" class="l">        <span class="php-var">$customIndexSettings</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'json_decode'</span>](<span class="php-var">$modSettings</span>[<span class="php-quote">'search_custom_index_config'</span>], <span class="php-keyword1">true</span>);
</span><span id="485" class="l">
</span><span id="486" class="l">        <span class="php-var">$words</span> = <span class="php-keyword1">array</span>();
</span><span id="487" class="l">        <span class="php-var">$messages</span> = <span class="php-keyword1">array</span>();
</span><span id="488" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="489" class="l"><span class="php-quote">            SELECT id_msg, body
</span></span><span id="490" class="l"><span class="php-quote">            FROM {db_prefix}messages
</span></span><span id="491" class="l"><span class="php-quote">            WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="492" class="l">            <span class="php-keyword1">array</span>(
</span><span id="493" class="l">                <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="494" class="l">            )
</span><span id="495" class="l">        );
</span><span id="496" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="497" class="l">        {
</span><span id="498" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword2">function_exists</span>(<span class="php-quote">'apache_reset_timeout'</span>))
</span><span id="499" class="l">                @apache_reset_timeout();
</span><span id="500" class="l">
</span><span id="501" class="l">            <span class="php-var">$words</span> = <span class="php-keyword2">array_merge</span>(<span class="php-var">$words</span>, text2words(<span class="php-var">$row</span>[<span class="php-quote">'body'</span>], <span class="php-var">$customIndexSettings</span>[<span class="php-quote">'bytes_per_word'</span>], <span class="php-keyword1">true</span>));
</span><span id="502" class="l">            <span class="php-var">$messages</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_msg'</span>];
</span><span id="503" class="l">        }
</span><span id="504" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="505" class="l">        <span class="php-var">$words</span> = <span class="php-keyword2">array_unique</span>(<span class="php-var">$words</span>);
</span><span id="506" class="l">
</span><span id="507" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$words</span>) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$messages</span>))
</span><span id="508" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="509" class="l"><span class="php-quote">                DELETE FROM {db_prefix}log_search_words
</span></span><span id="510" class="l"><span class="php-quote">                WHERE id_word IN ({array_int:word_list})
</span></span><span id="511" class="l"><span class="php-quote">                    AND id_msg IN ({array_int:message_list})'</span>,
</span><span id="512" class="l">                <span class="php-keyword1">array</span>(
</span><span id="513" class="l">                    <span class="php-quote">'word_list'</span> =&gt; <span class="php-var">$words</span>,
</span><span id="514" class="l">                    <span class="php-quote">'message_list'</span> =&gt; <span class="php-var">$messages</span>,
</span><span id="515" class="l">                )
</span><span id="516" class="l">            );
</span><span id="517" class="l">    }
</span><span id="518" class="l">
</span><span id="519" class="l">    <span class="php-comment">// Delete anything related to the topic.</span>
</span><span id="520" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="521" class="l"><span class="php-quote">        DELETE FROM {db_prefix}messages
</span></span><span id="522" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="523" class="l">        <span class="php-keyword1">array</span>(
</span><span id="524" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="525" class="l">        )
</span><span id="526" class="l">    );
</span><span id="527" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="528" class="l"><span class="php-quote">        DELETE FROM {db_prefix}calendar
</span></span><span id="529" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="530" class="l">        <span class="php-keyword1">array</span>(
</span><span id="531" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="532" class="l">        )
</span><span id="533" class="l">    );
</span><span id="534" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="535" class="l"><span class="php-quote">        DELETE FROM {db_prefix}log_topics
</span></span><span id="536" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="537" class="l">        <span class="php-keyword1">array</span>(
</span><span id="538" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="539" class="l">        )
</span><span id="540" class="l">    );
</span><span id="541" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="542" class="l"><span class="php-quote">        DELETE FROM {db_prefix}log_notify
</span></span><span id="543" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="544" class="l">        <span class="php-keyword1">array</span>(
</span><span id="545" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="546" class="l">        )
</span><span id="547" class="l">    );
</span><span id="548" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="549" class="l"><span class="php-quote">        DELETE FROM {db_prefix}topics
</span></span><span id="550" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="551" class="l">        <span class="php-keyword1">array</span>(
</span><span id="552" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="553" class="l">        )
</span><span id="554" class="l">    );
</span><span id="555" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="556" class="l"><span class="php-quote">        DELETE FROM {db_prefix}log_search_subjects
</span></span><span id="557" class="l"><span class="php-quote">        WHERE id_topic IN ({array_int:topics})'</span>,
</span><span id="558" class="l">        <span class="php-keyword1">array</span>(
</span><span id="559" class="l">            <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics</span>,
</span><span id="560" class="l">        )
</span><span id="561" class="l">    );
</span><span id="562" class="l">
</span><span id="563" class="l">    <span class="php-comment">// Maybe there's a mod that wants to delete topic related data of its own</span>
</span><span id="564" class="l">    call_integration_hook(<span class="php-quote">'integrate_remove_topics'</span>, <span class="php-keyword1">array</span>(<span class="php-var">$topics</span>));
</span><span id="565" class="l">
</span><span id="566" class="l">    <span class="php-comment">// Update the totals...</span>
</span><span id="567" class="l">    updateStats(<span class="php-quote">'message'</span>);
</span><span id="568" class="l">    updateStats(<span class="php-quote">'topic'</span>);
</span><span id="569" class="l">    updateSettings(<span class="php-keyword1">array</span>(
</span><span id="570" class="l">        <span class="php-quote">'calendar_updated'</span> =&gt; <span class="php-keyword2">time</span>(),
</span><span id="571" class="l">    ));
</span><span id="572" class="l">
</span><span id="573" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Subs-Post.php'</span>);
</span><span id="574" class="l">    <span class="php-var">$updates</span> = <span class="php-keyword1">array</span>();
</span><span id="575" class="l">    <span class="php-keyword1">foreach</span> (<span class="php-var">$adjustBoards</span> <span class="php-keyword1">as</span> <span class="php-var">$stats</span>)
</span><span id="576" class="l">        <span class="php-var">$updates</span>[] = <span class="php-var">$stats</span>[<span class="php-quote">'id_board'</span>];
</span><span id="577" class="l">    updateLastMessages(<span class="php-var">$updates</span>);
</span><span id="578" class="l">}
</span><span id="579" class="l">
</span><span id="580" class="l"><span class="php-comment">/**
</span></span><span id="581" class="l"><span class="php-comment"> * Remove a specific message (including permission checks).
</span></span><span id="582" class="l"><span class="php-comment"> * - normally, local and global should be the localCookies and globalCookies settings, respectively.
</span></span><span id="583" class="l"><span class="php-comment"> * - uses boardurl to determine these two things.
</span></span><span id="584" class="l"><span class="php-comment"> *
</span></span><span id="585" class="l"><span class="php-comment"> * @param int $message The message id
</span></span><span id="586" class="l"><span class="php-comment"> * @param bool $decreasePostCount Whether to decrease users' post counts
</span></span><span id="587" class="l"><span class="php-comment"> * @return bool Whether the operation succeeded
</span></span><span id="588" class="l"><span class="php-comment"> */</span>
</span><span id="589" class="l"><span class="php-keyword1">function</span> removeMessage(<span class="php-var">$message</span>, <span class="php-var">$decreasePostCount</span> = <span class="php-keyword1">true</span>)
</span><span id="590" class="l">{
</span><span id="591" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$board</span>, <span class="php-var">$sourcedir</span>, <span class="php-var">$modSettings</span>, <span class="php-var">$user_info</span>, <span class="php-var">$smcFunc</span>;
</span><span id="592" class="l">
</span><span id="593" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$message</span>) || !<span class="php-keyword2">is_numeric</span>(<span class="php-var">$message</span>))
</span><span id="594" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="595" class="l">
</span><span id="596" class="l">    <span class="php-var">$recycle_board</span> = !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]) ? (int) <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>] : <span class="php-num">0</span>;
</span><span id="597" class="l">
</span><span id="598" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="599" class="l"><span class="php-quote">        SELECT
</span></span><span id="600" class="l"><span class="php-quote">            m.id_member, m.icon, m.poster_time, m.subject,'</span> . (<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'search_custom_index_config'</span>]) ? <span class="php-quote">''</span> : <span class="php-quote">' m.body,'</span>) . <span class="php-quote">'
</span></span><span id="601" class="l"><span class="php-quote">            m.approved, t.id_topic, t.id_first_msg, t.id_last_msg, t.num_replies, t.id_board,
</span></span><span id="602" class="l"><span class="php-quote">            t.id_member_started AS id_member_poster,
</span></span><span id="603" class="l"><span class="php-quote">            b.count_posts
</span></span><span id="604" class="l"><span class="php-quote">        FROM {db_prefix}messages AS m
</span></span><span id="605" class="l"><span class="php-quote">            INNER JOIN {db_prefix}topics AS t ON (t.id_topic = m.id_topic)
</span></span><span id="606" class="l"><span class="php-quote">            INNER JOIN {db_prefix}boards AS b ON (b.id_board = t.id_board)
</span></span><span id="607" class="l"><span class="php-quote">        WHERE m.id_msg = {int:id_msg}
</span></span><span id="608" class="l"><span class="php-quote">        LIMIT 1'</span>,
</span><span id="609" class="l">        <span class="php-keyword1">array</span>(
</span><span id="610" class="l">            <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="611" class="l">        )
</span><span id="612" class="l">    );
</span><span id="613" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_num_rows'</span>](<span class="php-var">$request</span>) == <span class="php-num">0</span>)
</span><span id="614" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="615" class="l">
</span><span id="616" class="l">    <span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>);
</span><span id="617" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="618" class="l">
</span><span id="619" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$board</span>) || <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>] != <span class="php-var">$board</span>)
</span><span id="620" class="l">    {
</span><span id="621" class="l">        <span class="php-var">$delete_any</span> = boardsAllowedTo(<span class="php-quote">'delete_any'</span>);
</span><span id="622" class="l">
</span><span id="623" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$delete_any</span>) &amp;&amp; !<span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$delete_any</span>))
</span><span id="624" class="l">        {
</span><span id="625" class="l">            <span class="php-var">$delete_own</span> = boardsAllowedTo(<span class="php-quote">'delete_own'</span>);
</span><span id="626" class="l">            <span class="php-var">$delete_own</span> = <span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$delete_own</span>) || <span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$delete_own</span>);
</span><span id="627" class="l">            <span class="php-var">$delete_replies</span> = boardsAllowedTo(<span class="php-quote">'delete_replies'</span>);
</span><span id="628" class="l">            <span class="php-var">$delete_replies</span> = <span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$delete_replies</span>) || <span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$delete_replies</span>);
</span><span id="629" class="l">
</span><span id="630" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="631" class="l">            {
</span><span id="632" class="l">                <span class="php-keyword1">if</span> (!<span class="php-var">$delete_own</span>)
</span><span id="633" class="l">                {
</span><span id="634" class="l">                    <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="635" class="l">                    {
</span><span id="636" class="l">                        <span class="php-keyword1">if</span> (!<span class="php-var">$delete_replies</span>)
</span><span id="637" class="l">                            fatal_lang_error(<span class="php-quote">'cannot_delete_replies'</span>, <span class="php-quote">'permission'</span>);
</span><span id="638" class="l">                    }
</span><span id="639" class="l">                    <span class="php-keyword1">else</span>
</span><span id="640" class="l">                        fatal_lang_error(<span class="php-quote">'cannot_delete_own'</span>, <span class="php-quote">'permission'</span>);
</span><span id="641" class="l">                }
</span><span id="642" class="l">                <span class="php-keyword1">elseif</span> ((<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] || !<span class="php-var">$delete_replies</span>) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>]) &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'poster_time'</span>] + <span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>] * <span class="php-num">60</span> &lt; <span class="php-keyword2">time</span>())
</span><span id="643" class="l">                    fatal_lang_error(<span class="php-quote">'modify_post_time_passed'</span>, <span class="php-keyword1">false</span>);
</span><span id="644" class="l">            }
</span><span id="645" class="l">            <span class="php-keyword1">elseif</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="646" class="l">            {
</span><span id="647" class="l">                <span class="php-keyword1">if</span> (!<span class="php-var">$delete_replies</span>)
</span><span id="648" class="l">                    fatal_lang_error(<span class="php-quote">'cannot_delete_replies'</span>, <span class="php-quote">'permission'</span>);
</span><span id="649" class="l">            }
</span><span id="650" class="l">            <span class="php-keyword1">else</span>
</span><span id="651" class="l">                fatal_lang_error(<span class="php-quote">'cannot_delete_any'</span>, <span class="php-quote">'permission'</span>);
</span><span id="652" class="l">        }
</span><span id="653" class="l">
</span><span id="654" class="l">        <span class="php-comment">// Can't delete an unapproved message, if you can't see it!</span>
</span><span id="655" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] &amp;&amp; !<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !(<span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$delete_any</span>) || <span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$delete_any</span>)))
</span><span id="656" class="l">        {
</span><span id="657" class="l">            <span class="php-var">$approve_posts</span> = boardsAllowedTo(<span class="php-quote">'approve_posts'</span>);
</span><span id="658" class="l">            <span class="php-keyword1">if</span> (!<span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$approve_posts</span>) &amp;&amp; !<span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$approve_posts</span>))
</span><span id="659" class="l">                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="660" class="l">        }
</span><span id="661" class="l">    }
</span><span id="662" class="l">    <span class="php-keyword1">else</span>
</span><span id="663" class="l">    {
</span><span id="664" class="l">        <span class="php-comment">// Check permissions to delete this message.</span>
</span><span id="665" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="666" class="l">        {
</span><span id="667" class="l">            <span class="php-keyword1">if</span> (!allowedTo(<span class="php-quote">'delete_own'</span>))
</span><span id="668" class="l">            {
</span><span id="669" class="l">                <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="670" class="l">                    isAllowedTo(<span class="php-quote">'delete_replies'</span>);
</span><span id="671" class="l">                <span class="php-keyword1">elseif</span> (!allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="672" class="l">                    isAllowedTo(<span class="php-quote">'delete_own'</span>);
</span><span id="673" class="l">            }
</span><span id="674" class="l">            <span class="php-keyword1">elseif</span> (!allowedTo(<span class="php-quote">'delete_any'</span>) &amp;&amp; (<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] || !allowedTo(<span class="php-quote">'delete_replies'</span>)) &amp;&amp; !<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>]) &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'poster_time'</span>] + <span class="php-var">$modSettings</span>[<span class="php-quote">'edit_disable_time'</span>] * <span class="php-num">60</span> &lt; <span class="php-keyword2">time</span>())
</span><span id="675" class="l">                fatal_lang_error(<span class="php-quote">'modify_post_time_passed'</span>, <span class="php-keyword1">false</span>);
</span><span id="676" class="l">        }
</span><span id="677" class="l">        <span class="php-keyword1">elseif</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member_poster'</span>] == <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'delete_any'</span>))
</span><span id="678" class="l">            isAllowedTo(<span class="php-quote">'delete_replies'</span>);
</span><span id="679" class="l">        <span class="php-keyword1">else</span>
</span><span id="680" class="l">            isAllowedTo(<span class="php-quote">'delete_any'</span>);
</span><span id="681" class="l">
</span><span id="682" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] &amp;&amp; !<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !allowedTo(<span class="php-quote">'delete_own'</span>))
</span><span id="683" class="l">            isAllowedTo(<span class="php-quote">'approve_posts'</span>);
</span><span id="684" class="l">    }
</span><span id="685" class="l">
</span><span id="686" class="l">    <span class="php-comment">// Delete the *whole* topic, but only if the topic consists of one message.</span>
</span><span id="687" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>] == <span class="php-var">$message</span>)
</span><span id="688" class="l">    {
</span><span id="689" class="l">        <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$board</span>) || <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>] != <span class="php-var">$board</span>)
</span><span id="690" class="l">        {
</span><span id="691" class="l">            <span class="php-var">$remove_any</span> = boardsAllowedTo(<span class="php-quote">'remove_any'</span>);
</span><span id="692" class="l">            <span class="php-var">$remove_any</span> = <span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$remove_any</span>) || <span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$remove_any</span>);
</span><span id="693" class="l">            <span class="php-keyword1">if</span> (!<span class="php-var">$remove_any</span>)
</span><span id="694" class="l">            {
</span><span id="695" class="l">                <span class="php-var">$remove_own</span> = boardsAllowedTo(<span class="php-quote">'remove_own'</span>);
</span><span id="696" class="l">                <span class="php-var">$remove_own</span> = <span class="php-keyword2">in_array</span>(<span class="php-num">0</span>, <span class="php-var">$remove_own</span>) || <span class="php-keyword2">in_array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$remove_own</span>);
</span><span id="697" class="l">            }
</span><span id="698" class="l">
</span><span id="699" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>] &amp;&amp; !<span class="php-var">$remove_any</span>)
</span><span id="700" class="l">                fatal_lang_error(<span class="php-quote">'cannot_remove_any'</span>, <span class="php-quote">'permission'</span>);
</span><span id="701" class="l">            <span class="php-keyword1">elseif</span> (!<span class="php-var">$remove_any</span> &amp;&amp; !<span class="php-var">$remove_own</span>)
</span><span id="702" class="l">                fatal_lang_error(<span class="php-quote">'cannot_remove_own'</span>, <span class="php-quote">'permission'</span>);
</span><span id="703" class="l">        }
</span><span id="704" class="l">        <span class="php-keyword1">else</span>
</span><span id="705" class="l">        {
</span><span id="706" class="l">            <span class="php-comment">// Check permissions to delete a whole topic.</span>
</span><span id="707" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>] != <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>])
</span><span id="708" class="l">                isAllowedTo(<span class="php-quote">'remove_any'</span>);
</span><span id="709" class="l">            <span class="php-keyword1">elseif</span> (!allowedTo(<span class="php-quote">'remove_any'</span>))
</span><span id="710" class="l">                isAllowedTo(<span class="php-quote">'remove_own'</span>);
</span><span id="711" class="l">        }
</span><span id="712" class="l">
</span><span id="713" class="l">        <span class="php-comment">// ...if there is only one post.</span>
</span><span id="714" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$row</span>[<span class="php-quote">'num_replies'</span>]))
</span><span id="715" class="l">            fatal_lang_error(<span class="php-quote">'delFirstPost'</span>, <span class="php-keyword1">false</span>);
</span><span id="716" class="l">
</span><span id="717" class="l">        removeTopics(<span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>]);
</span><span id="718" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">true</span>;
</span><span id="719" class="l">    }
</span><span id="720" class="l">
</span><span id="721" class="l">    <span class="php-comment">// Deleting a recycled message can not lower anyone's post count.</span>
</span><span id="722" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$recycle_board</span>) &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>] == <span class="php-var">$recycle_board</span>)
</span><span id="723" class="l">        <span class="php-var">$decreasePostCount</span> = <span class="php-keyword1">false</span>;
</span><span id="724" class="l">
</span><span id="725" class="l">    <span class="php-comment">// This is the last post, update the last post on the board.</span>
</span><span id="726" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_last_msg'</span>] == <span class="php-var">$message</span>)
</span><span id="727" class="l">    {
</span><span id="728" class="l">        <span class="php-comment">// Find the last message, set it, and decrease the post count.</span>
</span><span id="729" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="730" class="l"><span class="php-quote">            SELECT id_msg, id_member
</span></span><span id="731" class="l"><span class="php-quote">            FROM {db_prefix}messages
</span></span><span id="732" class="l"><span class="php-quote">            WHERE id_topic = {int:id_topic}
</span></span><span id="733" class="l"><span class="php-quote">                AND id_msg != {int:id_msg}
</span></span><span id="734" class="l"><span class="php-quote">            ORDER BY '</span> . (<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] ? <span class="php-quote">'approved DESC, '</span> : <span class="php-quote">''</span>) . <span class="php-quote">'id_msg DESC
</span></span><span id="735" class="l"><span class="php-quote">            LIMIT 1'</span>,
</span><span id="736" class="l">            <span class="php-keyword1">array</span>(
</span><span id="737" class="l">                <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="738" class="l">                <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="739" class="l">            )
</span><span id="740" class="l">        );
</span><span id="741" class="l">        <span class="php-var">$row2</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>);
</span><span id="742" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="743" class="l">
</span><span id="744" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="745" class="l"><span class="php-quote">            UPDATE {db_prefix}topics
</span></span><span id="746" class="l"><span class="php-quote">            SET
</span></span><span id="747" class="l"><span class="php-quote">                id_last_msg = {int:id_last_msg},
</span></span><span id="748" class="l"><span class="php-quote">                id_member_updated = {int:id_member_updated}'</span> . (!<span class="php-var">$modSettings</span>[<span class="php-quote">'postmod_active'</span>] || <span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] ? <span class="php-quote">',
</span></span><span id="749" class="l"><span class="php-quote">                num_replies = CASE WHEN num_replies = {int:no_replies} THEN 0 ELSE num_replies - 1 END'</span> : <span class="php-quote">',
</span></span><span id="750" class="l"><span class="php-quote">                unapproved_posts = CASE WHEN unapproved_posts = {int:no_unapproved} THEN 0 ELSE unapproved_posts - 1 END'</span>) . <span class="php-quote">'
</span></span><span id="751" class="l"><span class="php-quote">            WHERE id_topic = {int:id_topic}'</span>,
</span><span id="752" class="l">            <span class="php-keyword1">array</span>(
</span><span id="753" class="l">                <span class="php-quote">'id_last_msg'</span> =&gt; <span class="php-var">$row2</span>[<span class="php-quote">'id_msg'</span>],
</span><span id="754" class="l">                <span class="php-quote">'id_member_updated'</span> =&gt; <span class="php-var">$row2</span>[<span class="php-quote">'id_member'</span>],
</span><span id="755" class="l">                <span class="php-quote">'no_replies'</span> =&gt; <span class="php-num">0</span>,
</span><span id="756" class="l">                <span class="php-quote">'no_unapproved'</span> =&gt; <span class="php-num">0</span>,
</span><span id="757" class="l">                <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="758" class="l">            )
</span><span id="759" class="l">        );
</span><span id="760" class="l">    }
</span><span id="761" class="l">    <span class="php-comment">// Only decrease post counts.</span>
</span><span id="762" class="l">    <span class="php-keyword1">else</span>
</span><span id="763" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="764" class="l"><span class="php-quote">            UPDATE {db_prefix}topics
</span></span><span id="765" class="l"><span class="php-quote">            SET '</span> . (<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] ? <span class="php-quote">'
</span></span><span id="766" class="l"><span class="php-quote">                num_replies = CASE WHEN num_replies = {int:no_replies} THEN 0 ELSE num_replies - 1 END'</span> : <span class="php-quote">'
</span></span><span id="767" class="l"><span class="php-quote">                unapproved_posts = CASE WHEN unapproved_posts = {int:no_unapproved} THEN 0 ELSE unapproved_posts - 1 END'</span>) . <span class="php-quote">'
</span></span><span id="768" class="l"><span class="php-quote">            WHERE id_topic = {int:id_topic}'</span>,
</span><span id="769" class="l">            <span class="php-keyword1">array</span>(
</span><span id="770" class="l">                <span class="php-quote">'no_replies'</span> =&gt; <span class="php-num">0</span>,
</span><span id="771" class="l">                <span class="php-quote">'no_unapproved'</span> =&gt; <span class="php-num">0</span>,
</span><span id="772" class="l">                <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="773" class="l">            )
</span><span id="774" class="l">        );
</span><span id="775" class="l">
</span><span id="776" class="l">    <span class="php-comment">// Default recycle to false.</span>
</span><span id="777" class="l">    <span class="php-var">$recycle</span> = <span class="php-keyword1">false</span>;
</span><span id="778" class="l">
</span><span id="779" class="l">    <span class="php-comment">// If recycle topics has been set, make a copy of this message in the recycle board.</span>
</span><span id="780" class="l">    <span class="php-comment">// Make sure we're not recycling messages that are already on the recycle board.</span>
</span><span id="781" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]) &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>] != <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>] &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'icon'</span>] != <span class="php-quote">'recycled'</span>)
</span><span id="782" class="l">    {
</span><span id="783" class="l">        <span class="php-comment">// Check if the recycle board exists and if so get the read status.</span>
</span><span id="784" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="785" class="l"><span class="php-quote">            SELECT (COALESCE(lb.id_msg, 0) &gt;= b.id_msg_updated) AS is_seen, id_last_msg
</span></span><span id="786" class="l"><span class="php-quote">            FROM {db_prefix}boards AS b
</span></span><span id="787" class="l"><span class="php-quote">                LEFT JOIN {db_prefix}log_boards AS lb ON (lb.id_board = b.id_board AND lb.id_member = {int:current_member})
</span></span><span id="788" class="l"><span class="php-quote">            WHERE b.id_board = {int:recycle_board}'</span>,
</span><span id="789" class="l">            <span class="php-keyword1">array</span>(
</span><span id="790" class="l">                <span class="php-quote">'current_member'</span> =&gt; <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>],
</span><span id="791" class="l">                <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>],
</span><span id="792" class="l">            )
</span><span id="793" class="l">        );
</span><span id="794" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_num_rows'</span>](<span class="php-var">$request</span>) == <span class="php-num">0</span>)
</span><span id="795" class="l">            fatal_lang_error(<span class="php-quote">'recycle_no_valid_board'</span>);
</span><span id="796" class="l">        <span class="php-keyword1">list</span> (<span class="php-var">$isRead</span>, <span class="php-var">$last_board_msg</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="797" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="798" class="l">
</span><span id="799" class="l">        <span class="php-comment">// Is there an existing topic in the recycle board to group this post with?</span>
</span><span id="800" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="801" class="l"><span class="php-quote">            SELECT id_topic, id_first_msg, id_last_msg
</span></span><span id="802" class="l"><span class="php-quote">            FROM {db_prefix}topics
</span></span><span id="803" class="l"><span class="php-quote">            WHERE id_previous_topic = {int:id_previous_topic}
</span></span><span id="804" class="l"><span class="php-quote">                AND id_board = {int:recycle_board}'</span>,
</span><span id="805" class="l">            <span class="php-keyword1">array</span>(
</span><span id="806" class="l">                <span class="php-quote">'id_previous_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="807" class="l">                <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>],
</span><span id="808" class="l">            )
</span><span id="809" class="l">        );
</span><span id="810" class="l">        <span class="php-keyword1">list</span> (<span class="php-var">$id_recycle_topic</span>, <span class="php-var">$first_topic_msg</span>, <span class="php-var">$last_topic_msg</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="811" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="812" class="l">
</span><span id="813" class="l">        <span class="php-comment">// Insert a new topic in the recycle board if $id_recycle_topic is empty.</span>
</span><span id="814" class="l">        <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$id_recycle_topic</span>))
</span><span id="815" class="l">            <span class="php-var">$id_topic</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_insert'</span>](<span class="php-quote">''</span>,
</span><span id="816" class="l">                <span class="php-quote">'{db_prefix}topics'</span>,
</span><span id="817" class="l">                <span class="php-keyword1">array</span>(
</span><span id="818" class="l">                    <span class="php-quote">'id_board'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_member_started'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_member_updated'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_first_msg'</span> =&gt; <span class="php-quote">'int'</span>,
</span><span id="819" class="l">                    <span class="php-quote">'id_last_msg'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'approved'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_previous_topic'</span> =&gt; <span class="php-quote">'int'</span>,
</span><span id="820" class="l">                ),
</span><span id="821" class="l">                <span class="php-keyword1">array</span>(
</span><span id="822" class="l">                    <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>], <span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>], <span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>], <span class="php-var">$message</span>,
</span><span id="823" class="l">                    <span class="php-var">$message</span>, <span class="php-num">0</span>, <span class="php-num">1</span>, <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="824" class="l">                ),
</span><span id="825" class="l">                <span class="php-keyword1">array</span>(<span class="php-quote">'id_topic'</span>),
</span><span id="826" class="l">                <span class="php-num">1</span>
</span><span id="827" class="l">            );
</span><span id="828" class="l">
</span><span id="829" class="l">        <span class="php-comment">// Capture the ID of the new topic...</span>
</span><span id="830" class="l">        <span class="php-var">$topicID</span> = <span class="php-keyword1">empty</span>(<span class="php-var">$id_recycle_topic</span>) ? <span class="php-var">$id_topic</span> : <span class="php-var">$id_recycle_topic</span>;
</span><span id="831" class="l">
</span><span id="832" class="l">        <span class="php-comment">// If the topic creation went successful, move the message.</span>
</span><span id="833" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$topicID</span> &gt; <span class="php-num">0</span>)
</span><span id="834" class="l">        {
</span><span id="835" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="836" class="l"><span class="php-quote">                UPDATE {db_prefix}messages
</span></span><span id="837" class="l"><span class="php-quote">                SET
</span></span><span id="838" class="l"><span class="php-quote">                    id_topic = {int:id_topic},
</span></span><span id="839" class="l"><span class="php-quote">                    id_board = {int:recycle_board},
</span></span><span id="840" class="l"><span class="php-quote">                    approved = {int:is_approved}
</span></span><span id="841" class="l"><span class="php-quote">                WHERE id_msg = {int:id_msg}'</span>,
</span><span id="842" class="l">                <span class="php-keyword1">array</span>(
</span><span id="843" class="l">                    <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$topicID</span>,
</span><span id="844" class="l">                    <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>],
</span><span id="845" class="l">                    <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="846" class="l">                    <span class="php-quote">'is_approved'</span> =&gt; <span class="php-num">1</span>,
</span><span id="847" class="l">                )
</span><span id="848" class="l">            );
</span><span id="849" class="l">
</span><span id="850" class="l">            <span class="php-comment">// Take any reported posts with us...</span>
</span><span id="851" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="852" class="l"><span class="php-quote">                UPDATE {db_prefix}log_reported
</span></span><span id="853" class="l"><span class="php-quote">                SET
</span></span><span id="854" class="l"><span class="php-quote">                    id_topic = {int:id_topic},
</span></span><span id="855" class="l"><span class="php-quote">                    id_board = {int:recycle_board}
</span></span><span id="856" class="l"><span class="php-quote">                WHERE id_msg = {int:id_msg}'</span>,
</span><span id="857" class="l">                <span class="php-keyword1">array</span>(
</span><span id="858" class="l">                    <span class="php-quote">'id_topic'</span> =&gt; <span class="php-var">$topicID</span>,
</span><span id="859" class="l">                    <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>],
</span><span id="860" class="l">                    <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="861" class="l">                )
</span><span id="862" class="l">            );
</span><span id="863" class="l">
</span><span id="864" class="l">            <span class="php-comment">// Mark recycled topic as read.</span>
</span><span id="865" class="l">            <span class="php-keyword1">if</span> (!<span class="php-var">$user_info</span>[<span class="php-quote">'is_guest'</span>])
</span><span id="866" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_insert'</span>](<span class="php-quote">'replace'</span>,
</span><span id="867" class="l">                    <span class="php-quote">'{db_prefix}log_topics'</span>,
</span><span id="868" class="l">                    <span class="php-keyword1">array</span>(<span class="php-quote">'id_topic'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_member'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_msg'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'unwatched'</span> =&gt; <span class="php-quote">'int'</span>),
</span><span id="869" class="l">                    <span class="php-keyword1">array</span>(<span class="php-var">$topicID</span>, <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>], <span class="php-var">$modSettings</span>[<span class="php-quote">'maxMsgID'</span>], <span class="php-num">0</span>),
</span><span id="870" class="l">                    <span class="php-keyword1">array</span>(<span class="php-quote">'id_topic'</span>, <span class="php-quote">'id_member'</span>)
</span><span id="871" class="l">                );
</span><span id="872" class="l">
</span><span id="873" class="l">            <span class="php-comment">// Mark recycle board as seen, if it was marked as seen before.</span>
</span><span id="874" class="l">            <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$isRead</span>) &amp;&amp; !<span class="php-var">$user_info</span>[<span class="php-quote">'is_guest'</span>])
</span><span id="875" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_insert'</span>](<span class="php-quote">'replace'</span>,
</span><span id="876" class="l">                    <span class="php-quote">'{db_prefix}log_boards'</span>,
</span><span id="877" class="l">                    <span class="php-keyword1">array</span>(<span class="php-quote">'id_board'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_member'</span> =&gt; <span class="php-quote">'int'</span>, <span class="php-quote">'id_msg'</span> =&gt; <span class="php-quote">'int'</span>),
</span><span id="878" class="l">                    <span class="php-keyword1">array</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>], <span class="php-var">$user_info</span>[<span class="php-quote">'id'</span>], <span class="php-var">$modSettings</span>[<span class="php-quote">'maxMsgID'</span>]),
</span><span id="879" class="l">                    <span class="php-keyword1">array</span>(<span class="php-quote">'id_board'</span>, <span class="php-quote">'id_member'</span>)
</span><span id="880" class="l">                );
</span><span id="881" class="l">
</span><span id="882" class="l">            <span class="php-comment">// Add one topic and post to the recycle bin board.</span>
</span><span id="883" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="884" class="l"><span class="php-quote">                UPDATE {db_prefix}boards
</span></span><span id="885" class="l"><span class="php-quote">                SET
</span></span><span id="886" class="l"><span class="php-quote">                    num_topics = num_topics + {int:num_topics_inc},
</span></span><span id="887" class="l"><span class="php-quote">                    num_posts = num_posts + 1'</span> .
</span><span id="888" class="l">                        (<span class="php-var">$message</span> &gt; <span class="php-var">$last_board_msg</span> ? <span class="php-quote">', id_last_msg = {int:id_merged_msg}'</span> : <span class="php-quote">''</span>) . <span class="php-quote">'
</span></span><span id="889" class="l"><span class="php-quote">                WHERE id_board = {int:recycle_board}'</span>,
</span><span id="890" class="l">                <span class="php-keyword1">array</span>(
</span><span id="891" class="l">                    <span class="php-quote">'num_topics_inc'</span> =&gt; <span class="php-keyword1">empty</span>(<span class="php-var">$id_recycle_topic</span>) ? <span class="php-num">1</span> : <span class="php-num">0</span>,
</span><span id="892" class="l">                    <span class="php-quote">'recycle_board'</span> =&gt; <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>],
</span><span id="893" class="l">                    <span class="php-quote">'id_merged_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="894" class="l">                )
</span><span id="895" class="l">            );
</span><span id="896" class="l">
</span><span id="897" class="l">            <span class="php-comment">// Lets increase the num_replies, and the first/last message ID as appropriate.</span>
</span><span id="898" class="l">            <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$id_recycle_topic</span>))
</span><span id="899" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="900" class="l"><span class="php-quote">                    UPDATE {db_prefix}topics
</span></span><span id="901" class="l"><span class="php-quote">                    SET num_replies = num_replies + 1'</span> .
</span><span id="902" class="l">                        (<span class="php-var">$message</span> &gt; <span class="php-var">$last_topic_msg</span> ? <span class="php-quote">', id_last_msg = {int:id_merged_msg}'</span> : <span class="php-quote">''</span>) .
</span><span id="903" class="l">                        (<span class="php-var">$message</span> &lt; <span class="php-var">$first_topic_msg</span> ? <span class="php-quote">', id_first_msg = {int:id_merged_msg}'</span> : <span class="php-quote">''</span>) . <span class="php-quote">'
</span></span><span id="904" class="l"><span class="php-quote">                    WHERE id_topic = {int:id_recycle_topic}'</span>,
</span><span id="905" class="l">                    <span class="php-keyword1">array</span>(
</span><span id="906" class="l">                        <span class="php-quote">'id_recycle_topic'</span> =&gt; <span class="php-var">$id_recycle_topic</span>,
</span><span id="907" class="l">                        <span class="php-quote">'id_merged_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="908" class="l">                    )
</span><span id="909" class="l">                );
</span><span id="910" class="l">
</span><span id="911" class="l">            <span class="php-comment">// Make sure this message isn't getting deleted later on.</span>
</span><span id="912" class="l">            <span class="php-var">$recycle</span> = <span class="php-keyword1">true</span>;
</span><span id="913" class="l">
</span><span id="914" class="l">            <span class="php-comment">// Make sure we update the search subject index.</span>
</span><span id="915" class="l">            updateStats(<span class="php-quote">'subject'</span>, <span class="php-var">$topicID</span>, <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>]);
</span><span id="916" class="l">        }
</span><span id="917" class="l">
</span><span id="918" class="l">        <span class="php-comment">// If it wasn't approved don't keep it in the queue.</span>
</span><span id="919" class="l">        <span class="php-keyword1">if</span> (!<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>])
</span><span id="920" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="921" class="l"><span class="php-quote">                DELETE FROM {db_prefix}approval_queue
</span></span><span id="922" class="l"><span class="php-quote">                WHERE id_msg = {int:id_msg}
</span></span><span id="923" class="l"><span class="php-quote">                    AND id_attach = {int:id_attach}'</span>,
</span><span id="924" class="l">                <span class="php-keyword1">array</span>(
</span><span id="925" class="l">                    <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="926" class="l">                    <span class="php-quote">'id_attach'</span> =&gt; <span class="php-num">0</span>,
</span><span id="927" class="l">                )
</span><span id="928" class="l">            );
</span><span id="929" class="l">    }
</span><span id="930" class="l">
</span><span id="931" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="932" class="l"><span class="php-quote">        UPDATE {db_prefix}boards
</span></span><span id="933" class="l"><span class="php-quote">        SET '</span> . (<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>] ? <span class="php-quote">'
</span></span><span id="934" class="l"><span class="php-quote">            num_posts = CASE WHEN num_posts = {int:no_posts} THEN 0 ELSE num_posts - 1 END'</span> : <span class="php-quote">'
</span></span><span id="935" class="l"><span class="php-quote">            unapproved_posts = CASE WHEN unapproved_posts = {int:no_unapproved} THEN 0 ELSE unapproved_posts - 1 END'</span>) . <span class="php-quote">'
</span></span><span id="936" class="l"><span class="php-quote">        WHERE id_board = {int:id_board}'</span>,
</span><span id="937" class="l">        <span class="php-keyword1">array</span>(
</span><span id="938" class="l">            <span class="php-quote">'no_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="939" class="l">            <span class="php-quote">'no_unapproved'</span> =&gt; <span class="php-num">0</span>,
</span><span id="940" class="l">            <span class="php-quote">'id_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>],
</span><span id="941" class="l">        )
</span><span id="942" class="l">    );
</span><span id="943" class="l">
</span><span id="944" class="l">    <span class="php-comment">// If the poster was registered and the board this message was on incremented</span>
</span><span id="945" class="l">    <span class="php-comment">// the member's posts when it was posted, decrease his or her post count.</span>
</span><span id="946" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>]) &amp;&amp; <span class="php-var">$decreasePostCount</span> &amp;&amp; <span class="php-keyword1">empty</span>(<span class="php-var">$row</span>[<span class="php-quote">'count_posts'</span>]) &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'approved'</span>])
</span><span id="947" class="l">        updateMemberData(<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>], <span class="php-keyword1">array</span>(<span class="php-quote">'posts'</span> =&gt; <span class="php-quote">'-'</span>));
</span><span id="948" class="l">
</span><span id="949" class="l">    <span class="php-comment">// Only remove posts if they're not recycled.</span>
</span><span id="950" class="l">    <span class="php-keyword1">if</span> (!<span class="php-var">$recycle</span>)
</span><span id="951" class="l">    {
</span><span id="952" class="l">        <span class="php-comment">// Callback for search APIs to do their thing</span>
</span><span id="953" class="l">        <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Search.php'</span>);
</span><span id="954" class="l">        <span class="php-var">$searchAPI</span> = findSearchAPI();
</span><span id="955" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$searchAPI</span>-&gt;supportsMethod(<span class="php-quote">'postRemoved'</span>))
</span><span id="956" class="l">            <span class="php-var">$searchAPI</span>-&gt;postRemoved(<span class="php-var">$message</span>);
</span><span id="957" class="l">
</span><span id="958" class="l">        <span class="php-comment">// Remove the message!</span>
</span><span id="959" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="960" class="l"><span class="php-quote">            DELETE FROM {db_prefix}messages
</span></span><span id="961" class="l"><span class="php-quote">            WHERE id_msg = {int:id_msg}'</span>,
</span><span id="962" class="l">            <span class="php-keyword1">array</span>(
</span><span id="963" class="l">                <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="964" class="l">            )
</span><span id="965" class="l">        );
</span><span id="966" class="l">
</span><span id="967" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'search_custom_index_config'</span>]))
</span><span id="968" class="l">        {
</span><span id="969" class="l">            <span class="php-var">$customIndexSettings</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'json_decode'</span>](<span class="php-var">$modSettings</span>[<span class="php-quote">'search_custom_index_config'</span>], <span class="php-keyword1">true</span>);
</span><span id="970" class="l">            <span class="php-var">$words</span> = text2words(<span class="php-var">$row</span>[<span class="php-quote">'body'</span>], <span class="php-var">$customIndexSettings</span>[<span class="php-quote">'bytes_per_word'</span>], <span class="php-keyword1">true</span>);
</span><span id="971" class="l">            <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$words</span>))
</span><span id="972" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="973" class="l"><span class="php-quote">                    DELETE FROM {db_prefix}log_search_words
</span></span><span id="974" class="l"><span class="php-quote">                    WHERE id_word IN ({array_int:word_list})
</span></span><span id="975" class="l"><span class="php-quote">                        AND id_msg = {int:id_msg}'</span>,
</span><span id="976" class="l">                    <span class="php-keyword1">array</span>(
</span><span id="977" class="l">                        <span class="php-quote">'word_list'</span> =&gt; <span class="php-var">$words</span>,
</span><span id="978" class="l">                        <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="979" class="l">                    )
</span><span id="980" class="l">                );
</span><span id="981" class="l">        }
</span><span id="982" class="l">
</span><span id="983" class="l">        <span class="php-comment">// Delete attachment(s) if they exist.</span>
</span><span id="984" class="l">        <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/ManageAttachments.php'</span>);
</span><span id="985" class="l">        <span class="php-var">$attachmentQuery</span> = <span class="php-keyword1">array</span>(
</span><span id="986" class="l">            <span class="php-quote">'attachment_type'</span> =&gt; <span class="php-num">0</span>,
</span><span id="987" class="l">            <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="988" class="l">        );
</span><span id="989" class="l">        removeAttachments(<span class="php-var">$attachmentQuery</span>);
</span><span id="990" class="l">    }
</span><span id="991" class="l">
</span><span id="992" class="l">    <span class="php-comment">// Allow mods to remove message related data of their own (likes, maybe?)</span>
</span><span id="993" class="l">    call_integration_hook(<span class="php-quote">'integrate_remove_message'</span>, <span class="php-keyword1">array</span>(<span class="php-var">$message</span>, <span class="php-var">$row</span>, <span class="php-var">$recycle</span>));
</span><span id="994" class="l">
</span><span id="995" class="l">    <span class="php-comment">// Update the pesky statistics.</span>
</span><span id="996" class="l">    updateStats(<span class="php-quote">'message'</span>);
</span><span id="997" class="l">    updateStats(<span class="php-quote">'topic'</span>);
</span><span id="998" class="l">    updateSettings(<span class="php-keyword1">array</span>(
</span><span id="999" class="l">        <span class="php-quote">'calendar_updated'</span> =&gt; <span class="php-keyword2">time</span>(),
</span><span id="1000" class="l">    ));
</span><span id="1001" class="l">
</span><span id="1002" class="l">    <span class="php-comment">// And now to update the last message of each board we messed with.</span>
</span><span id="1003" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Subs-Post.php'</span>);
</span><span id="1004" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$recycle</span>)
</span><span id="1005" class="l">        updateLastMessages(<span class="php-keyword1">array</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]));
</span><span id="1006" class="l">    <span class="php-keyword1">else</span>
</span><span id="1007" class="l">        updateLastMessages(<span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>]);
</span><span id="1008" class="l">
</span><span id="1009" class="l">    <span class="php-comment">// Close any moderation reports for this message.</span>
</span><span id="1010" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1011" class="l"><span class="php-quote">        UPDATE {db_prefix}log_reported
</span></span><span id="1012" class="l"><span class="php-quote">        SET closed = {int:is_closed}
</span></span><span id="1013" class="l"><span class="php-quote">        WHERE id_msg = {int:id_msg}'</span>,
</span><span id="1014" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1015" class="l">            <span class="php-quote">'is_closed'</span> =&gt; <span class="php-num">1</span>,
</span><span id="1016" class="l">            <span class="php-quote">'id_msg'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="1017" class="l">        )
</span><span id="1018" class="l">    );
</span><span id="1019" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_affected_rows'</span>]() != <span class="php-num">0</span>)
</span><span id="1020" class="l">    {
</span><span id="1021" class="l">        <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/ModerationCenter.php'</span>);
</span><span id="1022" class="l">        updateSettings(<span class="php-keyword1">array</span>(<span class="php-quote">'last_mod_report_action'</span> =&gt; <span class="php-keyword2">time</span>()));
</span><span id="1023" class="l">        recountOpenReports(<span class="php-quote">'posts'</span>);
</span><span id="1024" class="l">    }
</span><span id="1025" class="l">
</span><span id="1026" class="l">    <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1027" class="l">}
</span><span id="1028" class="l">
</span><span id="1029" class="l"><span class="php-comment">/**
</span></span><span id="1030" class="l"><span class="php-comment"> * Move back a topic from the recycle board to its original board.
</span></span><span id="1031" class="l"><span class="php-comment"> */</span>
</span><span id="1032" class="l"><span class="php-keyword1">function</span> RestoreTopic()
</span><span id="1033" class="l">{
</span><span id="1034" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$smcFunc</span>, <span class="php-var">$modSettings</span>, <span class="php-var">$sourcedir</span>;
</span><span id="1035" class="l">
</span><span id="1036" class="l">    <span class="php-comment">// Check session.</span>
</span><span id="1037" class="l">    checkSession(<span class="php-quote">'get'</span>);
</span><span id="1038" class="l">
</span><span id="1039" class="l">    <span class="php-comment">// Is recycled board enabled?</span>
</span><span id="1040" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]))
</span><span id="1041" class="l">        fatal_lang_error(<span class="php-quote">'restored_disabled'</span>, <span class="php-quote">'critical'</span>);
</span><span id="1042" class="l">
</span><span id="1043" class="l">    <span class="php-comment">// Can we be in here?</span>
</span><span id="1044" class="l">    isAllowedTo(<span class="php-quote">'move_any'</span>, <span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]);
</span><span id="1045" class="l">
</span><span id="1046" class="l">    <span class="php-comment">// We need this file.</span>
</span><span id="1047" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/MoveTopic.php'</span>);
</span><span id="1048" class="l">
</span><span id="1049" class="l">    <span class="php-var">$unfound_messages</span> = <span class="php-keyword1">array</span>();
</span><span id="1050" class="l">    <span class="php-var">$topics_to_restore</span> = <span class="php-keyword1">array</span>();
</span><span id="1051" class="l">
</span><span id="1052" class="l">    <span class="php-comment">// Restoring messages?</span>
</span><span id="1053" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'msgs'</span>]))
</span><span id="1054" class="l">    {
</span><span id="1055" class="l">        <span class="php-var">$msgs</span> = <span class="php-keyword2">explode</span>(<span class="php-quote">','</span>, <span class="php-var">$_REQUEST</span>[<span class="php-quote">'msgs'</span>]);
</span><span id="1056" class="l">        <span class="php-keyword1">foreach</span> (<span class="php-var">$msgs</span> <span class="php-keyword1">as</span> <span class="php-var">$k</span> =&gt; <span class="php-var">$msg</span>)
</span><span id="1057" class="l">            <span class="php-var">$msgs</span>[<span class="php-var">$k</span>] = (int) <span class="php-var">$msg</span>;
</span><span id="1058" class="l">
</span><span id="1059" class="l">        <span class="php-comment">// Get the id_previous_board and id_previous_topic.</span>
</span><span id="1060" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1061" class="l"><span class="php-quote">            SELECT m.id_topic, m.id_msg, m.id_board, m.subject, m.id_member, t.id_previous_board, t.id_previous_topic,
</span></span><span id="1062" class="l"><span class="php-quote">                t.id_first_msg, b.count_posts, COALESCE(pt.id_board, 0) AS possible_prev_board
</span></span><span id="1063" class="l"><span class="php-quote">            FROM {db_prefix}messages AS m
</span></span><span id="1064" class="l"><span class="php-quote">                INNER JOIN {db_prefix}topics AS t ON (t.id_topic = m.id_topic)
</span></span><span id="1065" class="l"><span class="php-quote">                INNER JOIN {db_prefix}boards AS b ON (b.id_board = m.id_board)
</span></span><span id="1066" class="l"><span class="php-quote">                LEFT JOIN {db_prefix}topics AS pt ON (pt.id_topic = t.id_previous_topic)
</span></span><span id="1067" class="l"><span class="php-quote">            WHERE m.id_msg IN ({array_int:messages})'</span>,
</span><span id="1068" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1069" class="l">                <span class="php-quote">'messages'</span> =&gt; <span class="php-var">$msgs</span>,
</span><span id="1070" class="l">            )
</span><span id="1071" class="l">        );
</span><span id="1072" class="l">
</span><span id="1073" class="l">        <span class="php-var">$actioned_messages</span> = <span class="php-keyword1">array</span>();
</span><span id="1074" class="l">        <span class="php-var">$previous_topics</span> = <span class="php-keyword1">array</span>();
</span><span id="1075" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1076" class="l">        {
</span><span id="1077" class="l">            <span class="php-comment">// Restoring the first post means topic.</span>
</span><span id="1078" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_msg'</span>] == <span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>] &amp;&amp; <span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>] == <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>])
</span><span id="1079" class="l">            {
</span><span id="1080" class="l">                <span class="php-var">$topics_to_restore</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>];
</span><span id="1081" class="l">                <span class="php-keyword1">continue</span>;
</span><span id="1082" class="l">            }
</span><span id="1083" class="l">            <span class="php-comment">// Don't know where it's going?</span>
</span><span id="1084" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>]))
</span><span id="1085" class="l">            {
</span><span id="1086" class="l">                <span class="php-var">$unfound_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_msg'</span>]] = <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>];
</span><span id="1087" class="l">                <span class="php-keyword1">continue</span>;
</span><span id="1088" class="l">            }
</span><span id="1089" class="l">
</span><span id="1090" class="l">            <span class="php-var">$previous_topics</span>[] = <span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>];
</span><span id="1091" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$actioned_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>]]))
</span><span id="1092" class="l">                <span class="php-var">$actioned_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>]] = <span class="php-keyword1">array</span>(
</span><span id="1093" class="l">                    <span class="php-quote">'msgs'</span> =&gt; <span class="php-keyword1">array</span>(),
</span><span id="1094" class="l">                    <span class="php-quote">'count_posts'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'count_posts'</span>],
</span><span id="1095" class="l">                    <span class="php-quote">'subject'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>],
</span><span id="1096" class="l">                    <span class="php-quote">'previous_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_previous_board'</span>],
</span><span id="1097" class="l">                    <span class="php-quote">'possible_prev_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'possible_prev_board'</span>],
</span><span id="1098" class="l">                    <span class="php-quote">'current_topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="1099" class="l">                    <span class="php-quote">'current_board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>],
</span><span id="1100" class="l">                    <span class="php-quote">'members'</span> =&gt; <span class="php-keyword1">array</span>(),
</span><span id="1101" class="l">                );
</span><span id="1102" class="l">
</span><span id="1103" class="l">            <span class="php-var">$actioned_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>]][<span class="php-quote">'msgs'</span>][<span class="php-var">$row</span>[<span class="php-quote">'id_msg'</span>]] = <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>];
</span><span id="1104" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>])
</span><span id="1105" class="l">                <span class="php-var">$actioned_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_previous_topic'</span>]][<span class="php-quote">'members'</span>][] = <span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>];
</span><span id="1106" class="l">        }
</span><span id="1107" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1108" class="l">
</span><span id="1109" class="l">        <span class="php-comment">// Check for topics we are going to fully restore.</span>
</span><span id="1110" class="l">        <span class="php-keyword1">foreach</span> (<span class="php-var">$actioned_messages</span> <span class="php-keyword1">as</span> <span class="php-var">$topic</span> =&gt; <span class="php-var">$data</span>)
</span><span id="1111" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword2">in_array</span>(<span class="php-var">$topic</span>, <span class="php-var">$topics_to_restore</span>))
</span><span id="1112" class="l">                <span class="php-keyword1">unset</span>(<span class="php-var">$actioned_messages</span>[<span class="php-var">$topic</span>]);
</span><span id="1113" class="l">
</span><span id="1114" class="l">        <span class="php-comment">// Load any previous topics to check they exist.</span>
</span><span id="1115" class="l">        <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$previous_topics</span>))
</span><span id="1116" class="l">        {
</span><span id="1117" class="l">            <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1118" class="l"><span class="php-quote">                SELECT t.id_topic, t.id_board, m.subject
</span></span><span id="1119" class="l"><span class="php-quote">                FROM {db_prefix}topics AS t
</span></span><span id="1120" class="l"><span class="php-quote">                    INNER JOIN {db_prefix}messages AS m ON (m.id_msg = t.id_first_msg)
</span></span><span id="1121" class="l"><span class="php-quote">                WHERE t.id_topic IN ({array_int:previous_topics})'</span>,
</span><span id="1122" class="l">                <span class="php-keyword1">array</span>(
</span><span id="1123" class="l">                    <span class="php-quote">'previous_topics'</span> =&gt; <span class="php-var">$previous_topics</span>,
</span><span id="1124" class="l">                )
</span><span id="1125" class="l">            );
</span><span id="1126" class="l">            <span class="php-var">$previous_topics</span> = <span class="php-keyword1">array</span>();
</span><span id="1127" class="l">            <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1128" class="l">                <span class="php-var">$previous_topics</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>]] = <span class="php-keyword1">array</span>(
</span><span id="1129" class="l">                    <span class="php-quote">'board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>],
</span><span id="1130" class="l">                    <span class="php-quote">'subject'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>],
</span><span id="1131" class="l">                );
</span><span id="1132" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1133" class="l">        }
</span><span id="1134" class="l">
</span><span id="1135" class="l">        <span class="php-comment">// Restore each topic.</span>
</span><span id="1136" class="l">        <span class="php-var">$messages</span> = <span class="php-keyword1">array</span>();
</span><span id="1137" class="l">        <span class="php-keyword1">foreach</span> (<span class="php-var">$actioned_messages</span> <span class="php-keyword1">as</span> <span class="php-var">$topic</span> =&gt; <span class="php-var">$data</span>)
</span><span id="1138" class="l">        {
</span><span id="1139" class="l">            <span class="php-comment">// If we have topics we are going to restore the whole lot ignore them.</span>
</span><span id="1140" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword2">in_array</span>(<span class="php-var">$topic</span>, <span class="php-var">$topics_to_restore</span>))
</span><span id="1141" class="l">            {
</span><span id="1142" class="l">                <span class="php-keyword1">unset</span>(<span class="php-var">$actioned_messages</span>[<span class="php-var">$topic</span>]);
</span><span id="1143" class="l">                <span class="php-keyword1">continue</span>;
</span><span id="1144" class="l">            }
</span><span id="1145" class="l">
</span><span id="1146" class="l">            <span class="php-comment">// Move the posts back then!</span>
</span><span id="1147" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$previous_topics</span>[<span class="php-var">$topic</span>]))
</span><span id="1148" class="l">            {
</span><span id="1149" class="l">                mergePosts(<span class="php-keyword2">array_keys</span>(<span class="php-var">$data</span>[<span class="php-quote">'msgs'</span>]), <span class="php-var">$data</span>[<span class="php-quote">'current_topic'</span>], <span class="php-var">$topic</span>);
</span><span id="1150" class="l">                <span class="php-comment">// Log em.</span>
</span><span id="1151" class="l">                logAction(<span class="php-quote">'restore_posts'</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'topic'</span> =&gt; <span class="php-var">$topic</span>, <span class="php-quote">'subject'</span> =&gt; <span class="php-var">$previous_topics</span>[<span class="php-var">$topic</span>][<span class="php-quote">'subject'</span>], <span class="php-quote">'board'</span> =&gt; <span class="php-keyword1">empty</span>(<span class="php-var">$data</span>[<span class="php-quote">'previous_board'</span>]) ? <span class="php-var">$data</span>[<span class="php-quote">'possible_prev_board'</span>] : <span class="php-var">$data</span>[<span class="php-quote">'previous_board'</span>]));
</span><span id="1152" class="l">                <span class="php-var">$messages</span> = <span class="php-keyword2">array_merge</span>(<span class="php-keyword2">array_keys</span>(<span class="php-var">$data</span>[<span class="php-quote">'msgs'</span>]), <span class="php-var">$messages</span>);
</span><span id="1153" class="l">            }
</span><span id="1154" class="l">            <span class="php-keyword1">else</span>
</span><span id="1155" class="l">            {
</span><span id="1156" class="l">                <span class="php-keyword1">foreach</span> (<span class="php-var">$data</span>[<span class="php-quote">'msgs'</span>] <span class="php-keyword1">as</span> <span class="php-var">$msg</span>)
</span><span id="1157" class="l">                    <span class="php-var">$unfound_messages</span>[<span class="php-var">$msg</span>[<span class="php-quote">'id'</span>]] = <span class="php-var">$msg</span>[<span class="php-quote">'subject'</span>];
</span><span id="1158" class="l">            }
</span><span id="1159" class="l">        }
</span><span id="1160" class="l">    }
</span><span id="1161" class="l">
</span><span id="1162" class="l">    <span class="php-comment">// Now any topics?</span>
</span><span id="1163" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'topics'</span>]))
</span><span id="1164" class="l">    {
</span><span id="1165" class="l">        <span class="php-var">$topics</span> = <span class="php-keyword2">explode</span>(<span class="php-quote">','</span>, <span class="php-var">$_REQUEST</span>[<span class="php-quote">'topics'</span>]);
</span><span id="1166" class="l">        <span class="php-keyword1">foreach</span> (<span class="php-var">$topics</span> <span class="php-keyword1">as</span> <span class="php-var">$id</span>)
</span><span id="1167" class="l">            <span class="php-var">$topics_to_restore</span>[] = (int) <span class="php-var">$id</span>;
</span><span id="1168" class="l">    }
</span><span id="1169" class="l">
</span><span id="1170" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$topics_to_restore</span>))
</span><span id="1171" class="l">    {
</span><span id="1172" class="l">        <span class="php-comment">// Lets get the data for these topics.</span>
</span><span id="1173" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1174" class="l"><span class="php-quote">            SELECT t.id_topic, t.id_previous_board, t.id_board, t.id_first_msg, m.subject
</span></span><span id="1175" class="l"><span class="php-quote">            FROM {db_prefix}topics AS t
</span></span><span id="1176" class="l"><span class="php-quote">                INNER JOIN {db_prefix}messages AS m ON (m.id_msg = t.id_first_msg)
</span></span><span id="1177" class="l"><span class="php-quote">            WHERE t.id_topic IN ({array_int:topics})'</span>,
</span><span id="1178" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1179" class="l">                <span class="php-quote">'topics'</span> =&gt; <span class="php-var">$topics_to_restore</span>,
</span><span id="1180" class="l">            )
</span><span id="1181" class="l">        );
</span><span id="1182" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1183" class="l">        {
</span><span id="1184" class="l">            <span class="php-comment">// We can only restore if the previous board is set.</span>
</span><span id="1185" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$row</span>[<span class="php-quote">'id_previous_board'</span>]))
</span><span id="1186" class="l">            {
</span><span id="1187" class="l">                <span class="php-var">$unfound_messages</span>[<span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>]] = <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>];
</span><span id="1188" class="l">                <span class="php-keyword1">continue</span>;
</span><span id="1189" class="l">            }
</span><span id="1190" class="l">
</span><span id="1191" class="l">            <span class="php-comment">// Ok we got here so me move them from here to there.</span>
</span><span id="1192" class="l">            moveTopics(<span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>], <span class="php-var">$row</span>[<span class="php-quote">'id_previous_board'</span>]);
</span><span id="1193" class="l">
</span><span id="1194" class="l">            <span class="php-comment">// Lets see if the board that we are returning to has post count enabled.</span>
</span><span id="1195" class="l">            <span class="php-var">$request2</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1196" class="l"><span class="php-quote">                SELECT count_posts
</span></span><span id="1197" class="l"><span class="php-quote">                FROM {db_prefix}boards
</span></span><span id="1198" class="l"><span class="php-quote">                WHERE id_board = {int:board}'</span>,
</span><span id="1199" class="l">                <span class="php-keyword1">array</span>(
</span><span id="1200" class="l">                    <span class="php-quote">'board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_previous_board'</span>],
</span><span id="1201" class="l">                )
</span><span id="1202" class="l">            );
</span><span id="1203" class="l">            <span class="php-keyword1">list</span> (<span class="php-var">$count_posts</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request2</span>);
</span><span id="1204" class="l">            <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request2</span>);
</span><span id="1205" class="l">
</span><span id="1206" class="l">            <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$count_posts</span>))
</span><span id="1207" class="l">            {
</span><span id="1208" class="l">                <span class="php-comment">// Lets get the members that need their post count restored.</span>
</span><span id="1209" class="l">                <span class="php-var">$request2</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1210" class="l"><span class="php-quote">                    SELECT id_member, COUNT(id_msg) AS post_count
</span></span><span id="1211" class="l"><span class="php-quote">                    FROM {db_prefix}messages
</span></span><span id="1212" class="l"><span class="php-quote">                    WHERE id_topic = {int:topic}
</span></span><span id="1213" class="l"><span class="php-quote">                        AND approved = {int:is_approved}
</span></span><span id="1214" class="l"><span class="php-quote">                    GROUP BY id_member'</span>,
</span><span id="1215" class="l">                    <span class="php-keyword1">array</span>(
</span><span id="1216" class="l">                        <span class="php-quote">'topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>],
</span><span id="1217" class="l">                        <span class="php-quote">'is_approved'</span> =&gt; <span class="php-num">1</span>,
</span><span id="1218" class="l">                    )
</span><span id="1219" class="l">                );
</span><span id="1220" class="l">
</span><span id="1221" class="l">                <span class="php-keyword1">while</span> (<span class="php-var">$member</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request2</span>))
</span><span id="1222" class="l">                    updateMemberData(<span class="php-var">$member</span>[<span class="php-quote">'id_member'</span>], <span class="php-keyword1">array</span>(<span class="php-quote">'posts'</span> =&gt; <span class="php-quote">'posts + '</span> . <span class="php-var">$member</span>[<span class="php-quote">'post_count'</span>]));
</span><span id="1223" class="l">                <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request2</span>);
</span><span id="1224" class="l">            }
</span><span id="1225" class="l">
</span><span id="1226" class="l">            <span class="php-comment">// Log it.</span>
</span><span id="1227" class="l">            logAction(<span class="php-quote">'restore_topic'</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'topic'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>], <span class="php-quote">'board'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_board'</span>], <span class="php-quote">'board_to'</span> =&gt; <span class="php-var">$row</span>[<span class="php-quote">'id_previous_board'</span>]));
</span><span id="1228" class="l">        }
</span><span id="1229" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1230" class="l">    }
</span><span id="1231" class="l">
</span><span id="1232" class="l">    <span class="php-comment">// Didn't find some things?</span>
</span><span id="1233" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$unfound_messages</span>))
</span><span id="1234" class="l">        fatal_lang_error(<span class="php-quote">'restore_not_found'</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">array</span>(<span class="php-keyword2">implode</span>(<span class="php-quote">'&lt;br&gt;'</span>, <span class="php-var">$unfound_messages</span>)));
</span><span id="1235" class="l">
</span><span id="1236" class="l">    <span class="php-comment">// Just send them to the index if they get here.</span>
</span><span id="1237" class="l">    redirectexit();
</span><span id="1238" class="l">}
</span><span id="1239" class="l">
</span><span id="1240" class="l"><span class="php-comment">/**
</span></span><span id="1241" class="l"><span class="php-comment"> * Take a load of messages from one place and stick them in a topic
</span></span><span id="1242" class="l"><span class="php-comment"> *
</span></span><span id="1243" class="l"><span class="php-comment"> * @param array $msgs The IDs of the posts to merge
</span></span><span id="1244" class="l"><span class="php-comment"> * @param integer $from_topic The ID of the topic the messages were originally in
</span></span><span id="1245" class="l"><span class="php-comment"> * @param integer $target_topic The ID of the topic the messages are being merged into
</span></span><span id="1246" class="l"><span class="php-comment"> */</span>
</span><span id="1247" class="l"><span class="php-keyword1">function</span> mergePosts(<span class="php-var">$msgs</span>, <span class="php-var">$from_topic</span>, <span class="php-var">$target_topic</span>)
</span><span id="1248" class="l">{
</span><span id="1249" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$smcFunc</span>, <span class="php-var">$sourcedir</span>;
</span><span id="1250" class="l">
</span><span id="1251" class="l">    <span class="php-comment">//!!! This really needs to be rewritten to take a load of messages from ANY topic, it's also inefficient.</span>
</span><span id="1252" class="l">
</span><span id="1253" class="l">    <span class="php-comment">// Is it an array?</span>
</span><span id="1254" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword2">is_array</span>(<span class="php-var">$msgs</span>))
</span><span id="1255" class="l">        <span class="php-var">$msgs</span> = <span class="php-keyword1">array</span>(<span class="php-var">$msgs</span>);
</span><span id="1256" class="l">
</span><span id="1257" class="l">    <span class="php-comment">// Lets make sure they are int.</span>
</span><span id="1258" class="l">    <span class="php-keyword1">foreach</span> (<span class="php-var">$msgs</span> <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$msg</span>)
</span><span id="1259" class="l">        <span class="php-var">$msgs</span>[<span class="php-var">$key</span>] = (int) <span class="php-var">$msg</span>;
</span><span id="1260" class="l">
</span><span id="1261" class="l">    <span class="php-comment">// Get the source information.</span>
</span><span id="1262" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1263" class="l"><span class="php-quote">        SELECT t.id_board, t.id_first_msg, t.num_replies, t.unapproved_posts
</span></span><span id="1264" class="l"><span class="php-quote">        FROM {db_prefix}topics AS t
</span></span><span id="1265" class="l"><span class="php-quote">            INNER JOIN {db_prefix}boards AS b ON (b.id_board = t.id_board)
</span></span><span id="1266" class="l"><span class="php-quote">        WHERE t.id_topic = {int:from_topic}'</span>,
</span><span id="1267" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1268" class="l">            <span class="php-quote">'from_topic'</span> =&gt; <span class="php-var">$from_topic</span>,
</span><span id="1269" class="l">        )
</span><span id="1270" class="l">    );
</span><span id="1271" class="l">    <span class="php-keyword1">list</span> (<span class="php-var">$from_board</span>, <span class="php-var">$from_first_msg</span>, <span class="php-var">$from_replies</span>, <span class="php-var">$from_unapproved_posts</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="1272" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1273" class="l">
</span><span id="1274" class="l">    <span class="php-comment">// Get some target topic and board stats.</span>
</span><span id="1275" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1276" class="l"><span class="php-quote">        SELECT t.id_board, t.id_first_msg, t.num_replies, t.unapproved_posts, b.count_posts
</span></span><span id="1277" class="l"><span class="php-quote">        FROM {db_prefix}topics AS t
</span></span><span id="1278" class="l"><span class="php-quote">            INNER JOIN {db_prefix}boards AS b ON (b.id_board = t.id_board)
</span></span><span id="1279" class="l"><span class="php-quote">        WHERE t.id_topic = {int:target_topic}'</span>,
</span><span id="1280" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1281" class="l">            <span class="php-quote">'target_topic'</span> =&gt; <span class="php-var">$target_topic</span>,
</span><span id="1282" class="l">        )
</span><span id="1283" class="l">    );
</span><span id="1284" class="l">    <span class="php-keyword1">list</span> (<span class="php-var">$target_board</span>, <span class="php-var">$target_first_msg</span>, <span class="php-var">$target_replies</span>, <span class="php-var">$target_unapproved_posts</span>, <span class="php-var">$count_posts</span>) = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_row'</span>](<span class="php-var">$request</span>);
</span><span id="1285" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1286" class="l">
</span><span id="1287" class="l">    <span class="php-comment">// Lets see if the board that we are returning to has post count enabled.</span>
</span><span id="1288" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$count_posts</span>))
</span><span id="1289" class="l">    {
</span><span id="1290" class="l">        <span class="php-comment">// Lets get the members that need their post count restored.</span>
</span><span id="1291" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1292" class="l"><span class="php-quote">            SELECT id_member
</span></span><span id="1293" class="l"><span class="php-quote">            FROM {db_prefix}messages
</span></span><span id="1294" class="l"><span class="php-quote">            WHERE id_msg IN ({array_int:messages})
</span></span><span id="1295" class="l"><span class="php-quote">                AND approved = {int:is_approved}'</span>,
</span><span id="1296" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1297" class="l">                <span class="php-quote">'messages'</span> =&gt; <span class="php-var">$msgs</span>,
</span><span id="1298" class="l">                <span class="php-quote">'is_approved'</span> =&gt; <span class="php-num">1</span>,
</span><span id="1299" class="l">            )
</span><span id="1300" class="l">        );
</span><span id="1301" class="l">
</span><span id="1302" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1303" class="l">            updateMemberData(<span class="php-var">$row</span>[<span class="php-quote">'id_member'</span>], <span class="php-keyword1">array</span>(<span class="php-quote">'posts'</span> =&gt; <span class="php-quote">'+'</span>));
</span><span id="1304" class="l">    }
</span><span id="1305" class="l">
</span><span id="1306" class="l">    <span class="php-comment">// Time to move the messages.</span>
</span><span id="1307" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1308" class="l"><span class="php-quote">        UPDATE {db_prefix}messages
</span></span><span id="1309" class="l"><span class="php-quote">        SET
</span></span><span id="1310" class="l"><span class="php-quote">            id_topic = {int:target_topic},
</span></span><span id="1311" class="l"><span class="php-quote">            id_board = {int:target_board}
</span></span><span id="1312" class="l"><span class="php-quote">        WHERE id_msg IN({array_int:msgs})'</span>,
</span><span id="1313" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1314" class="l">            <span class="php-quote">'target_topic'</span> =&gt; <span class="php-var">$target_topic</span>,
</span><span id="1315" class="l">            <span class="php-quote">'target_board'</span> =&gt; <span class="php-var">$target_board</span>,
</span><span id="1316" class="l">            <span class="php-quote">'msgs'</span> =&gt; <span class="php-var">$msgs</span>,
</span><span id="1317" class="l">        )
</span><span id="1318" class="l">    );
</span><span id="1319" class="l">
</span><span id="1320" class="l">    <span class="php-comment">// Fix the id_first_msg and id_last_msg for the target topic.</span>
</span><span id="1321" class="l">    <span class="php-var">$target_topic_data</span> = <span class="php-keyword1">array</span>(
</span><span id="1322" class="l">        <span class="php-quote">'num_replies'</span> =&gt; <span class="php-num">0</span>,
</span><span id="1323" class="l">        <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="1324" class="l">        <span class="php-quote">'id_first_msg'</span> =&gt; <span class="php-num">9999999999</span>,
</span><span id="1325" class="l">    );
</span><span id="1326" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1327" class="l"><span class="php-quote">        SELECT MIN(id_msg) AS id_first_msg, MAX(id_msg) AS id_last_msg, COUNT(*) AS message_count, approved
</span></span><span id="1328" class="l"><span class="php-quote">        FROM {db_prefix}messages
</span></span><span id="1329" class="l"><span class="php-quote">        WHERE id_topic = {int:target_topic}
</span></span><span id="1330" class="l"><span class="php-quote">        GROUP BY id_topic, approved
</span></span><span id="1331" class="l"><span class="php-quote">        ORDER BY approved ASC
</span></span><span id="1332" class="l"><span class="php-quote">        LIMIT 2'</span>,
</span><span id="1333" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1334" class="l">            <span class="php-quote">'target_topic'</span> =&gt; <span class="php-var">$target_topic</span>,
</span><span id="1335" class="l">        )
</span><span id="1336" class="l">    );
</span><span id="1337" class="l">    <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1338" class="l">    {
</span><span id="1339" class="l">        <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>] &lt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_first_msg'</span>])
</span><span id="1340" class="l">            <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_first_msg'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>];
</span><span id="1341" class="l">        <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_last_msg'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'id_last_msg'</span>];
</span><span id="1342" class="l">        <span class="php-keyword1">if</span> (!<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>])
</span><span id="1343" class="l">            <span class="php-var">$target_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'message_count'</span>];
</span><span id="1344" class="l">        <span class="php-keyword1">else</span>
</span><span id="1345" class="l">            <span class="php-var">$target_topic_data</span>[<span class="php-quote">'num_replies'</span>] = <span class="php-keyword2">max</span>(<span class="php-num">0</span>, <span class="php-var">$row</span>[<span class="php-quote">'message_count'</span>] - <span class="php-num">1</span>);
</span><span id="1346" class="l">    }
</span><span id="1347" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1348" class="l">
</span><span id="1349" class="l">    <span class="php-comment">// We have a new post count for the board.</span>
</span><span id="1350" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1351" class="l"><span class="php-quote">        UPDATE {db_prefix}boards
</span></span><span id="1352" class="l"><span class="php-quote">        SET
</span></span><span id="1353" class="l"><span class="php-quote">            num_posts = num_posts + {int:diff_replies},
</span></span><span id="1354" class="l"><span class="php-quote">            unapproved_posts = unapproved_posts + {int:diff_unapproved_posts}
</span></span><span id="1355" class="l"><span class="php-quote">        WHERE id_board = {int:target_board}'</span>,
</span><span id="1356" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1357" class="l">            <span class="php-quote">'diff_replies'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'num_replies'</span>] - <span class="php-var">$target_replies</span>, <span class="php-comment">// Lets keep in mind that the first message in a topic counts towards num_replies in a board.</span>
</span><span id="1358" class="l">            <span class="php-quote">'diff_unapproved_posts'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>] - <span class="php-var">$target_unapproved_posts</span>,
</span><span id="1359" class="l">            <span class="php-quote">'target_board'</span> =&gt; <span class="php-var">$target_board</span>,
</span><span id="1360" class="l">        )
</span><span id="1361" class="l">    );
</span><span id="1362" class="l">
</span><span id="1363" class="l">    <span class="php-comment">// In some cases we merged the only post in a topic so the topic data is left behind in the topic table.</span>
</span><span id="1364" class="l">    <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1365" class="l"><span class="php-quote">        SELECT id_topic
</span></span><span id="1366" class="l"><span class="php-quote">        FROM {db_prefix}messages
</span></span><span id="1367" class="l"><span class="php-quote">        WHERE id_topic = {int:from_topic}'</span>,
</span><span id="1368" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1369" class="l">            <span class="php-quote">'from_topic'</span> =&gt; <span class="php-var">$from_topic</span>,
</span><span id="1370" class="l">        )
</span><span id="1371" class="l">    );
</span><span id="1372" class="l">
</span><span id="1373" class="l">    <span class="php-comment">// Remove the topic if it doesn't have any messages.</span>
</span><span id="1374" class="l">    <span class="php-var">$topic_exists</span> = <span class="php-keyword1">true</span>;
</span><span id="1375" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$smcFunc</span>[<span class="php-quote">'db_num_rows'</span>](<span class="php-var">$request</span>) == <span class="php-num">0</span>)
</span><span id="1376" class="l">    {
</span><span id="1377" class="l">        removeTopics(<span class="php-var">$from_topic</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">true</span>);
</span><span id="1378" class="l">        <span class="php-var">$topic_exists</span> = <span class="php-keyword1">false</span>;
</span><span id="1379" class="l">    }
</span><span id="1380" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1381" class="l">
</span><span id="1382" class="l">    <span class="php-comment">// Recycled topic.</span>
</span><span id="1383" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$topic_exists</span> == <span class="php-keyword1">true</span>)
</span><span id="1384" class="l">    {
</span><span id="1385" class="l">        <span class="php-comment">// Fix the id_first_msg and id_last_msg for the source topic.</span>
</span><span id="1386" class="l">        <span class="php-var">$source_topic_data</span> = <span class="php-keyword1">array</span>(
</span><span id="1387" class="l">            <span class="php-quote">'num_replies'</span> =&gt; <span class="php-num">0</span>,
</span><span id="1388" class="l">            <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-num">0</span>,
</span><span id="1389" class="l">            <span class="php-quote">'id_first_msg'</span> =&gt; <span class="php-num">9999999999</span>,
</span><span id="1390" class="l">        );
</span><span id="1391" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1392" class="l"><span class="php-quote">            SELECT MIN(id_msg) AS id_first_msg, MAX(id_msg) AS id_last_msg, COUNT(*) AS message_count, approved, subject
</span></span><span id="1393" class="l"><span class="php-quote">            FROM {db_prefix}messages
</span></span><span id="1394" class="l"><span class="php-quote">            WHERE id_topic = {int:from_topic}
</span></span><span id="1395" class="l"><span class="php-quote">            GROUP BY id_topic, approved
</span></span><span id="1396" class="l"><span class="php-quote">            ORDER BY approved ASC
</span></span><span id="1397" class="l"><span class="php-quote">            LIMIT 2'</span>,
</span><span id="1398" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1399" class="l">                <span class="php-quote">'from_topic'</span> =&gt; <span class="php-var">$from_topic</span>,
</span><span id="1400" class="l">            )
</span><span id="1401" class="l">        );
</span><span id="1402" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1403" class="l">        {
</span><span id="1404" class="l">            <span class="php-keyword1">if</span> (<span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>] &lt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>])
</span><span id="1405" class="l">                <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'id_first_msg'</span>];
</span><span id="1406" class="l">            <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_last_msg'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'id_last_msg'</span>];
</span><span id="1407" class="l">            <span class="php-keyword1">if</span> (!<span class="php-var">$row</span>[<span class="php-quote">'approved'</span>])
</span><span id="1408" class="l">                <span class="php-var">$source_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>] = <span class="php-var">$row</span>[<span class="php-quote">'message_count'</span>];
</span><span id="1409" class="l">            <span class="php-keyword1">else</span>
</span><span id="1410" class="l">                <span class="php-var">$source_topic_data</span>[<span class="php-quote">'num_replies'</span>] = <span class="php-keyword2">max</span>(<span class="php-num">0</span>, <span class="php-var">$row</span>[<span class="php-quote">'message_count'</span>] - <span class="php-num">1</span>);
</span><span id="1411" class="l">        }
</span><span id="1412" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1413" class="l">
</span><span id="1414" class="l">        <span class="php-comment">// Update the topic details for the source topic.</span>
</span><span id="1415" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1416" class="l"><span class="php-quote">            UPDATE {db_prefix}topics
</span></span><span id="1417" class="l"><span class="php-quote">            SET
</span></span><span id="1418" class="l"><span class="php-quote">                id_first_msg = {int:id_first_msg},
</span></span><span id="1419" class="l"><span class="php-quote">                id_last_msg = {int:id_last_msg},
</span></span><span id="1420" class="l"><span class="php-quote">                num_replies = {int:num_replies},
</span></span><span id="1421" class="l"><span class="php-quote">                unapproved_posts = {int:unapproved_posts}
</span></span><span id="1422" class="l"><span class="php-quote">            WHERE id_topic = {int:from_topic}'</span>,
</span><span id="1423" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1424" class="l">                <span class="php-quote">'id_first_msg'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>],
</span><span id="1425" class="l">                <span class="php-quote">'id_last_msg'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_last_msg'</span>],
</span><span id="1426" class="l">                <span class="php-quote">'num_replies'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'num_replies'</span>],
</span><span id="1427" class="l">                <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>],
</span><span id="1428" class="l">                <span class="php-quote">'from_topic'</span> =&gt; <span class="php-var">$from_topic</span>,
</span><span id="1429" class="l">            )
</span><span id="1430" class="l">        );
</span><span id="1431" class="l">
</span><span id="1432" class="l">        <span class="php-comment">// We have a new post count for the source board.</span>
</span><span id="1433" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1434" class="l"><span class="php-quote">            UPDATE {db_prefix}boards
</span></span><span id="1435" class="l"><span class="php-quote">            SET
</span></span><span id="1436" class="l"><span class="php-quote">                num_posts = num_posts + {int:diff_replies},
</span></span><span id="1437" class="l"><span class="php-quote">                unapproved_posts = unapproved_posts + {int:diff_unapproved_posts}
</span></span><span id="1438" class="l"><span class="php-quote">            WHERE id_board = {int:from_board}'</span>,
</span><span id="1439" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1440" class="l">                <span class="php-quote">'diff_replies'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'num_replies'</span>] - <span class="php-var">$from_replies</span>, <span class="php-comment">// Lets keep in mind that the first message in a topic counts towards num_replies in a board.</span>
</span><span id="1441" class="l">                <span class="php-quote">'diff_unapproved_posts'</span> =&gt; <span class="php-var">$source_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>] - <span class="php-var">$from_unapproved_posts</span>,
</span><span id="1442" class="l">                <span class="php-quote">'from_board'</span> =&gt; <span class="php-var">$from_board</span>,
</span><span id="1443" class="l">            )
</span><span id="1444" class="l">        );
</span><span id="1445" class="l">    }
</span><span id="1446" class="l">
</span><span id="1447" class="l">    <span class="php-comment">// Finally get around to updating the destination topic, now all indexes etc on the source are fixed.</span>
</span><span id="1448" class="l">    <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1449" class="l"><span class="php-quote">        UPDATE {db_prefix}topics
</span></span><span id="1450" class="l"><span class="php-quote">        SET
</span></span><span id="1451" class="l"><span class="php-quote">            id_first_msg = {int:id_first_msg},
</span></span><span id="1452" class="l"><span class="php-quote">            id_last_msg = {int:id_last_msg},
</span></span><span id="1453" class="l"><span class="php-quote">            num_replies = {int:num_replies},
</span></span><span id="1454" class="l"><span class="php-quote">            unapproved_posts = {int:unapproved_posts}
</span></span><span id="1455" class="l"><span class="php-quote">        WHERE id_topic = {int:target_topic}'</span>,
</span><span id="1456" class="l">        <span class="php-keyword1">array</span>(
</span><span id="1457" class="l">            <span class="php-quote">'id_first_msg'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_first_msg'</span>],
</span><span id="1458" class="l">            <span class="php-quote">'id_last_msg'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_last_msg'</span>],
</span><span id="1459" class="l">            <span class="php-quote">'num_replies'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'num_replies'</span>],
</span><span id="1460" class="l">            <span class="php-quote">'unapproved_posts'</span> =&gt; <span class="php-var">$target_topic_data</span>[<span class="php-quote">'unapproved_posts'</span>],
</span><span id="1461" class="l">            <span class="php-quote">'target_topic'</span> =&gt; <span class="php-var">$target_topic</span>,
</span><span id="1462" class="l">        )
</span><span id="1463" class="l">    );
</span><span id="1464" class="l">
</span><span id="1465" class="l">    <span class="php-comment">// Need it to update some stats.</span>
</span><span id="1466" class="l">    <span class="php-keyword1">require_once</span>(<span class="php-var">$sourcedir</span> . <span class="php-quote">'/Subs-Post.php'</span>);
</span><span id="1467" class="l">
</span><span id="1468" class="l">    <span class="php-comment">// Update stats.</span>
</span><span id="1469" class="l">    updateStats(<span class="php-quote">'topic'</span>);
</span><span id="1470" class="l">    updateStats(<span class="php-quote">'message'</span>);
</span><span id="1471" class="l">
</span><span id="1472" class="l">    <span class="php-comment">// Subject cache?</span>
</span><span id="1473" class="l">    <span class="php-var">$cache_updates</span> = <span class="php-keyword1">array</span>();
</span><span id="1474" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$target_first_msg</span> != <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_first_msg'</span>])
</span><span id="1475" class="l">        <span class="php-var">$cache_updates</span>[] = <span class="php-var">$target_topic_data</span>[<span class="php-quote">'id_first_msg'</span>];
</span><span id="1476" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>]) &amp;&amp; <span class="php-var">$from_first_msg</span> != <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>])
</span><span id="1477" class="l">        <span class="php-var">$cache_updates</span>[] = <span class="php-var">$source_topic_data</span>[<span class="php-quote">'id_first_msg'</span>];
</span><span id="1478" class="l">
</span><span id="1479" class="l">    <span class="php-keyword1">if</span> (!<span class="php-keyword1">empty</span>(<span class="php-var">$cache_updates</span>))
</span><span id="1480" class="l">    {
</span><span id="1481" class="l">        <span class="php-var">$request</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_query'</span>](<span class="php-quote">''</span>, <span class="php-quote">'
</span></span><span id="1482" class="l"><span class="php-quote">            SELECT id_topic, subject
</span></span><span id="1483" class="l"><span class="php-quote">            FROM {db_prefix}messages
</span></span><span id="1484" class="l"><span class="php-quote">            WHERE id_msg IN ({array_int:first_messages})'</span>,
</span><span id="1485" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1486" class="l">                <span class="php-quote">'first_messages'</span> =&gt; <span class="php-var">$cache_updates</span>,
</span><span id="1487" class="l">            )
</span><span id="1488" class="l">        );
</span><span id="1489" class="l">        <span class="php-keyword1">while</span> (<span class="php-var">$row</span> = <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_fetch_assoc'</span>](<span class="php-var">$request</span>))
</span><span id="1490" class="l">            updateStats(<span class="php-quote">'subject'</span>, <span class="php-var">$row</span>[<span class="php-quote">'id_topic'</span>], <span class="php-var">$row</span>[<span class="php-quote">'subject'</span>]);
</span><span id="1491" class="l">        <span class="php-var">$smcFunc</span>[<span class="php-quote">'db_free_result'</span>](<span class="php-var">$request</span>);
</span><span id="1492" class="l">    }
</span><span id="1493" class="l">
</span><span id="1494" class="l">    updateLastMessages(<span class="php-keyword1">array</span>(<span class="php-var">$from_board</span>, <span class="php-var">$target_board</span>));
</span><span id="1495" class="l">}
</span><span id="1496" class="l">
</span><span id="1497" class="l"><span class="php-comment">/**
</span></span><span id="1498" class="l"><span class="php-comment"> * Try to determine if the topic has already been deleted by another user.
</span></span><span id="1499" class="l"><span class="php-comment"> *
</span></span><span id="1500" class="l"><span class="php-comment"> * @return bool False if it can't be deleted (recycling not enabled or no recycling board set), true if we've confirmed it can be deleted. Dies with an error if it's already been deleted.
</span></span><span id="1501" class="l"><span class="php-comment"> */</span>
</span><span id="1502" class="l"><span class="php-keyword1">function</span> removeDeleteConcurrence()
</span><span id="1503" class="l">{
</span><span id="1504" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$modSettings</span>, <span class="php-var">$board</span>, <span class="php-var">$scripturl</span>, <span class="php-var">$context</span>;
</span><span id="1505" class="l">
</span><span id="1506" class="l">    <span class="php-comment">// No recycle no need to go further</span>
</span><span id="1507" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_enable'</span>]) || <span class="php-keyword1">empty</span>(<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>]))
</span><span id="1508" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1509" class="l">
</span><span id="1510" class="l">    <span class="php-comment">// If it's confirmed go on and delete (from recycle)</span>
</span><span id="1511" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_GET</span>[<span class="php-quote">'confirm_delete'</span>]))
</span><span id="1512" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">true</span>;
</span><span id="1513" class="l">
</span><span id="1514" class="l">    <span class="php-keyword1">if</span> (<span class="php-keyword1">empty</span>(<span class="php-var">$board</span>))
</span><span id="1515" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1516" class="l">
</span><span id="1517" class="l">    <span class="php-keyword1">if</span> (<span class="php-var">$modSettings</span>[<span class="php-quote">'recycle_board'</span>] != <span class="php-var">$board</span>)
</span><span id="1518" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">true</span>;
</span><span id="1519" class="l">    <span class="php-keyword1">elseif</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>]))
</span><span id="1520" class="l">        <span class="php-var">$confirm_url</span> = <span class="php-var">$scripturl</span> . <span class="php-quote">'?action=deletemsg;confirm_delete;topic='</span> . <span class="php-var">$context</span>[<span class="php-quote">'current_topic'</span>] . <span class="php-quote">'.0;msg='</span> . <span class="php-var">$_REQUEST</span>[<span class="php-quote">'msg'</span>] . <span class="php-quote">';'</span> . <span class="php-var">$context</span>[<span class="php-quote">'session_var'</span>] . <span class="php-quote">'='</span> . <span class="php-var">$context</span>[<span class="php-quote">'session_id'</span>];
</span><span id="1521" class="l">    <span class="php-keyword1">else</span>
</span><span id="1522" class="l">        <span class="php-var">$confirm_url</span> = <span class="php-var">$scripturl</span> . <span class="php-quote">'?action=removetopic2;confirm_delete;topic='</span> . <span class="php-var">$context</span>[<span class="php-quote">'current_topic'</span>] . <span class="php-quote">'.0;'</span> . <span class="php-var">$context</span>[<span class="php-quote">'session_var'</span>] . <span class="php-quote">'='</span> . <span class="php-var">$context</span>[<span class="php-quote">'session_id'</span>];
</span><span id="1523" class="l">
</span><span id="1524" class="l">    fatal_lang_error(<span class="php-quote">'post_already_deleted'</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">array</span>(<span class="php-var">$confirm_url</span>));
</span><span id="1525" class="l">}
</span><span id="1526" class="l">
</span><span id="1527" class="l"><span class="xlang">?&gt;</span></span></code></pre>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?acfe82569972112f7de3958799175a016085c948"></script>
<script src="elementlist.js?44d687a39dc1e4d5e2703066eaa263f29d3ca2c6"></script>
</body>
</html>
